\hypertarget{classRuntimeReserver}{}\doxysection{Runtime\+Reserver Class Reference}
\label{classRuntimeReserver}\index{RuntimeReserver@{RuntimeReserver}}


\mbox{\hyperlink{classRuntimeReserver}{Runtime\+Reserver}} phase of the scheduler.  




{\ttfamily \#include $<$phases.\+hpp$>$}



Inheritance diagram for Runtime\+Reserver\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=181pt]{classRuntimeReserver__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Runtime\+Reserver\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classRuntimeReserver__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classRuntimeReserver_aa4630fbab67c38b78ce14b4f9bcfcaf1}{Runtime\+Reserver}} (\mbox{\hyperlink{classInnerScheduler}{Inner\+Scheduler}} $\ast$\mbox{\hyperlink{classSchedulerPhase_a5b1a4e7a44cc2162e50cded7bba4376f}{scheduler}}, \mbox{\hyperlink{classDeviceManager}{Device\+Manager}} $\ast$devices)
\item 
void \mbox{\hyperlink{classRuntimeReserver_aeab29f38dfdcc8f13fd839bf2629d1f5}{enqueue}} (\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$task)
\begin{DoxyCompactList}\small\item\em Enqueue a task to the phase. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classRuntimeReserver_a2a24f89c881efa2bb6a99b85372c857f}{enqueue}} (std\+::vector$<$ \mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$ $>$ \&tasks)
\begin{DoxyCompactList}\small\item\em Enqueue a vector of tasks to the phase. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classRuntimeReserver_aaa9106861bccbc209f7f1fa81defdfd9}{run}} (\mbox{\hyperlink{classSchedulerPhase}{Scheduler\+Phase}} $\ast$next\+\_\+phase)
\begin{DoxyCompactList}\small\item\em Run the phase. Check tasks in the enqueued buffer, check phase condition, and move tasks to the next phase. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classRuntimeReserver_a23475509344951f743f48f6239eda1bf}{get\+\_\+count}} ()
\begin{DoxyCompactList}\small\item\em Get the number of tasks enqueued (and waiting) in the phase. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classRuntimeReserver_a460572d7aa2a6456eebf4ceb2925f490}{get\+\_\+compute\+\_\+count}} ()
\item 
size\+\_\+t \mbox{\hyperlink{classRuntimeReserver_a83c31b744b15ab80ab321a6350fd239b}{get\+\_\+movement\+\_\+count}} ()
\item 
const std\+::string \& \mbox{\hyperlink{classRuntimeReserver_a1dd76466598e88d445e65b7476c2b219}{get\+\_\+name}} () const
\item 
const \mbox{\hyperlink{classRuntimeReserverStatus}{Runtime\+Reserver\+Status}} \& \mbox{\hyperlink{classRuntimeReserver_a0c4bc6f366850fdadca4122fb41c92f4}{get\+\_\+status}} () const
\item 
const void \mbox{\hyperlink{classRuntimeReserver_a116cb18c93999e9af1d88d1023845614}{print\+\_\+status}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classRuntimeReserver_a9141b37fda4d023dc667b37dd3e5d360}{check\+\_\+resources}} (\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$task)
\begin{DoxyCompactList}\small\item\em Check if the Non\+Persistent\+Resources are available for a Compute\+Task. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classRuntimeReserver_a422470bf67f4cb6b057c30baac9fb0fb}{check\+\_\+data\+\_\+resources}} (\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$task)
\begin{DoxyCompactList}\small\item\em Check the resources for a data movement task (number of free copy engines). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classRuntimeReserver_a1e712cf575823c28b9fabfca1c3a355c}{reserve\+\_\+resources}} (\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$task)
\begin{DoxyCompactList}\small\item\em Reserve (decrease) the Non\+Persistent\+Resources for a Compute\+Task. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classRuntimeReserver_a38fd597058f02ff8641dd7b332197ca6}{reserve\+\_\+data\+\_\+resources}} (\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$task)
\begin{DoxyCompactList}\small\item\em Reserve (decrease) the resources for a data movement task (number of copy engines). \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classPhaseManager}{Phase\+Manager}}$<$ \mbox{\hyperlink{resources_8hpp_aaf78cb490f07150f95154e6a8c907436a7614275fbaf0a47eea0c100334a57d93}{Resource\+Category\+::\+Non\+Persistent}} $>$ $>$ \mbox{\hyperlink{classRuntimeReserver_a269183fa13c16d2adb545b40513ba63f}{runnable\+\_\+tasks}}
\begin{DoxyCompactList}\small\item\em The multidevice queues for compute tasks. \end{DoxyCompactList}\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classPhaseManager}{Phase\+Manager}}$<$ \mbox{\hyperlink{resources_8hpp_aaf78cb490f07150f95154e6a8c907436a4642e767f9251fa40afadbc963f80b7a}{Resource\+Category\+::\+Movement}} $>$ $>$ \mbox{\hyperlink{classRuntimeReserver_ab211d363620de722f107f93f8509edbb}{movement\+\_\+tasks}}
\begin{DoxyCompactList}\small\item\em The multidevice queues for data movement tasks. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classRuntimeReserverStatus}{Runtime\+Reserver\+Status}} \mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}} \{\mbox{\hyperlink{classRuntimeReserver_a7e83c60e6ce668d4e0b77525285aaa52}{name}}\}
\begin{DoxyCompactList}\small\item\em The status of the phase. Used for debugging and tracing. \end{DoxyCompactList}\item 
std\+::vector$<$ \mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$ $>$ \mbox{\hyperlink{classRuntimeReserver_aaf4cf5e16c01330afbfe4a1490d7f7f1}{launchable\+\_\+tasks\+\_\+buffer}}
\begin{DoxyCompactList}\small\item\em The buffer of tasks enqueued (and waiting) in the phase. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Protected Attributes}
\begin{DoxyCompactItemize}
\item 
static const std\+::string \mbox{\hyperlink{classRuntimeReserver_a7e83c60e6ce668d4e0b77525285aaa52}{name}} \{\char`\"{}Runtime Reserver\char`\"{}\}
\begin{DoxyCompactList}\small\item\em The name of the phase. Used for debugging and tracing. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\mbox{\hyperlink{classRuntimeReserver}{Runtime\+Reserver}} phase of the scheduler. 

\mbox{\hyperlink{classRuntimeReserver}{Runtime\+Reserver}} reserves all \textquotesingle{}non-\/persistent resources{\ttfamily . Here all \textquotesingle{}non-\/persistent resources} that have a lifetime equal to the task body are reserved and are not directly shared between tasks. At the moment this is only the VCUS/\+Threads a task uses. This phase submits the task to the launcher. 

Definition at line 291 of file phases.\+hpp.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classRuntimeReserver_aa4630fbab67c38b78ce14b4f9bcfcaf1}\label{classRuntimeReserver_aa4630fbab67c38b78ce14b4f9bcfcaf1}} 
\index{RuntimeReserver@{RuntimeReserver}!RuntimeReserver@{RuntimeReserver}}
\index{RuntimeReserver@{RuntimeReserver}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{RuntimeReserver()}{RuntimeReserver()}}
{\footnotesize\ttfamily Runtime\+Reserver\+::\+Runtime\+Reserver (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerScheduler}{Inner\+Scheduler}} $\ast$}]{scheduler,  }\item[{\mbox{\hyperlink{classDeviceManager}{Device\+Manager}} $\ast$}]{devices }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 293 of file phases.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{294       : \mbox{\hyperlink{classSchedulerPhase_af30330d46896e1e64815407abbb06ab8}{SchedulerPhase}}(\mbox{\hyperlink{classSchedulerPhase_a5b1a4e7a44cc2162e50cded7bba4376f}{scheduler}}, \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a4cd77e2b819d63fe1c64f5f59c52360b}{devices}}) \{}
\DoxyCodeLine{295     \textcolor{comment}{// std::cout << "{}RuntimeReserver created"{} << std::endl;}}
\DoxyCodeLine{296     \textcolor{comment}{// FIXME: This leaks memory. Need to add deconstructor.}}
\DoxyCodeLine{297     this-\/>\mbox{\hyperlink{classRuntimeReserver_a269183fa13c16d2adb545b40513ba63f}{runnable\_tasks}} =}
\DoxyCodeLine{298         std::make\_shared<PhaseManager<ResourceCategory::NonPersistent>>(}
\DoxyCodeLine{299             \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a4cd77e2b819d63fe1c64f5f59c52360b}{devices}});}
\DoxyCodeLine{300     this-\/>\mbox{\hyperlink{classRuntimeReserver_ab211d363620de722f107f93f8509edbb}{movement\_tasks}} =}
\DoxyCodeLine{301         std::make\_shared<PhaseManager<ResourceCategory::Movement>>(\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a4cd77e2b819d63fe1c64f5f59c52360b}{devices}});}
\DoxyCodeLine{302   \}}

\end{DoxyCode}


References Scheduler\+Phase\+::\+Scheduler\+Phase().



Referenced by Inner\+Scheduler\+::\+Inner\+Scheduler().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classRuntimeReserver_aa4630fbab67c38b78ce14b4f9bcfcaf1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classRuntimeReserver_aa4630fbab67c38b78ce14b4f9bcfcaf1_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classRuntimeReserver_a422470bf67f4cb6b057c30baac9fb0fb}\label{classRuntimeReserver_a422470bf67f4cb6b057c30baac9fb0fb}} 
\index{RuntimeReserver@{RuntimeReserver}!check\_data\_resources@{check\_data\_resources}}
\index{check\_data\_resources@{check\_data\_resources}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{check\_data\_resources()}{check\_data\_resources()}}
{\footnotesize\ttfamily bool Runtime\+Reserver\+::check\+\_\+data\+\_\+resources (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$}]{task }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Check the resources for a data movement task (number of free copy engines). 



Definition at line 351 of file phases.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{351                                                           \{}
\DoxyCodeLine{352   \textcolor{keywordtype}{bool} \mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}} = \textcolor{keyword}{true};}
\DoxyCodeLine{353   \textcolor{keywordflow}{for} (\mbox{\hyperlink{classDevice}{Device}} *device : \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}-\/>assigned\_devices) \{}
\DoxyCodeLine{354     \mbox{\hyperlink{classResourcePool}{ResourcePool\_t}} \&task\_pool =}
\DoxyCodeLine{355         \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}-\/>device\_constraints[device-\/>\mbox{\hyperlink{classDevice_a7a4beec758f8c827ffce31562ee9ebdb}{get\_global\_id}}()];}
\DoxyCodeLine{356     \mbox{\hyperlink{classResourcePool}{ResourcePool\_t}} \&device\_pool = device-\/>\mbox{\hyperlink{classDevice_a23e7c65c6d833d56755aead8128763b7}{get\_reserved\_pool}}();}
\DoxyCodeLine{357 }
\DoxyCodeLine{358     \mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}} = device\_pool.\mbox{\hyperlink{classResourcePool_a6e6f954ecbf68bc7039b1a6826664f76}{check\_greater}}<\mbox{\hyperlink{resources_8hpp_aaf78cb490f07150f95154e6a8c907436a4642e767f9251fa40afadbc963f80b7a}{ResourceCategory::Movement}}>(task\_pool);}
\DoxyCodeLine{359 }
\DoxyCodeLine{360     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}}) \{}
\DoxyCodeLine{361       \textcolor{keywordflow}{break};}
\DoxyCodeLine{362     \}}
\DoxyCodeLine{363   \}}
\DoxyCodeLine{364   \textcolor{keywordflow}{return} \mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}};}
\DoxyCodeLine{365 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classRuntimeReserver_a9141b37fda4d023dc667b37dd3e5d360}\label{classRuntimeReserver_a9141b37fda4d023dc667b37dd3e5d360}} 
\index{RuntimeReserver@{RuntimeReserver}!check\_resources@{check\_resources}}
\index{check\_resources@{check\_resources}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{check\_resources()}{check\_resources()}}
{\footnotesize\ttfamily bool Runtime\+Reserver\+::check\+\_\+resources (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$}]{task }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Check if the Non\+Persistent\+Resources are available for a Compute\+Task. 



Definition at line 334 of file phases.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{334                                                      \{}
\DoxyCodeLine{335   \textcolor{keywordtype}{bool} \mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}} = \textcolor{keyword}{true};}
\DoxyCodeLine{336   \textcolor{keywordflow}{for} (\mbox{\hyperlink{classDevice}{Device}} *device : \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}-\/>assigned\_devices) \{}
\DoxyCodeLine{337     \mbox{\hyperlink{classResourcePool}{ResourcePool\_t}} \&task\_pool =}
\DoxyCodeLine{338         \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}-\/>device\_constraints[device-\/>\mbox{\hyperlink{classDevice_a7a4beec758f8c827ffce31562ee9ebdb}{get\_global\_id}}()];}
\DoxyCodeLine{339     \mbox{\hyperlink{classResourcePool}{ResourcePool\_t}} \&device\_pool = device-\/>\mbox{\hyperlink{classDevice_a23e7c65c6d833d56755aead8128763b7}{get\_reserved\_pool}}();}
\DoxyCodeLine{340 }
\DoxyCodeLine{341     \mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}} =}
\DoxyCodeLine{342         device\_pool.\mbox{\hyperlink{classResourcePool_a6e6f954ecbf68bc7039b1a6826664f76}{check\_greater}}<\mbox{\hyperlink{resources_8hpp_aaf78cb490f07150f95154e6a8c907436a7614275fbaf0a47eea0c100334a57d93}{ResourceCategory::NonPersistent}}>(task\_pool);}
\DoxyCodeLine{343 }
\DoxyCodeLine{344     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}}) \{}
\DoxyCodeLine{345       \textcolor{keywordflow}{break};}
\DoxyCodeLine{346     \}}
\DoxyCodeLine{347   \}}
\DoxyCodeLine{348   \textcolor{keywordflow}{return} \mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}};}
\DoxyCodeLine{349 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classRuntimeReserver_aeab29f38dfdcc8f13fd839bf2629d1f5}\label{classRuntimeReserver_aeab29f38dfdcc8f13fd839bf2629d1f5}} 
\index{RuntimeReserver@{RuntimeReserver}!enqueue@{enqueue}}
\index{enqueue@{enqueue}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{enqueue()}{enqueue()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Runtime\+Reserver\+::enqueue (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$}]{task }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Enqueue a task to the phase. 



Implements \mbox{\hyperlink{classSchedulerPhase_ab728fba49a9d47d0baa1694df9debb92}{Scheduler\+Phase}}.



Definition at line 302 of file phases.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{302                                              \{}
\DoxyCodeLine{303   \textcolor{keywordtype}{bool} is\_data\_task = \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}-\/>is\_data\_task();}
\DoxyCodeLine{304   \textcolor{keywordflow}{if} (!is\_data\_task) \{}
\DoxyCodeLine{305     \textcolor{comment}{// std::cout << "{}RuntimeReserver::enqueue: compute task"{} << std::endl;}}
\DoxyCodeLine{306     this-\/>\mbox{\hyperlink{classRuntimeReserver_a269183fa13c16d2adb545b40513ba63f}{runnable\_tasks}}-\/>enqueue(task);}
\DoxyCodeLine{307   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{308     \textcolor{comment}{// std::cout << "{}RuntimeReserver::enqueue: data task"{} << std::endl;}}
\DoxyCodeLine{309     this-\/>\mbox{\hyperlink{classRuntimeReserver_ab211d363620de722f107f93f8509edbb}{movement\_tasks}}-\/>enqueue(task);}
\DoxyCodeLine{310   \}}
\DoxyCodeLine{311 \}}

\end{DoxyCode}


Referenced by Inner\+Scheduler\+::enqueue\+\_\+task().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classRuntimeReserver_aeab29f38dfdcc8f13fd839bf2629d1f5_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classRuntimeReserver_a2a24f89c881efa2bb6a99b85372c857f}\label{classRuntimeReserver_a2a24f89c881efa2bb6a99b85372c857f}} 
\index{RuntimeReserver@{RuntimeReserver}!enqueue@{enqueue}}
\index{enqueue@{enqueue}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{enqueue()}{enqueue()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Runtime\+Reserver\+::enqueue (\begin{DoxyParamCaption}\item[{std\+::vector$<$ \mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$ $>$ \&}]{tasks }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Enqueue a vector of tasks to the phase. 



Implements \mbox{\hyperlink{classSchedulerPhase_a61e9e3138f4eb16579cde472887e9255}{Scheduler\+Phase}}.



Definition at line 313 of file phases.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{313                                                            \{}
\DoxyCodeLine{314   \textcolor{keywordflow}{for} (\mbox{\hyperlink{classInnerTask}{InnerTask}} *\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}} : \mbox{\hyperlink{namespaceparla_1_1cython_1_1tasks_ad0d88a7d8f89ecf110a042149d853fb4}{tasks}}) \{}
\DoxyCodeLine{315     this-\/>\mbox{\hyperlink{classRuntimeReserver_aeab29f38dfdcc8f13fd839bf2629d1f5}{enqueue}}(\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}});}
\DoxyCodeLine{316   \}}
\DoxyCodeLine{317 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classRuntimeReserver_a460572d7aa2a6456eebf4ceb2925f490}\label{classRuntimeReserver_a460572d7aa2a6456eebf4ceb2925f490}} 
\index{RuntimeReserver@{RuntimeReserver}!get\_compute\_count@{get\_compute\_count}}
\index{get\_compute\_count@{get\_compute\_count}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{get\_compute\_count()}{get\_compute\_count()}}
{\footnotesize\ttfamily size\+\_\+t Runtime\+Reserver\+::get\+\_\+compute\+\_\+count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 319 of file phases.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{319                                           \{}
\DoxyCodeLine{320   \textcolor{keywordtype}{size\_t} count = this-\/>\mbox{\hyperlink{classRuntimeReserver_a269183fa13c16d2adb545b40513ba63f}{runnable\_tasks}}-\/>size();}
\DoxyCodeLine{321   \textcolor{keywordflow}{return} count;}
\DoxyCodeLine{322 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classRuntimeReserver_a23475509344951f743f48f6239eda1bf}\label{classRuntimeReserver_a23475509344951f743f48f6239eda1bf}} 
\index{RuntimeReserver@{RuntimeReserver}!get\_count@{get\_count}}
\index{get\_count@{get\_count}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{get\_count()}{get\_count()}}
{\footnotesize\ttfamily size\+\_\+t Runtime\+Reserver\+::get\+\_\+count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Get the number of tasks enqueued (and waiting) in the phase. 



Implements \mbox{\hyperlink{classSchedulerPhase_a0d81d78469a09647970acdc42244e79e}{Scheduler\+Phase}}.



Definition at line 329 of file phases.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{329                                   \{}
\DoxyCodeLine{330   \textcolor{keywordtype}{size\_t} count = this-\/>\mbox{\hyperlink{classRuntimeReserver_a460572d7aa2a6456eebf4ceb2925f490}{get\_compute\_count}}() + this-\/>\mbox{\hyperlink{classRuntimeReserver_a83c31b744b15ab80ab321a6350fd239b}{get\_movement\_count}}();}
\DoxyCodeLine{331   \textcolor{keywordflow}{return} count;}
\DoxyCodeLine{332 \}}

\end{DoxyCode}


Referenced by Inner\+Scheduler\+::get\+\_\+num\+\_\+ready\+\_\+tasks().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classRuntimeReserver_a23475509344951f743f48f6239eda1bf_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classRuntimeReserver_a83c31b744b15ab80ab321a6350fd239b}\label{classRuntimeReserver_a83c31b744b15ab80ab321a6350fd239b}} 
\index{RuntimeReserver@{RuntimeReserver}!get\_movement\_count@{get\_movement\_count}}
\index{get\_movement\_count@{get\_movement\_count}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{get\_movement\_count()}{get\_movement\_count()}}
{\footnotesize\ttfamily size\+\_\+t Runtime\+Reserver\+::get\+\_\+movement\+\_\+count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 324 of file phases.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{324                                            \{}
\DoxyCodeLine{325   \textcolor{keywordtype}{size\_t} count = this-\/>\mbox{\hyperlink{classRuntimeReserver_ab211d363620de722f107f93f8509edbb}{movement\_tasks}}-\/>size();}
\DoxyCodeLine{326   \textcolor{keywordflow}{return} count;}
\DoxyCodeLine{327 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classRuntimeReserver_a1dd76466598e88d445e65b7476c2b219}\label{classRuntimeReserver_a1dd76466598e88d445e65b7476c2b219}} 
\index{RuntimeReserver@{RuntimeReserver}!get\_name@{get\_name}}
\index{get\_name@{get\_name}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{get\_name()}{get\_name()}}
{\footnotesize\ttfamily const std\+::string\& Runtime\+Reserver\+::get\+\_\+name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 311 of file phases.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{311 \{ \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classRuntimeReserver_a7e83c60e6ce668d4e0b77525285aaa52}{name}}; \}}

\end{DoxyCode}


Referenced by parla.\+cython.\+device\+\_\+manager.\+Printable\+Frozen\+Set\+::\+\_\+\+\_\+repr\+\_\+\+\_\+().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classRuntimeReserver_a1dd76466598e88d445e65b7476c2b219_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classRuntimeReserver_a0c4bc6f366850fdadca4122fb41c92f4}\label{classRuntimeReserver_a0c4bc6f366850fdadca4122fb41c92f4}} 
\index{RuntimeReserver@{RuntimeReserver}!get\_status@{get\_status}}
\index{get\_status@{get\_status}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{get\_status()}{get\_status()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classRuntimeReserverStatus}{Runtime\+Reserver\+Status}}\& Runtime\+Reserver\+::get\+\_\+status (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 312 of file phases.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{312 \{ \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{classRuntimeReserver_a116cb18c93999e9af1d88d1023845614}\label{classRuntimeReserver_a116cb18c93999e9af1d88d1023845614}} 
\index{RuntimeReserver@{RuntimeReserver}!print\_status@{print\_status}}
\index{print\_status@{print\_status}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{print\_status()}{print\_status()}}
{\footnotesize\ttfamily const void Runtime\+Reserver\+::print\+\_\+status (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 313 of file phases.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{313 \{ this-\/>\mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}}.\mbox{\hyperlink{classPhaseStatus_aa9a8d493b93ec4bbd6e87f20096dfd5e}{print}}(); \}}

\end{DoxyCode}
\mbox{\Hypertarget{classRuntimeReserver_a38fd597058f02ff8641dd7b332197ca6}\label{classRuntimeReserver_a38fd597058f02ff8641dd7b332197ca6}} 
\index{RuntimeReserver@{RuntimeReserver}!reserve\_data\_resources@{reserve\_data\_resources}}
\index{reserve\_data\_resources@{reserve\_data\_resources}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{reserve\_data\_resources()}{reserve\_data\_resources()}}
{\footnotesize\ttfamily void Runtime\+Reserver\+::reserve\+\_\+data\+\_\+resources (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$}]{task }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Reserve (decrease) the resources for a data movement task (number of copy engines). 



Definition at line 377 of file phases.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{377                                                             \{}
\DoxyCodeLine{378   \textcolor{comment}{// TODO(wlr): Add runtime error check if resource failure}}
\DoxyCodeLine{379   \textcolor{keywordflow}{for} (\mbox{\hyperlink{classDevice}{Device}} *device : \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}-\/>assigned\_devices) \{}
\DoxyCodeLine{380     \mbox{\hyperlink{classResourcePool}{ResourcePool\_t}} \&task\_pool =}
\DoxyCodeLine{381         \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}-\/>device\_constraints[device-\/>\mbox{\hyperlink{classDevice_a7a4beec758f8c827ffce31562ee9ebdb}{get\_global\_id}}()];}
\DoxyCodeLine{382     \mbox{\hyperlink{classResourcePool}{ResourcePool\_t}} \&device\_pool = device-\/>\mbox{\hyperlink{classDevice_a23e7c65c6d833d56755aead8128763b7}{get\_reserved\_pool}}();}
\DoxyCodeLine{383     device\_pool.\mbox{\hyperlink{classResourcePool_aa415c111e9279608cb3a9ca676052a3c}{decrease}}<\mbox{\hyperlink{resources_8hpp_aaf78cb490f07150f95154e6a8c907436a4642e767f9251fa40afadbc963f80b7a}{ResourceCategory::Movement}}>(task\_pool);}
\DoxyCodeLine{384   \}}
\DoxyCodeLine{385 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classRuntimeReserver_a1e712cf575823c28b9fabfca1c3a355c}\label{classRuntimeReserver_a1e712cf575823c28b9fabfca1c3a355c}} 
\index{RuntimeReserver@{RuntimeReserver}!reserve\_resources@{reserve\_resources}}
\index{reserve\_resources@{reserve\_resources}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{reserve\_resources()}{reserve\_resources()}}
{\footnotesize\ttfamily void Runtime\+Reserver\+::reserve\+\_\+resources (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$}]{task }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Reserve (decrease) the Non\+Persistent\+Resources for a Compute\+Task. 



Definition at line 367 of file phases.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{367                                                        \{}
\DoxyCodeLine{368   \textcolor{comment}{// TODO(wlr): Add runtime error check if resource failure}}
\DoxyCodeLine{369   \textcolor{keywordflow}{for} (\mbox{\hyperlink{classDevice}{Device}} *device : \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}-\/>assigned\_devices) \{}
\DoxyCodeLine{370     \mbox{\hyperlink{classResourcePool}{ResourcePool\_t}} \&task\_pool =}
\DoxyCodeLine{371         \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}-\/>device\_constraints[device-\/>\mbox{\hyperlink{classDevice_a7a4beec758f8c827ffce31562ee9ebdb}{get\_global\_id}}()];}
\DoxyCodeLine{372     \mbox{\hyperlink{classResourcePool}{ResourcePool\_t}} \&device\_pool = device-\/>\mbox{\hyperlink{classDevice_a23e7c65c6d833d56755aead8128763b7}{get\_reserved\_pool}}();}
\DoxyCodeLine{373     device\_pool.\mbox{\hyperlink{classResourcePool_aa415c111e9279608cb3a9ca676052a3c}{decrease}}<\mbox{\hyperlink{resources_8hpp_aaf78cb490f07150f95154e6a8c907436a7614275fbaf0a47eea0c100334a57d93}{ResourceCategory::NonPersistent}}>(task\_pool);}
\DoxyCodeLine{374   \}}
\DoxyCodeLine{375 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classRuntimeReserver_aaa9106861bccbc209f7f1fa81defdfd9}\label{classRuntimeReserver_aaa9106861bccbc209f7f1fa81defdfd9}} 
\index{RuntimeReserver@{RuntimeReserver}!run@{run}}
\index{run@{run}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily void Runtime\+Reserver\+::run (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classSchedulerPhase}{Scheduler\+Phase}} $\ast$}]{next\+\_\+phase }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Run the phase. Check tasks in the enqueued buffer, check phase condition, and move tasks to the next phase. 


\begin{DoxyParams}{Parameters}
{\em next\+\_\+phase} & The next phase to move tasks to. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classSchedulerPhase_a23e561996d5bbc884e2701d6966f5670}{Scheduler\+Phase}}.



Definition at line 387 of file phases.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{387                                                     \{}
\DoxyCodeLine{388   \mbox{\hyperlink{profiling_8hpp_a4ed1a04fa9103ac0c29157e53ed53e66}{NVTX\_RANGE}}(\textcolor{stringliteral}{"{}RuntimeReserver::run"{}}, \mbox{\hyperlink{profiling_8hpp_a166725049865b4af08e946c886ebe327}{NVTX\_COLOR\_LIGHT\_GREEN}})}
\DoxyCodeLine{389 }
\DoxyCodeLine{390   \textcolor{comment}{// std::cout << "{}RuntimeReserver::run"{} << std::endl;}}
\DoxyCodeLine{391 }
\DoxyCodeLine{392   \mbox{\hyperlink{classLauncher}{Launcher}} *launcher = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{classLauncher}{Launcher}} *\textcolor{keyword}{>}(next\_phase);}
\DoxyCodeLine{393 }
\DoxyCodeLine{394   \textcolor{comment}{// Only one thread can reserve runtime resources at a time.}}
\DoxyCodeLine{395   \textcolor{comment}{// Useful for a multi-\/threaded scheduler. Not needed for a single-\/threaded.}}
\DoxyCodeLine{396   \textcolor{comment}{// std::unique\_lock<std::mutex> lock(this-\/>mtx);}}
\DoxyCodeLine{397 }
\DoxyCodeLine{398   \textcolor{comment}{// Try to launch as many compute tasks as possible}}
\DoxyCodeLine{399   \textcolor{keywordtype}{int} fail\_count = 0;}
\DoxyCodeLine{400   \textcolor{keywordtype}{int} max\_fail = this-\/>\mbox{\hyperlink{classRuntimeReserver_a269183fa13c16d2adb545b40513ba63f}{runnable\_tasks}}-\/>get\_num\_devices() * 2;}
\DoxyCodeLine{401   \textcolor{keywordtype}{bool} has\_task = \textcolor{keyword}{true};}
\DoxyCodeLine{402   \textcolor{keywordtype}{int} num\_tasks = 0;}
\DoxyCodeLine{403   \textcolor{keywordflow}{while} (has\_task \&\& (fail\_count < max\_fail)) \{}
\DoxyCodeLine{404     num\_tasks = this-\/>\mbox{\hyperlink{classRuntimeReserver_a460572d7aa2a6456eebf4ceb2925f490}{get\_compute\_count}}();}
\DoxyCodeLine{405     has\_task = num\_tasks > 0;}
\DoxyCodeLine{406     \textcolor{keywordflow}{if} (has\_task) \{}
\DoxyCodeLine{407       \mbox{\hyperlink{classInnerTask}{InnerTask}} *\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}} = this-\/>\mbox{\hyperlink{classRuntimeReserver_a269183fa13c16d2adb545b40513ba63f}{runnable\_tasks}}-\/>front();}
\DoxyCodeLine{408       \textcolor{keywordtype}{bool} has\_resources = \mbox{\hyperlink{classRuntimeReserver_a9141b37fda4d023dc667b37dd3e5d360}{check\_resources}}(\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}});}
\DoxyCodeLine{409       \textcolor{keywordflow}{if} (has\_resources) \{}
\DoxyCodeLine{410         \textcolor{keywordtype}{bool} has\_thread = \mbox{\hyperlink{classSchedulerPhase_a5b1a4e7a44cc2162e50cded7bba4376f}{scheduler}}-\/>\mbox{\hyperlink{classInnerScheduler_acdcdea945f320f24fad6ad5215639383}{workers}}.\mbox{\hyperlink{classWorkerPool_a2ea04b6bae890acb1f93492938b3a090}{get\_num\_available\_workers}}() > 0;}
\DoxyCodeLine{411         \textcolor{keywordflow}{if} (has\_thread) \{}
\DoxyCodeLine{412           \mbox{\hyperlink{classInnerTask}{InnerTask}} *\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}} = this-\/>\mbox{\hyperlink{classRuntimeReserver_a269183fa13c16d2adb545b40513ba63f}{runnable\_tasks}}-\/>pop();}
\DoxyCodeLine{413           \mbox{\hyperlink{classInnerWorker}{InnerWorker}} *\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a8368535304ebfdbd53c01c50f851dbc6}{worker}} = \mbox{\hyperlink{classSchedulerPhase_a5b1a4e7a44cc2162e50cded7bba4376f}{scheduler}}-\/>\mbox{\hyperlink{classInnerScheduler_acdcdea945f320f24fad6ad5215639383}{workers}}.\mbox{\hyperlink{classWorkerPool_a32fc0a83d2e24e5df16c2376ef99b56e}{dequeue\_worker}}();}
\DoxyCodeLine{414           \textcolor{comment}{// Decrease Resources}}
\DoxyCodeLine{415           this-\/>\mbox{\hyperlink{classRuntimeReserver_a1e712cf575823c28b9fabfca1c3a355c}{reserve\_resources}}(task);}
\DoxyCodeLine{416           launcher-\/>\mbox{\hyperlink{classLauncher_a5b6bdce05738701c16814a95c6562470}{enqueue}}(\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}, \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a8368535304ebfdbd53c01c50f851dbc6}{worker}});}
\DoxyCodeLine{417           this-\/>\mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}}.\mbox{\hyperlink{classPhaseStatus_aa40cb2ab81ff12d592a8212e30ed245b}{increase}}(\mbox{\hyperlink{phases_8hpp_a0de004d8543997b66c544e93f2f3cb91a505a83f220c02df2f85c3810cd9ceb38}{RuntimeReserverState::Success}});}
\DoxyCodeLine{418         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{419           this-\/>\mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}}.\mbox{\hyperlink{classPhaseStatus_aa40cb2ab81ff12d592a8212e30ed245b}{increase}}(\mbox{\hyperlink{phases_8hpp_a0de004d8543997b66c544e93f2f3cb91a028ee8abadc3c9e03645a8af61892cac}{RuntimeReserverState::NoWorker}});}
\DoxyCodeLine{420           fail\_count++; \textcolor{comment}{// += max\_fail;}}
\DoxyCodeLine{421           \textcolor{comment}{// break;        // No more workers available}}
\DoxyCodeLine{422         \}}
\DoxyCodeLine{423       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{424         this-\/>\mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}}.\mbox{\hyperlink{classPhaseStatus_aa40cb2ab81ff12d592a8212e30ed245b}{increase}}(\mbox{\hyperlink{phases_8hpp_a0de004d8543997b66c544e93f2f3cb91a81e124c25b261c366509c30962a4a7fd}{RuntimeReserverState::NoResource}});}
\DoxyCodeLine{425         fail\_count++;}
\DoxyCodeLine{426         \textcolor{comment}{// break; // No more resources available}}
\DoxyCodeLine{427       \}}
\DoxyCodeLine{428     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{429       this-\/>\mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}}.\mbox{\hyperlink{classPhaseStatus_aa40cb2ab81ff12d592a8212e30ed245b}{increase}}(\mbox{\hyperlink{phases_8hpp_a0de004d8543997b66c544e93f2f3cb91af88173c4c7a3b7413a70f00aad943075}{RuntimeReserverState::NoTask}});}
\DoxyCodeLine{430       fail\_count++; \textcolor{comment}{//+= max\_fail;}}
\DoxyCodeLine{431       \textcolor{comment}{// break;        // No more tasks available}}
\DoxyCodeLine{432     \}}
\DoxyCodeLine{433   \}}
\DoxyCodeLine{434 }
\DoxyCodeLine{435   \textcolor{comment}{// Try to launch as many data movement tasks as possible}}
\DoxyCodeLine{436   has\_task = \textcolor{keyword}{true};}
\DoxyCodeLine{437   num\_tasks = 0;}
\DoxyCodeLine{438   \textcolor{keywordflow}{while} (has\_task) \{}
\DoxyCodeLine{439     num\_tasks = this-\/>\mbox{\hyperlink{classRuntimeReserver_a83c31b744b15ab80ab321a6350fd239b}{get\_movement\_count}}();}
\DoxyCodeLine{440     \textcolor{comment}{// std::cout << "{}RuntimeReserver::run: num movement tasks: "{} << num\_tasks}}
\DoxyCodeLine{441     \textcolor{comment}{//           << std::endl;}}
\DoxyCodeLine{442     has\_task = num\_tasks > 0;}
\DoxyCodeLine{443     \textcolor{keywordflow}{if} (has\_task) \{}
\DoxyCodeLine{444       \mbox{\hyperlink{classInnerTask}{InnerTask}} *\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}} = this-\/>\mbox{\hyperlink{classRuntimeReserver_ab211d363620de722f107f93f8509edbb}{movement\_tasks}}-\/>front();}
\DoxyCodeLine{445       \textcolor{keywordtype}{bool} has\_resources = \mbox{\hyperlink{classRuntimeReserver_a422470bf67f4cb6b057c30baac9fb0fb}{check\_data\_resources}}(\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}});}
\DoxyCodeLine{446       \textcolor{keywordflow}{if} (has\_resources) \{}
\DoxyCodeLine{447         \textcolor{keywordtype}{bool} has\_thread = \mbox{\hyperlink{classSchedulerPhase_a5b1a4e7a44cc2162e50cded7bba4376f}{scheduler}}-\/>\mbox{\hyperlink{classInnerScheduler_acdcdea945f320f24fad6ad5215639383}{workers}}.\mbox{\hyperlink{classWorkerPool_a2ea04b6bae890acb1f93492938b3a090}{get\_num\_available\_workers}}() > 0;}
\DoxyCodeLine{448         \textcolor{keywordflow}{if} (has\_thread) \{}
\DoxyCodeLine{449           \mbox{\hyperlink{classInnerTask}{InnerTask}} *\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}} = this-\/>\mbox{\hyperlink{classRuntimeReserver_ab211d363620de722f107f93f8509edbb}{movement\_tasks}}-\/>pop();}
\DoxyCodeLine{450           \mbox{\hyperlink{classInnerWorker}{InnerWorker}} *\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a8368535304ebfdbd53c01c50f851dbc6}{worker}} = \mbox{\hyperlink{classSchedulerPhase_a5b1a4e7a44cc2162e50cded7bba4376f}{scheduler}}-\/>\mbox{\hyperlink{classInnerScheduler_acdcdea945f320f24fad6ad5215639383}{workers}}.\mbox{\hyperlink{classWorkerPool_a32fc0a83d2e24e5df16c2376ef99b56e}{dequeue\_worker}}();}
\DoxyCodeLine{451           \textcolor{comment}{// Decrease Resources}}
\DoxyCodeLine{452           this-\/>\mbox{\hyperlink{classRuntimeReserver_a38fd597058f02ff8641dd7b332197ca6}{reserve\_data\_resources}}(task);}
\DoxyCodeLine{453           launcher-\/>\mbox{\hyperlink{classLauncher_a5b6bdce05738701c16814a95c6562470}{enqueue}}(\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}, \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a8368535304ebfdbd53c01c50f851dbc6}{worker}});}
\DoxyCodeLine{454           this-\/>\mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}}.\mbox{\hyperlink{classPhaseStatus_aa40cb2ab81ff12d592a8212e30ed245b}{increase}}(\mbox{\hyperlink{phases_8hpp_a0de004d8543997b66c544e93f2f3cb91a505a83f220c02df2f85c3810cd9ceb38}{RuntimeReserverState::Success}});}
\DoxyCodeLine{455         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{456           this-\/>\mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}}.\mbox{\hyperlink{classPhaseStatus_aa40cb2ab81ff12d592a8212e30ed245b}{increase}}(\mbox{\hyperlink{phases_8hpp_a0de004d8543997b66c544e93f2f3cb91a028ee8abadc3c9e03645a8af61892cac}{RuntimeReserverState::NoWorker}});}
\DoxyCodeLine{457           \textcolor{keywordflow}{break}; \textcolor{comment}{// No more workers available}}
\DoxyCodeLine{458         \}}
\DoxyCodeLine{459       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{460         this-\/>\mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}}.\mbox{\hyperlink{classPhaseStatus_aa40cb2ab81ff12d592a8212e30ed245b}{increase}}(\mbox{\hyperlink{phases_8hpp_a0de004d8543997b66c544e93f2f3cb91a81e124c25b261c366509c30962a4a7fd}{RuntimeReserverState::NoResource}});}
\DoxyCodeLine{461         \textcolor{keywordflow}{break}; \textcolor{comment}{// No more resources available}}
\DoxyCodeLine{462       \}}
\DoxyCodeLine{463     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{464       this-\/>\mbox{\hyperlink{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}{status}}.\mbox{\hyperlink{classPhaseStatus_aa40cb2ab81ff12d592a8212e30ed245b}{increase}}(\mbox{\hyperlink{phases_8hpp_a0de004d8543997b66c544e93f2f3cb91af88173c4c7a3b7413a70f00aad943075}{RuntimeReserverState::NoTask}});}
\DoxyCodeLine{465       \textcolor{keywordflow}{break}; \textcolor{comment}{// No more tasks available}}
\DoxyCodeLine{466     \}}
\DoxyCodeLine{467   \}}
\DoxyCodeLine{468 \}}

\end{DoxyCode}


Referenced by Inner\+Scheduler\+::activate().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classRuntimeReserver_aaa9106861bccbc209f7f1fa81defdfd9_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classRuntimeReserver_aaf4cf5e16c01330afbfe4a1490d7f7f1}\label{classRuntimeReserver_aaf4cf5e16c01330afbfe4a1490d7f7f1}} 
\index{RuntimeReserver@{RuntimeReserver}!launchable\_tasks\_buffer@{launchable\_tasks\_buffer}}
\index{launchable\_tasks\_buffer@{launchable\_tasks\_buffer}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{launchable\_tasks\_buffer}{launchable\_tasks\_buffer}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$$>$ Runtime\+Reserver\+::launchable\+\_\+tasks\+\_\+buffer\hspace{0.3cm}{\ttfamily [protected]}}



The buffer of tasks enqueued (and waiting) in the phase. 



Definition at line 326 of file phases.\+hpp.

\mbox{\Hypertarget{classRuntimeReserver_ab211d363620de722f107f93f8509edbb}\label{classRuntimeReserver_ab211d363620de722f107f93f8509edbb}} 
\index{RuntimeReserver@{RuntimeReserver}!movement\_tasks@{movement\_tasks}}
\index{movement\_tasks@{movement\_tasks}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{movement\_tasks}{movement\_tasks}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classPhaseManager}{Phase\+Manager}}$<$\mbox{\hyperlink{resources_8hpp_aaf78cb490f07150f95154e6a8c907436a4642e767f9251fa40afadbc963f80b7a}{Resource\+Category\+::\+Movement}}$>$ $>$ Runtime\+Reserver\+::movement\+\_\+tasks\hspace{0.3cm}{\ttfamily [protected]}}



The multidevice queues for data movement tasks. 



Definition at line 319 of file phases.\+hpp.

\mbox{\Hypertarget{classRuntimeReserver_a7e83c60e6ce668d4e0b77525285aaa52}\label{classRuntimeReserver_a7e83c60e6ce668d4e0b77525285aaa52}} 
\index{RuntimeReserver@{RuntimeReserver}!name@{name}}
\index{name@{name}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{name}{name}}
{\footnotesize\ttfamily const std\+::string Runtime\+Reserver\+::name \{\char`\"{}Runtime Reserver\char`\"{}\}\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [protected]}}



The name of the phase. Used for debugging and tracing. 



Definition at line 322 of file phases.\+hpp.



Referenced by parla.\+cython.\+tasks.\+Task\+::\+\_\+\+\_\+hash\+\_\+\+\_\+(), parla.\+cython.\+tasks.\+Task\+::get\+\_\+name(), parla.\+cython.\+tasks.\+Task\+::unpack\+\_\+name(), and parla.\+cython.\+tasks.\+Task\+::update\+\_\+name().

\mbox{\Hypertarget{classRuntimeReserver_a269183fa13c16d2adb545b40513ba63f}\label{classRuntimeReserver_a269183fa13c16d2adb545b40513ba63f}} 
\index{RuntimeReserver@{RuntimeReserver}!runnable\_tasks@{runnable\_tasks}}
\index{runnable\_tasks@{runnable\_tasks}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{runnable\_tasks}{runnable\_tasks}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classPhaseManager}{Phase\+Manager}}$<$\mbox{\hyperlink{resources_8hpp_aaf78cb490f07150f95154e6a8c907436a7614275fbaf0a47eea0c100334a57d93}{Resource\+Category\+::\+Non\+Persistent}}$>$ $>$ Runtime\+Reserver\+::runnable\+\_\+tasks\hspace{0.3cm}{\ttfamily [protected]}}



The multidevice queues for compute tasks. 



Definition at line 317 of file phases.\+hpp.

\mbox{\Hypertarget{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}\label{classRuntimeReserver_adfbc44e6a66a196d749aba6fe74f017a}} 
\index{RuntimeReserver@{RuntimeReserver}!status@{status}}
\index{status@{status}!RuntimeReserver@{RuntimeReserver}}
\doxysubsubsection{\texorpdfstring{status}{status}}
{\footnotesize\ttfamily \mbox{\hyperlink{classRuntimeReserverStatus}{Runtime\+Reserver\+Status}} Runtime\+Reserver\+::status \{\mbox{\hyperlink{classRuntimeReserver_a7e83c60e6ce668d4e0b77525285aaa52}{name}}\}\hspace{0.3cm}{\ttfamily [protected]}}



The status of the phase. Used for debugging and tracing. 



Definition at line 324 of file phases.\+hpp.



Referenced by parla.\+cython.\+scheduler.\+Worker\+Thread\+::run().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/c/backend/include/\mbox{\hyperlink{phases_8hpp}{phases.\+hpp}}\item 
src/c/backend/\mbox{\hyperlink{phases_8cpp}{phases.\+cpp}}\end{DoxyCompactItemize}
