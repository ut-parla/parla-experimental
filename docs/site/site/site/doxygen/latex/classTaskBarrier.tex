\hypertarget{classTaskBarrier}{}\doxysection{Task\+Barrier Class Reference}
\label{classTaskBarrier}\index{TaskBarrier@{TaskBarrier}}


The C++ \char`\"{}\+Mirror\char`\"{} of Parla\textquotesingle{}s Python Task\+Sets \& Spaces They are used as barriers for the calling thread for the completion of their members.  




{\ttfamily \#include $<$runtime.\+hpp$>$}



Inheritance diagram for Task\+Barrier\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=172pt]{classTaskBarrier__inherit__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classTaskBarrier_a51825ce31aa4c2ae98615651ad3cdcfb}{Task\+Barrier}} ()=default
\item 
\mbox{\hyperlink{classTaskBarrier_a2bf456b7458c829750705c5cf3f34829}{Task\+Barrier}} (int num\+\_\+tasks)
\item 
\mbox{\hyperlink{namespaceTask_afa88d99eb2a58c8f078a53f1195c53a8}{Task\+::\+State}} \mbox{\hyperlink{classTaskBarrier_aeef18e60ab6d1bf2e6b970a5e4493e1a}{\+\_\+add\+\_\+task}} (\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$task)
\item 
void \mbox{\hyperlink{classTaskBarrier_a8b07b88250c671ec0e7de6a378014e74}{add\+\_\+task}} (\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$task)
\item 
void \mbox{\hyperlink{classTaskBarrier_a67451be979de6590af0487c2030403de}{add\+\_\+tasks}} (std\+::vector$<$ \mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$ $>$ \&tasks)
\item 
void \mbox{\hyperlink{classTaskBarrier_ac1726391519835074e14d30d43c47e94}{set\+\_\+id}} (int64\+\_\+t \mbox{\hyperlink{classTaskBarrier_a7b04a1464bbbaa040eea8e1442c72dd9}{id}})
\item 
void \mbox{\hyperlink{classTaskBarrier_ae1c64de1a23fc048a95f61ff7cb102e5}{wait}} ()
\item 
void \mbox{\hyperlink{classTaskBarrier_aa1bd621360c4b81af231890dc886f3f2}{notify}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::mutex \mbox{\hyperlink{classTaskBarrier_ab19e4ad8f83ddf5e018fe0ffeb53cb18}{mtx}}
\item 
std\+::condition\+\_\+variable \mbox{\hyperlink{classTaskBarrier_adf54f3cc80622304cff28108a6620054}{cv}}
\item 
int64\+\_\+t \mbox{\hyperlink{classTaskBarrier_a7b04a1464bbbaa040eea8e1442c72dd9}{id}}
\item 
std\+::atomic$<$ int $>$ \mbox{\hyperlink{classTaskBarrier_a8dd71f06b5133ecdf9d83c74b30c8cbb}{num\+\_\+incomplete\+\_\+tasks}} \{0\}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The C++ \char`\"{}\+Mirror\char`\"{} of Parla\textquotesingle{}s Python Task\+Sets \& Spaces They are used as barriers for the calling thread for the completion of their members. 

Definition at line 640 of file runtime.\+hpp.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classTaskBarrier_a51825ce31aa4c2ae98615651ad3cdcfb}\label{classTaskBarrier_a51825ce31aa4c2ae98615651ad3cdcfb}} 
\index{TaskBarrier@{TaskBarrier}!TaskBarrier@{TaskBarrier}}
\index{TaskBarrier@{TaskBarrier}!TaskBarrier@{TaskBarrier}}
\doxysubsubsection{\texorpdfstring{TaskBarrier()}{TaskBarrier()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily Task\+Barrier\+::\+Task\+Barrier (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

\mbox{\Hypertarget{classTaskBarrier_a2bf456b7458c829750705c5cf3f34829}\label{classTaskBarrier_a2bf456b7458c829750705c5cf3f34829}} 
\index{TaskBarrier@{TaskBarrier}!TaskBarrier@{TaskBarrier}}
\index{TaskBarrier@{TaskBarrier}!TaskBarrier@{TaskBarrier}}
\doxysubsubsection{\texorpdfstring{TaskBarrier()}{TaskBarrier()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily Task\+Barrier\+::\+Task\+Barrier (\begin{DoxyParamCaption}\item[{int}]{num\+\_\+tasks }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 655 of file runtime.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{655 : \mbox{\hyperlink{classTaskBarrier_a8dd71f06b5133ecdf9d83c74b30c8cbb}{num\_incomplete\_tasks}}(num\_tasks) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classTaskBarrier_aeef18e60ab6d1bf2e6b970a5e4493e1a}\label{classTaskBarrier_aeef18e60ab6d1bf2e6b970a5e4493e1a}} 
\index{TaskBarrier@{TaskBarrier}!\_add\_task@{\_add\_task}}
\index{\_add\_task@{\_add\_task}!TaskBarrier@{TaskBarrier}}
\doxysubsubsection{\texorpdfstring{\_add\_task()}{\_add\_task()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespaceTask_afa88d99eb2a58c8f078a53f1195c53a8}{Task\+::\+State}} Task\+Barrier\+::\+\_\+add\+\_\+task (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$}]{task }\end{DoxyParamCaption})}



Definition at line 471 of file task.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{471                                                 \{}
\DoxyCodeLine{472   \mbox{\hyperlink{namespaceTask_afa88d99eb2a58c8f078a53f1195c53a8}{Task::State}} dependent\_state = \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}-\/>add\_dependent\_space(\textcolor{keyword}{this});}
\DoxyCodeLine{473 }
\DoxyCodeLine{474   \textcolor{keywordflow}{if} (dependent\_state == \mbox{\hyperlink{namespaceTask_afa88d99eb2a58c8f078a53f1195c53a8a7bc7e7cf51403e1c1bb16e470bad50cd}{Task::COMPLETED}}) \{}
\DoxyCodeLine{475     this-\/>\mbox{\hyperlink{classTaskBarrier_a8dd71f06b5133ecdf9d83c74b30c8cbb}{num\_incomplete\_tasks}}.fetch\_sub(1, std::memory\_order\_relaxed);}
\DoxyCodeLine{476   \}}
\DoxyCodeLine{477 }
\DoxyCodeLine{478   \textcolor{keywordflow}{return} dependent\_state;}
\DoxyCodeLine{479 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classTaskBarrier_a8b07b88250c671ec0e7de6a378014e74}\label{classTaskBarrier_a8b07b88250c671ec0e7de6a378014e74}} 
\index{TaskBarrier@{TaskBarrier}!add\_task@{add\_task}}
\index{add\_task@{add\_task}!TaskBarrier@{TaskBarrier}}
\doxysubsubsection{\texorpdfstring{add\_task()}{add\_task()}}
{\footnotesize\ttfamily void Task\+Barrier\+::add\+\_\+task (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$}]{task }\end{DoxyParamCaption})}



Definition at line 481 of file task.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{481                                           \{}
\DoxyCodeLine{482   \textcolor{comment}{// don't use this}}
\DoxyCodeLine{483   this-\/>\mbox{\hyperlink{classTaskBarrier_a8dd71f06b5133ecdf9d83c74b30c8cbb}{num\_incomplete\_tasks}}.fetch\_add(1, std::memory\_order\_relaxed);}
\DoxyCodeLine{484   this-\/>\mbox{\hyperlink{classTaskBarrier_aeef18e60ab6d1bf2e6b970a5e4493e1a}{\_add\_task}}(task);}
\DoxyCodeLine{485   this-\/>\mbox{\hyperlink{classTaskBarrier_aa1bd621360c4b81af231890dc886f3f2}{notify}}();}
\DoxyCodeLine{486 \}}

\end{DoxyCode}


Referenced by Inner\+Task\+Space\+::add\+\_\+task().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classTaskBarrier_a8b07b88250c671ec0e7de6a378014e74_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classTaskBarrier_a67451be979de6590af0487c2030403de}\label{classTaskBarrier_a67451be979de6590af0487c2030403de}} 
\index{TaskBarrier@{TaskBarrier}!add\_tasks@{add\_tasks}}
\index{add\_tasks@{add\_tasks}!TaskBarrier@{TaskBarrier}}
\doxysubsubsection{\texorpdfstring{add\_tasks()}{add\_tasks()}}
{\footnotesize\ttfamily void Task\+Barrier\+::add\+\_\+tasks (\begin{DoxyParamCaption}\item[{std\+::vector$<$ \mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$ $>$ \&}]{tasks }\end{DoxyParamCaption})}



Definition at line 488 of file task.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{488                                                          \{}
\DoxyCodeLine{489 }
\DoxyCodeLine{490   this-\/>\mbox{\hyperlink{classTaskBarrier_a8dd71f06b5133ecdf9d83c74b30c8cbb}{num\_incomplete\_tasks}}.fetch\_add(\mbox{\hyperlink{namespaceparla_1_1cython_1_1tasks_ad0d88a7d8f89ecf110a042149d853fb4}{tasks}}.size() + 1,}
\DoxyCodeLine{491                                        std::memory\_order\_relaxed);}
\DoxyCodeLine{492   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}} : \mbox{\hyperlink{namespaceparla_1_1cython_1_1tasks_ad0d88a7d8f89ecf110a042149d853fb4}{tasks}}) \{}
\DoxyCodeLine{493     this-\/>\mbox{\hyperlink{classTaskBarrier_aeef18e60ab6d1bf2e6b970a5e4493e1a}{\_add\_task}}(\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}});}
\DoxyCodeLine{494   \}}
\DoxyCodeLine{495 }
\DoxyCodeLine{496   \textcolor{comment}{// std::cout << "{}TaskBarrier::add\_tasks: "{} <<}}
\DoxyCodeLine{497   \textcolor{comment}{// this-\/>num\_incomplete\_tasks.load()}}
\DoxyCodeLine{498   \textcolor{comment}{//           << std::endl;}}
\DoxyCodeLine{499 }
\DoxyCodeLine{500   this-\/>\mbox{\hyperlink{classTaskBarrier_aa1bd621360c4b81af231890dc886f3f2}{notify}}();}
\DoxyCodeLine{501 \}}

\end{DoxyCode}


Referenced by parla.\+cython.\+core.\+Py\+Task\+Barrier\+::\+\_\+\+\_\+init\+\_\+\+\_\+().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classTaskBarrier_a67451be979de6590af0487c2030403de_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classTaskBarrier_aa1bd621360c4b81af231890dc886f3f2}\label{classTaskBarrier_aa1bd621360c4b81af231890dc886f3f2}} 
\index{TaskBarrier@{TaskBarrier}!notify@{notify}}
\index{notify@{notify}!TaskBarrier@{TaskBarrier}}
\doxysubsubsection{\texorpdfstring{notify()}{notify()}}
{\footnotesize\ttfamily void Task\+Barrier\+::notify (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 668 of file runtime.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{668                 \{}
\DoxyCodeLine{669     std::unique\_lock<std::mutex> lck(\mbox{\hyperlink{classTaskBarrier_ab19e4ad8f83ddf5e018fe0ffeb53cb18}{mtx}});}
\DoxyCodeLine{670     \textcolor{keywordtype}{int} prev = this-\/>\mbox{\hyperlink{classTaskBarrier_a8dd71f06b5133ecdf9d83c74b30c8cbb}{num\_incomplete\_tasks}}.fetch\_sub(1);}
\DoxyCodeLine{671     \textcolor{keywordflow}{if} (prev == 1) \{}
\DoxyCodeLine{672       \mbox{\hyperlink{classTaskBarrier_adf54f3cc80622304cff28108a6620054}{cv}}.notify\_all();}
\DoxyCodeLine{673     \}}
\DoxyCodeLine{674   \}}

\end{DoxyCode}


Referenced by Inner\+Task\+Space\+::notify().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=347pt]{classTaskBarrier_aa1bd621360c4b81af231890dc886f3f2_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classTaskBarrier_ac1726391519835074e14d30d43c47e94}\label{classTaskBarrier_ac1726391519835074e14d30d43c47e94}} 
\index{TaskBarrier@{TaskBarrier}!set\_id@{set\_id}}
\index{set\_id@{set\_id}!TaskBarrier@{TaskBarrier}}
\doxysubsubsection{\texorpdfstring{set\_id()}{set\_id()}}
{\footnotesize\ttfamily void Task\+Barrier\+::set\+\_\+id (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 660 of file runtime.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{660 \{ this-\/>\textcolor{keywordtype}{id} = \mbox{\hyperlink{classTaskBarrier_a7b04a1464bbbaa040eea8e1442c72dd9}{id}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{classTaskBarrier_ae1c64de1a23fc048a95f61ff7cb102e5}\label{classTaskBarrier_ae1c64de1a23fc048a95f61ff7cb102e5}} 
\index{TaskBarrier@{TaskBarrier}!wait@{wait}}
\index{wait@{wait}!TaskBarrier@{TaskBarrier}}
\doxysubsubsection{\texorpdfstring{wait()}{wait()}}
{\footnotesize\ttfamily void Task\+Barrier\+::wait (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 662 of file runtime.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{662               \{}
\DoxyCodeLine{663     \textcolor{comment}{// std::cout << "{}Barrier Wait"{} << std::endl;}}
\DoxyCodeLine{664     std::unique\_lock<std::mutex> lck(\mbox{\hyperlink{classTaskBarrier_ab19e4ad8f83ddf5e018fe0ffeb53cb18}{mtx}});}
\DoxyCodeLine{665     \mbox{\hyperlink{classTaskBarrier_adf54f3cc80622304cff28108a6620054}{cv}}.wait(lck, [\textcolor{keyword}{this}] \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classTaskBarrier_a8dd71f06b5133ecdf9d83c74b30c8cbb}{num\_incomplete\_tasks}} == 0; \});}
\DoxyCodeLine{666   \}}

\end{DoxyCode}


Referenced by Inner\+Task\+Space\+::wait().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=333pt]{classTaskBarrier_ae1c64de1a23fc048a95f61ff7cb102e5_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classTaskBarrier_adf54f3cc80622304cff28108a6620054}\label{classTaskBarrier_adf54f3cc80622304cff28108a6620054}} 
\index{TaskBarrier@{TaskBarrier}!cv@{cv}}
\index{cv@{cv}!TaskBarrier@{TaskBarrier}}
\doxysubsubsection{\texorpdfstring{cv}{cv}}
{\footnotesize\ttfamily std\+::condition\+\_\+variable Task\+Barrier\+::cv}



Definition at line 648 of file runtime.\+hpp.

\mbox{\Hypertarget{classTaskBarrier_a7b04a1464bbbaa040eea8e1442c72dd9}\label{classTaskBarrier_a7b04a1464bbbaa040eea8e1442c72dd9}} 
\index{TaskBarrier@{TaskBarrier}!id@{id}}
\index{id@{id}!TaskBarrier@{TaskBarrier}}
\doxysubsubsection{\texorpdfstring{id}{id}}
{\footnotesize\ttfamily int64\+\_\+t Task\+Barrier\+::id}



Definition at line 649 of file runtime.\+hpp.

\mbox{\Hypertarget{classTaskBarrier_ab19e4ad8f83ddf5e018fe0ffeb53cb18}\label{classTaskBarrier_ab19e4ad8f83ddf5e018fe0ffeb53cb18}} 
\index{TaskBarrier@{TaskBarrier}!mtx@{mtx}}
\index{mtx@{mtx}!TaskBarrier@{TaskBarrier}}
\doxysubsubsection{\texorpdfstring{mtx}{mtx}}
{\footnotesize\ttfamily std\+::mutex Task\+Barrier\+::mtx}



Definition at line 647 of file runtime.\+hpp.

\mbox{\Hypertarget{classTaskBarrier_a8dd71f06b5133ecdf9d83c74b30c8cbb}\label{classTaskBarrier_a8dd71f06b5133ecdf9d83c74b30c8cbb}} 
\index{TaskBarrier@{TaskBarrier}!num\_incomplete\_tasks@{num\_incomplete\_tasks}}
\index{num\_incomplete\_tasks@{num\_incomplete\_tasks}!TaskBarrier@{TaskBarrier}}
\doxysubsubsection{\texorpdfstring{num\_incomplete\_tasks}{num\_incomplete\_tasks}}
{\footnotesize\ttfamily std\+::atomic$<$int$>$ Task\+Barrier\+::num\+\_\+incomplete\+\_\+tasks \{0\}}



Definition at line 651 of file runtime.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/c/backend/include/\mbox{\hyperlink{runtime_8hpp}{runtime.\+hpp}}\item 
src/c/backend/\mbox{\hyperlink{task_8cpp}{task.\+cpp}}\end{DoxyCompactItemize}
