\hypertarget{namespaceparla_1_1utility_1_1graphs}{}\doxysection{parla.\+utility.\+graphs Namespace Reference}
\label{namespaceparla_1_1utility_1_1graphs}\index{parla.utility.graphs@{parla.utility.graphs}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1DeviceType}{Device\+Type}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1LogState}{Log\+State}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1MovementType}{Movement\+Type}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1DataInitType}{Data\+Init\+Type}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskRuntimeInfo}{Task\+Runtime\+Info}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskDataInfo}{Task\+Data\+Info}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1DataInfo}{Data\+Info}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskTime}{Task\+Time}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TimeSample}{Time\+Sample}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskConfig}{Task\+Config}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskConfigs}{Task\+Configs}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1GraphConfig}{Graph\+Config}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1IndependentConfig}{Independent\+Config}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1SerialConfig}{Serial\+Config}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1ReductionConfig}{Reduction\+Config}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1ReductionScatterConfig}{Reduction\+Scatter\+Config}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1RunConfig}{Run\+Config}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]} \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ae1abf0f8056a29df96a56673ddfe8f6a}{convert\+\_\+to\+\_\+dictionary}} (List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]} task\+\_\+list)
\item 
Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]} \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a31de3aa5796ba52c96a31676f5fcfaed}{shuffle\+\_\+tasks}} (Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]} tasks)
\item 
Union\mbox{[}int, Fraction\mbox{]} \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a05f8adea1d435af5369c1ee8df975ffc}{extract}} (str string)
\item 
Tuple\mbox{[}Dict\mbox{[}int, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1DataInfo}{Data\+Info}}\mbox{]}, Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]}\mbox{]} \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ad56d530ed6f726f7f36b624aec7e96d5}{read\+\_\+pgraph}} (str filename)
\item 
int \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a68326b9dfaa2cdc94962da90b2d19f5c}{get\+\_\+time}} (str line)
\item 
int \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a609d97a4399ec9e52333ecc2b4dd7428}{check\+\_\+log\+\_\+line}} (str line)
\item 
\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}} \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ae605dd6b2b3610b8c2e31d34905a063b}{convert\+\_\+task\+\_\+id}} (str task\+\_\+id, int instance=0)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a91464daf4588b93c8f2414815b03f0af}{get\+\_\+task\+\_\+properties}} (str line)
\item 
Tuple\mbox{[}Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskTime}{Task\+Time}}\mbox{]}, Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]}\mbox{]} \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a5176733360f40aa9f08acda45b7371c1}{parse\+\_\+blog}} (str filename=\textquotesingle{}parla.\+blog\textquotesingle{})
\item 
str \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a5f39eb578ed535adc1aaf6732fa9b018}{generate\+\_\+serial\+\_\+graph}} (\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1SerialConfig}{Serial\+Config}} config)
\item 
str \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ab0c7670d2bc11735677b41be708863d0}{generate\+\_\+reduction\+\_\+graph}} (\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1ReductionConfig}{Reduction\+Config}} config)
\item 
str \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a64b229b169c8b31245540d05fa70198f}{generate\+\_\+independent\+\_\+graph}} (\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1IndependentConfig}{Independent\+Config}} config)
\item 
str \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a520c9919c5811c7f167dc9322d688f27}{generate\+\_\+reduction\+\_\+scatter\+\_\+graph}} (\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1ReductionScatterConfig}{Reduction\+Scatter\+Config}} tgraph\+\_\+config)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ac4eb344f9f706421c6ca4559f15967cb}{num\+\_\+gpus}} = 4
\item 
\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a960ebc3be7f47b455783b439a7a884fd}{task\+\_\+filter}} = re.\+compile(r\textquotesingle{}Inner\+Task\textbackslash{}\{ .$\ast$? \textbackslash{}\}\textquotesingle{})
\item 
list \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ae9d9fca669cb92e7995c50e4ae3d8632}{\+\_\+\+\_\+all\+\_\+\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_a609d97a4399ec9e52333ecc2b4dd7428}\label{namespaceparla_1_1utility_1_1graphs_a609d97a4399ec9e52333ecc2b4dd7428}} 
\index{parla.utility.graphs@{parla.utility.graphs}!check\_log\_line@{check\_log\_line}}
\index{check\_log\_line@{check\_log\_line}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{check\_log\_line()}{check\_log\_line()}}
{\footnotesize\ttfamily  int parla.\+utility.\+graphs.\+check\+\_\+log\+\_\+line (\begin{DoxyParamCaption}\item[{str}]{line }\end{DoxyParamCaption})}



Definition at line 435 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{435 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a609d97a4399ec9e52333ecc2b4dd7428}{check\_log\_line}}(line: str) -\/> int:}
\DoxyCodeLine{436     \textcolor{keywordflow}{if} \textcolor{stringliteral}{"{}Running task"{}} \textcolor{keywordflow}{in} line:}
\DoxyCodeLine{437         \textcolor{keywordflow}{return} LogState.START\_TASK}
\DoxyCodeLine{438     \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"{}Notified dependents"{}} \textcolor{keywordflow}{in} line:}
\DoxyCodeLine{439         \textcolor{keywordflow}{return} LogState.NOTIFY\_DEPENDENTS}
\DoxyCodeLine{440     \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"{}Assigned "{}} \textcolor{keywordflow}{in} line:}
\DoxyCodeLine{441         \textcolor{keywordflow}{return} LogState.ASSIGNED\_TASK}
\DoxyCodeLine{442     \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"{}Runahead task"{}} \textcolor{keywordflow}{in} line:}
\DoxyCodeLine{443         \textcolor{keywordflow}{return} LogState.RUNAHEAD\_TASK}
\DoxyCodeLine{444     \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"{}Completed task"{}} \textcolor{keywordflow}{in} line:}
\DoxyCodeLine{445         \textcolor{keywordflow}{return} LogState.COMPLETED\_TASK}
\DoxyCodeLine{446     \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"{}Adding dependencies"{}} \textcolor{keywordflow}{in} line:}
\DoxyCodeLine{447         \textcolor{keywordflow}{return} LogState.ADDING\_DEPENDENCIES}
\DoxyCodeLine{448     \textcolor{keywordflow}{elif} \textcolor{stringliteral}{"{}has constraints"{}} \textcolor{keywordflow}{in} line:}
\DoxyCodeLine{449         \textcolor{keywordflow}{return} LogState.ADD\_CONSTRAINT}
\DoxyCodeLine{450     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{451         \textcolor{keywordflow}{return} LogState.UNKNOWN}
\DoxyCodeLine{452 }
\DoxyCodeLine{453 }

\end{DoxyCode}


Referenced by parla.\+utility.\+graphs.\+parse\+\_\+blog().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1graphs_a609d97a4399ec9e52333ecc2b4dd7428_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_ae605dd6b2b3610b8c2e31d34905a063b}\label{namespaceparla_1_1utility_1_1graphs_ae605dd6b2b3610b8c2e31d34905a063b}} 
\index{parla.utility.graphs@{parla.utility.graphs}!convert\_task\_id@{convert\_task\_id}}
\index{convert\_task\_id@{convert\_task\_id}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{convert\_task\_id()}{convert\_task\_id()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}} parla.\+utility.\+graphs.\+convert\+\_\+task\+\_\+id (\begin{DoxyParamCaption}\item[{str}]{task\+\_\+id,  }\item[{int }]{instance = {\ttfamily 0} }\end{DoxyParamCaption})}



Definition at line 454 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{454 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ae605dd6b2b3610b8c2e31d34905a063b}{convert\_task\_id}}(task\_id: str, instance: int = 0) -\/> TaskID:}
\DoxyCodeLine{455     id = task\_id.strip().split(\textcolor{stringliteral}{'\_'})}
\DoxyCodeLine{456     taskspace = id[0]}
\DoxyCodeLine{457     task\_idx = tuple([int(i) \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} id[1:]])}
\DoxyCodeLine{458     \textcolor{keywordflow}{return} TaskID(taskspace, task\_idx, int(instance))}
\DoxyCodeLine{459 }
\DoxyCodeLine{460 }

\end{DoxyCode}


Referenced by parla.\+utility.\+graphs.\+get\+\_\+task\+\_\+properties().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1graphs_ae605dd6b2b3610b8c2e31d34905a063b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_ae1abf0f8056a29df96a56673ddfe8f6a}\label{namespaceparla_1_1utility_1_1graphs_ae1abf0f8056a29df96a56673ddfe8f6a}} 
\index{parla.utility.graphs@{parla.utility.graphs}!convert\_to\_dictionary@{convert\_to\_dictionary}}
\index{convert\_to\_dictionary@{convert\_to\_dictionary}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{convert\_to\_dictionary()}{convert\_to\_dictionary()}}
{\footnotesize\ttfamily  Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]} parla.\+utility.\+graphs.\+convert\+\_\+to\+\_\+dictionary (\begin{DoxyParamCaption}\item[{List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]}}]{task\+\_\+list }\end{DoxyParamCaption})}

\begin{DoxyVerb}Converts a task list to a task graph dictionary
\end{DoxyVerb}
 

Definition at line 260 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{260 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ae1abf0f8056a29df96a56673ddfe8f6a}{convert\_to\_dictionary}}(task\_list: List[TaskInfo]) -\/> Dict[TaskID, TaskInfo]:}
\DoxyCodeLine{261     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{262 \textcolor{stringliteral}{    Converts a task list to a task graph dictionary}}
\DoxyCodeLine{263 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{264     task\_dict = dict()}
\DoxyCodeLine{265     \textcolor{keywordflow}{for} task \textcolor{keywordflow}{in} task\_list:}
\DoxyCodeLine{266         task\_dict[task.task\_id] = task}
\DoxyCodeLine{267 }
\DoxyCodeLine{268     \textcolor{keywordflow}{return} task\_dict}
\DoxyCodeLine{269 }
\DoxyCodeLine{270 }

\end{DoxyCode}


Referenced by parla.\+utility.\+graphs.\+read\+\_\+pgraph(), and parla.\+utility.\+graphs.\+shuffle\+\_\+tasks().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1graphs_ae1abf0f8056a29df96a56673ddfe8f6a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_a05f8adea1d435af5369c1ee8df975ffc}\label{namespaceparla_1_1utility_1_1graphs_a05f8adea1d435af5369c1ee8df975ffc}} 
\index{parla.utility.graphs@{parla.utility.graphs}!extract@{extract}}
\index{extract@{extract}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{extract()}{extract()}}
{\footnotesize\ttfamily  Union\mbox{[}int, Fraction\mbox{]} parla.\+utility.\+graphs.\+extract (\begin{DoxyParamCaption}\item[{str}]{string }\end{DoxyParamCaption})}

\begin{DoxyVerb}Extracts string as decimal or int
\end{DoxyVerb}
 

Definition at line 280 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{280 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a05f8adea1d435af5369c1ee8df975ffc}{extract}}(string: str) -\/> Union[int, Fraction]:}
\DoxyCodeLine{281     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{282 \textcolor{stringliteral}{    Extracts string as decimal or int}}
\DoxyCodeLine{283 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{284     \textcolor{keywordflow}{if} \textcolor{stringliteral}{"{}."{}} \textcolor{keywordflow}{in} string:}
\DoxyCodeLine{285         \textcolor{keywordflow}{return} Fraction(string)}
\DoxyCodeLine{286     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{287         \textcolor{keywordflow}{return} int(string)}
\DoxyCodeLine{288 }
\DoxyCodeLine{289 }

\end{DoxyCode}


Referenced by parla.\+utility.\+graphs.\+read\+\_\+pgraph().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1graphs_a05f8adea1d435af5369c1ee8df975ffc_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_a64b229b169c8b31245540d05fa70198f}\label{namespaceparla_1_1utility_1_1graphs_a64b229b169c8b31245540d05fa70198f}} 
\index{parla.utility.graphs@{parla.utility.graphs}!generate\_independent\_graph@{generate\_independent\_graph}}
\index{generate\_independent\_graph@{generate\_independent\_graph}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{generate\_independent\_graph()}{generate\_independent\_graph()}}
{\footnotesize\ttfamily  str parla.\+utility.\+graphs.\+generate\+\_\+independent\+\_\+graph (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1IndependentConfig}{Independent\+Config}}}]{config }\end{DoxyParamCaption})}



Definition at line 797 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{797 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a64b229b169c8b31245540d05fa70198f}{generate\_independent\_graph}}(config: IndependentConfig) -\/> str:}
\DoxyCodeLine{798     task\_config = config.task\_config}
\DoxyCodeLine{799     configurations = task\_config.configurations}
\DoxyCodeLine{800     num\_gpus = config.num\_gpus}
\DoxyCodeLine{801 }
\DoxyCodeLine{802     graph = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{803 }
\DoxyCodeLine{804     data\_config\_string = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{805     \textcolor{comment}{\# TODO(hc): for now, assume that data allocation starts from cpu.}}
\DoxyCodeLine{806     \textcolor{keywordflow}{if} config.data\_pattern == DataInitType.NO\_DATA:}
\DoxyCodeLine{807         data\_config\_string = f\textcolor{stringliteral}{"{}\{1 , -\/1\}"{}}}
\DoxyCodeLine{808     \textcolor{keywordflow}{elif} config.data\_pattern == DataInitType.INDEPENDENT\_DATA:}
\DoxyCodeLine{809         single\_data\_block\_size = config.total\_data\_width}
\DoxyCodeLine{810         config.data\_partitions = 64}
\DoxyCodeLine{811         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(config.data\_partitions):}
\DoxyCodeLine{812             data\_config\_string += f\textcolor{stringliteral}{"{}\{single\_data\_block\_size , -\/1\}"{}}}
\DoxyCodeLine{813             \textcolor{keywordflow}{if} i+1 < config.data\_partitions:}
\DoxyCodeLine{814                 data\_config\_string += f\textcolor{stringliteral}{"{} | "{}}}
\DoxyCodeLine{815     \textcolor{keywordflow}{elif} config.data\_pattern == DataInitType.OVERLAPPED\_DATA:}
\DoxyCodeLine{816         \textcolor{keywordflow}{raise} NotImplementedError(}
\DoxyCodeLine{817             \textcolor{stringliteral}{"{}[Independent] Data patterns not implemented"{}})}
\DoxyCodeLine{818     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{819         \textcolor{keywordflow}{raise} ValueError(\textcolor{stringliteral}{"{}[Independent] Data patterns not implemented"{}})}
\DoxyCodeLine{820     data\_config\_string += \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{821 }
\DoxyCodeLine{822     \textcolor{keywordflow}{if} task\_config \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{823         \textcolor{keywordflow}{raise} ValueError(\textcolor{stringliteral}{"{}Task config must be specified"{}})}
\DoxyCodeLine{824 }
\DoxyCodeLine{825     graph += data\_config\_string}
\DoxyCodeLine{826     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(config.task\_count):}
\DoxyCodeLine{827         read\_data\_block = i \% config.data\_partitions}
\DoxyCodeLine{828         configuration\_string = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{829         \textcolor{keywordflow}{for} device\_id, task\_config \textcolor{keywordflow}{in} configurations.items():}
\DoxyCodeLine{830             last\_flag = 1 \textcolor{keywordflow}{if} device\_id == list(}
\DoxyCodeLine{831                 configurations.keys())[-\/1] \textcolor{keywordflow}{else} 0}
\DoxyCodeLine{832             \textcolor{keywordflow}{if} config.fixed\_placement:}
\DoxyCodeLine{833                 device\_id = int(DeviceType.USER\_CHOSEN\_DEVICE + i \% num\_gpus)}
\DoxyCodeLine{834             configuration\_string += f\textcolor{stringliteral}{"{}\{\{ \{device\_id\} : \{task\_config.task\_time\}, \{task\_config.device\_fraction\}, \{task\_config.gil\_accesses\}, \{task\_config.gil\_fraction\}, \{task\_config.memory\} \}\}"{}}}
\DoxyCodeLine{835             \textcolor{keywordflow}{if} last\_flag == 0:}
\DoxyCodeLine{836                 configuration\_string += \textcolor{stringliteral}{"{}, "{}}}
\DoxyCodeLine{837         graph += f\textcolor{stringliteral}{"{}\{i\} |  \{configuration\_string\} | | \{read\_data\_block\} : :\(\backslash\)n"{}}}
\DoxyCodeLine{838     \textcolor{keywordflow}{return} graph}
\DoxyCodeLine{839 }
\DoxyCodeLine{840 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_ab0c7670d2bc11735677b41be708863d0}\label{namespaceparla_1_1utility_1_1graphs_ab0c7670d2bc11735677b41be708863d0}} 
\index{parla.utility.graphs@{parla.utility.graphs}!generate\_reduction\_graph@{generate\_reduction\_graph}}
\index{generate\_reduction\_graph@{generate\_reduction\_graph}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{generate\_reduction\_graph()}{generate\_reduction\_graph()}}
{\footnotesize\ttfamily  str parla.\+utility.\+graphs.\+generate\+\_\+reduction\+\_\+graph (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1ReductionConfig}{Reduction\+Config}}}]{config }\end{DoxyParamCaption})}



Definition at line 713 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{713 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ab0c7670d2bc11735677b41be708863d0}{generate\_reduction\_graph}}(config: ReductionConfig) -\/> str:}
\DoxyCodeLine{714     task\_config = config.task\_config}
\DoxyCodeLine{715     num\_gpus = config.num\_gpus}
\DoxyCodeLine{716     configurations = task\_config.configurations}
\DoxyCodeLine{717 }
\DoxyCodeLine{718     graph = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{719 }
\DoxyCodeLine{720     \textcolor{keywordflow}{if} task\_config \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{721         \textcolor{keywordflow}{raise} ValueError(\textcolor{stringliteral}{"{}Task config must be specified"{}})}
\DoxyCodeLine{722 }
\DoxyCodeLine{723     data\_config\_string = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{724     \textcolor{keywordflow}{if} config.data\_pattern == DataInitType.NO\_DATA:}
\DoxyCodeLine{725         data\_config\_string = \textcolor{stringliteral}{"{}\{1 : -\/1\}\(\backslash\)n"{}}}
\DoxyCodeLine{726     \textcolor{keywordflow}{elif} config.data\_pattern == DataInitType.INDEPENDENT\_DATA:}
\DoxyCodeLine{727         \textcolor{keywordflow}{raise} NotImplementedError(\textcolor{stringliteral}{"{}[Reduction] Data patterns not implemented"{}})}
\DoxyCodeLine{728     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{729         single\_data\_block\_size = config.total\_data\_width}
\DoxyCodeLine{730         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(config.branch\_factor**config.levels):}
\DoxyCodeLine{731             \textcolor{keywordflow}{if} i > 0:}
\DoxyCodeLine{732                 data\_config\_string += \textcolor{stringliteral}{"{} | "{}}}
\DoxyCodeLine{733             data\_config\_string += f\textcolor{stringliteral}{"{}\{single\_data\_block\_size, -\/1\}"{}}}
\DoxyCodeLine{734     data\_config\_string += \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{735     graph += data\_config\_string}
\DoxyCodeLine{736 }
\DoxyCodeLine{737     post\_configuration\_string = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{738 }
\DoxyCodeLine{739     \textcolor{comment}{\# TODO(hc): when this was designed, we considered multidevice placement.}}
\DoxyCodeLine{740     \textcolor{comment}{\#           but for now, we only consider a single device placement and so,}}
\DoxyCodeLine{741     \textcolor{comment}{\#           follow the old generator's graph generation rule.}}
\DoxyCodeLine{742 }
\DoxyCodeLine{743     device\_id = DeviceType.ANY\_GPU\_DEVICE}
\DoxyCodeLine{744     \textcolor{keywordflow}{for} config\_device\_id, task\_config \textcolor{keywordflow}{in} configurations.items():}
\DoxyCodeLine{745         last\_flag = 1 \textcolor{keywordflow}{if} config\_device\_id == list(}
\DoxyCodeLine{746             configurations.keys())[-\/1] \textcolor{keywordflow}{else} 0}
\DoxyCodeLine{747 }
\DoxyCodeLine{748         post\_configuration\_string += f\textcolor{stringliteral}{"{}\{task\_config.task\_time\}, \{task\_config.device\_fraction\}, \{task\_config.gil\_accesses\}, \{task\_config.gil\_fraction\}, \{task\_config.memory\} \}\}"{}}}
\DoxyCodeLine{749         \textcolor{comment}{\# TODO(hc): This should be refined.}}
\DoxyCodeLine{750         \textcolor{comment}{\#           If users did not set "{}fixed"{}, then it should be any cpu or gpu.}}
\DoxyCodeLine{751         device\_id = config\_device\_id[-\/1]}
\DoxyCodeLine{752 }
\DoxyCodeLine{753         \textcolor{keywordflow}{if} last\_flag == 0:}
\DoxyCodeLine{754             post\_configuration\_string += \textcolor{stringliteral}{"{}, "{}}}
\DoxyCodeLine{755 }
\DoxyCodeLine{756     reverse\_level = 0}
\DoxyCodeLine{757     global\_idx = 0}
\DoxyCodeLine{758     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(config.levels, -\/1, -\/1):}
\DoxyCodeLine{759         total\_tasks\_in\_level = config.branch\_factor ** i}
\DoxyCodeLine{760         segment = total\_tasks\_in\_level / num\_gpus}
\DoxyCodeLine{761         \textcolor{keywordflow}{for} j \textcolor{keywordflow}{in} range(total\_tasks\_in\_level):}
\DoxyCodeLine{762             \textcolor{keywordflow}{if} reverse\_level > 0:}
\DoxyCodeLine{763                 dependency\_string = \textcolor{stringliteral}{"{} "{}}}
\DoxyCodeLine{764                 \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} range(config.branch\_factor):}
\DoxyCodeLine{765                     dependency\_string += f\textcolor{stringliteral}{"{}\{reverse\_level-\/1, config.branch\_factor*j + k\}"{}}}
\DoxyCodeLine{766                     \textcolor{keywordflow}{if} k+1 < config.branch\_factor:}
\DoxyCodeLine{767                         dependency\_string += \textcolor{stringliteral}{"{} : "{}}}
\DoxyCodeLine{768             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{769                 dependency\_string = \textcolor{stringliteral}{"{} "{}}}
\DoxyCodeLine{770 }
\DoxyCodeLine{771             \textcolor{keywordflow}{if} reverse\_level > 0:}
\DoxyCodeLine{772                 l = 0}
\DoxyCodeLine{773                 read\_dependency = \textcolor{stringliteral}{"{} "{}}}
\DoxyCodeLine{774                 targets = [config.branch\_factor**(reverse\_level-\/1)]}
\DoxyCodeLine{775                 \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} targets:}
\DoxyCodeLine{776                     read\_dependency += f\textcolor{stringliteral}{"{}\{(config.branch\_factor**(reverse\_level))*j+k\}"{}}}
\DoxyCodeLine{777                     l += 1}
\DoxyCodeLine{778                     \textcolor{keywordflow}{if} l < len(targets):}
\DoxyCodeLine{779                         read\_dependency += \textcolor{stringliteral}{"{} , "{}}}
\DoxyCodeLine{780                 write\_dependency = f\textcolor{stringliteral}{"{}\{config.branch\_factor**(reverse\_level)*j\}"{}}}
\DoxyCodeLine{781             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{782                 read\_dependency = \textcolor{stringliteral}{"{} "{}}}
\DoxyCodeLine{783                 write\_dependency = f\textcolor{stringliteral}{"{}\{global\_idx\}"{}}}
\DoxyCodeLine{784             \textcolor{keywordflow}{if} config.fixed\_placement:}
\DoxyCodeLine{785                 \textcolor{comment}{\# USER\_CHOSEN\_DEVICE acts as an offset.}}
\DoxyCodeLine{786                 device\_id = int(DeviceType.USER\_CHOSEN\_DEVICE + j // segment)}
\DoxyCodeLine{787             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{788                 \textcolor{keyword}{assert} device\_id == DeviceType.CPU\_DEVICE \textcolor{keywordflow}{or} device\_id == DeviceType.ANY\_GPU\_DEVICE}
\DoxyCodeLine{789             pre\_configuration\_string = f\textcolor{stringliteral}{"{}\{\{ \{device\_id\} : "{}}}
\DoxyCodeLine{790             configuration\_string = pre\_configuration\_string + post\_configuration\_string}
\DoxyCodeLine{791             graph += f\textcolor{stringliteral}{"{}\{reverse\_level, j\} |  \{configuration\_string\} | \{dependency\_string\} | \{read\_dependency\} : : \{write\_dependency\} \(\backslash\)n"{}}}
\DoxyCodeLine{792             global\_idx += 1}
\DoxyCodeLine{793         reverse\_level += 1}
\DoxyCodeLine{794     \textcolor{keywordflow}{return} graph}
\DoxyCodeLine{795 }
\DoxyCodeLine{796 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_a520c9919c5811c7f167dc9322d688f27}\label{namespaceparla_1_1utility_1_1graphs_a520c9919c5811c7f167dc9322d688f27}} 
\index{parla.utility.graphs@{parla.utility.graphs}!generate\_reduction\_scatter\_graph@{generate\_reduction\_scatter\_graph}}
\index{generate\_reduction\_scatter\_graph@{generate\_reduction\_scatter\_graph}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{generate\_reduction\_scatter\_graph()}{generate\_reduction\_scatter\_graph()}}
{\footnotesize\ttfamily  str parla.\+utility.\+graphs.\+generate\+\_\+reduction\+\_\+scatter\+\_\+graph (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1ReductionScatterConfig}{Reduction\+Scatter\+Config}}}]{tgraph\+\_\+config }\end{DoxyParamCaption})}

\begin{DoxyVerb}Generate reduction-scatter graph input file.

e.g.,
* * * * * * (bulk tasks) 
\ | | | | /
     *      (bridge task)
/ | | | | \
* * * * * *
...
\end{DoxyVerb}
 

Definition at line 841 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{841 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a520c9919c5811c7f167dc9322d688f27}{generate\_reduction\_scatter\_graph}}(tgraph\_config: ReductionScatterConfig) -\/> str:}
\DoxyCodeLine{842     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{843 \textcolor{stringliteral}{    Generate reduction-\/scatter graph input file.}}
\DoxyCodeLine{844 \textcolor{stringliteral}{}}
\DoxyCodeLine{845 \textcolor{stringliteral}{    e.g.,}}
\DoxyCodeLine{846 \textcolor{stringliteral}{    * * * * * * (bulk tasks) }}
\DoxyCodeLine{847 \textcolor{stringliteral}{    \(\backslash\) | | | | /}}
\DoxyCodeLine{848 \textcolor{stringliteral}{         *      (bridge task)}}
\DoxyCodeLine{849 \textcolor{stringliteral}{    / | | | | \(\backslash\)}}
\DoxyCodeLine{850 \textcolor{stringliteral}{    * * * * * *}}
\DoxyCodeLine{851 \textcolor{stringliteral}{    ...}}
\DoxyCodeLine{852 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{853     task\_config = tgraph\_config.task\_config}
\DoxyCodeLine{854     configurations = task\_config.configurations}
\DoxyCodeLine{855     num\_gpus = tgraph\_config.num\_gpus}
\DoxyCodeLine{856     num\_tasks = tgraph\_config.task\_count}
\DoxyCodeLine{857     \textcolor{comment}{\# Level starts from 1}}
\DoxyCodeLine{858     levels = tgraph\_config.levels}
\DoxyCodeLine{859     \textcolor{comment}{\# Calcualte the number of bridge tasks in the graph.}}
\DoxyCodeLine{860     num\_bridge\_tasks = levels // 2}
\DoxyCodeLine{861     num\_bridge\_tasks += 1 \textcolor{keywordflow}{if} (levels \% 2 > 0) \textcolor{keywordflow}{else} 0}
\DoxyCodeLine{862     \textcolor{comment}{\# Calculate the number of bulk tasks in the graph.}}
\DoxyCodeLine{863     num\_bulk\_tasks = (num\_tasks -\/ num\_bridge\_tasks)}
\DoxyCodeLine{864     \textcolor{comment}{\# Calculate the number of bulk tasks per level.}}
\DoxyCodeLine{865     num\_levels\_for\_bulk\_tasks = levels // 2 + 1}
\DoxyCodeLine{866     num\_bulk\_tasks\_per\_level = num\_bulk\_tasks // num\_levels\_for\_bulk\_tasks}
\DoxyCodeLine{867     \textcolor{comment}{\# All the remaining bulk tasks are added to the last level.}}
\DoxyCodeLine{868     num\_bulk\_tasks\_last\_level = (}
\DoxyCodeLine{869         num\_bulk\_tasks \% num\_levels\_for\_bulk\_tasks) + num\_bulk\_tasks\_per\_level}
\DoxyCodeLine{870     \textcolor{comment}{\# Calculate the number of tasks per gpu per level.}}
\DoxyCodeLine{871     num\_bulk\_tasks\_per\_gpu = (num\_bulk\_tasks\_per\_level) // num\_gpus}
\DoxyCodeLine{872     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{873 \textcolor{stringliteral}{    for l in range(levels + 1):}}
\DoxyCodeLine{874 \textcolor{stringliteral}{        if l \% 2 > 0:}}
\DoxyCodeLine{875 \textcolor{stringliteral}{            print(f"{}Level \{l\}: -\/-\/ 1 -\/-\/"{}, flush=True)}}
\DoxyCodeLine{876 \textcolor{stringliteral}{        else:}}
\DoxyCodeLine{877 \textcolor{stringliteral}{            if l == levels:}}
\DoxyCodeLine{878 \textcolor{stringliteral}{                print(f"{}Level \{l\}: \{num\_bulk\_tasks\_last\_level\}, \{num\_bulk\_tasks\_per\_gpu\}"{}, flush=True)}}
\DoxyCodeLine{879 \textcolor{stringliteral}{            else:}}
\DoxyCodeLine{880 \textcolor{stringliteral}{                print(f"{}Level \{l\}: \{num\_bulk\_tasks\_per\_level\}, \{num\_bulk\_tasks\_per\_gpu\}"{}, flush=True)}}
\DoxyCodeLine{881 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{882 }
\DoxyCodeLine{883     graph = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{884 }
\DoxyCodeLine{885     data\_config\_string = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{886     \textcolor{comment}{\# TODO(hc): for now, assume that data allocation starts from cpu.}}
\DoxyCodeLine{887     \textcolor{keywordflow}{if} tgraph\_config.data\_pattern == DataInitType.NO\_DATA:}
\DoxyCodeLine{888         data\_config\_string = f\textcolor{stringliteral}{"{}\{1, -\/1\}"{}}}
\DoxyCodeLine{889     \textcolor{keywordflow}{elif} tgraph\_config.data\_pattern == DataInitType.OVERLAPPED\_DATA:}
\DoxyCodeLine{890         \textcolor{comment}{\# Each bulk task takes an individual (non-\/overlapped) data block.}}
\DoxyCodeLine{891         \textcolor{comment}{\# A bridge task reduces all data blocks from the bulk tasks in the previous level.}}
\DoxyCodeLine{892         single\_data\_block\_size = tgraph\_config.total\_data\_width}
\DoxyCodeLine{893         \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} range(num\_bulk\_tasks\_last\_level):}
\DoxyCodeLine{894             \textcolor{keywordflow}{if} d > 0:}
\DoxyCodeLine{895                 data\_config\_string += \textcolor{stringliteral}{"{} | "{}}}
\DoxyCodeLine{896             data\_config\_string += f\textcolor{stringliteral}{"{}\{single\_data\_block\_size, -\/1\}"{}}}
\DoxyCodeLine{897     \textcolor{keywordflow}{elif} tgraph\_config.data\_pattern == DataInitType.INDEPENDENT\_DATA:}
\DoxyCodeLine{898         \textcolor{keywordflow}{raise} NotImplementedError(}
\DoxyCodeLine{899             \textcolor{stringliteral}{"{}[Independent] Data patterns not implemented"{}})}
\DoxyCodeLine{900     data\_config\_string += \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{901     graph += data\_config\_string}
\DoxyCodeLine{902 }
\DoxyCodeLine{903     \textcolor{comment}{\# TODO(hc): I don't know how to handle user-\/fixed placement on multi-\/device}}
\DoxyCodeLine{904     \textcolor{comment}{\#           tasks. Let me design single device task workload.}}
\DoxyCodeLine{905     \textcolor{keyword}{assert} len(task\_config.configurations) == 1}
\DoxyCodeLine{906 }
\DoxyCodeLine{907     \textcolor{comment}{\# Construct task graphs.}}
\DoxyCodeLine{908     task\_id = 0}
\DoxyCodeLine{909     bridge\_task\_dev\_id = DeviceType.USER\_CHOSEN\_DEVICE \textcolor{keywordflow}{if} tgraph\_config.fixed\_placement \textcolor{keywordflow}{else} \(\backslash\)}
\DoxyCodeLine{910         DeviceType.ANY\_GPU\_DEVICE}
\DoxyCodeLine{911     last\_bridge\_task\_id\_str = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{912     last\_bridge\_task\_id = 0}
\DoxyCodeLine{913     \textcolor{keywordflow}{for} l \textcolor{keywordflow}{in} range(levels + 1):}
\DoxyCodeLine{914         \textcolor{comment}{\# If the last level has a bridge task, the previous level should take all remaining bulk}}
\DoxyCodeLine{915         \textcolor{comment}{\# tasks.}}
\DoxyCodeLine{916         \textcolor{keywordflow}{if} levels \% 2 > 0:}
\DoxyCodeLine{917             l\_num\_bulk\_tasks = num\_bulk\_tasks\_per\_level \textcolor{keywordflow}{if} l < (}
\DoxyCodeLine{918                 levels -\/ 1) \textcolor{keywordflow}{else} num\_bulk\_tasks\_last\_level}
\DoxyCodeLine{919         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{920             l\_num\_bulk\_tasks = num\_bulk\_tasks\_per\_level \textcolor{keywordflow}{if} l < levels \textcolor{keywordflow}{else} num\_bulk\_tasks\_last\_level}
\DoxyCodeLine{921         \textcolor{keywordflow}{if} l \% 2 > 0:  \textcolor{comment}{\# Bridge task condition}}
\DoxyCodeLine{922             dependency\_block = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{923             inout\_data\_block = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{924             \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} range(l\_num\_bulk\_tasks):}
\DoxyCodeLine{925                 inout\_data\_block += f\textcolor{stringliteral}{"{}\{d\}"{}}}
\DoxyCodeLine{926                 \textcolor{keywordflow}{if} l == 1:}
\DoxyCodeLine{927                     dependency\_block += f\textcolor{stringliteral}{"{}\{d + last\_bridge\_task\_id\}"{}}}
\DoxyCodeLine{928                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{929                     dependency\_block += f\textcolor{stringliteral}{"{}\{d + last\_bridge\_task\_id + 1\}"{}}}
\DoxyCodeLine{930                 \textcolor{keywordflow}{if} d != (l\_num\_bulk\_tasks -\/ 1):}
\DoxyCodeLine{931                     inout\_data\_block += \textcolor{stringliteral}{"{},"{}}}
\DoxyCodeLine{932                     dependency\_block += \textcolor{stringliteral}{"{} : "{}}}
\DoxyCodeLine{933             \textcolor{comment}{\# TODO(hc): assume a single device task.}}
\DoxyCodeLine{934             \textcolor{keywordflow}{for} \_, sdevice\_task\_config \textcolor{keywordflow}{in} task\_config.configurations.items():}
\DoxyCodeLine{935                 graph += (f\textcolor{stringliteral}{"{}\{task\_id\} | \{\{ \{bridge\_task\_dev\_id\} : \{sdevice\_task\_config.task\_time\}, "{}}}
\DoxyCodeLine{936                           f\textcolor{stringliteral}{"{}\{sdevice\_task\_config.device\_fraction\}, \{sdevice\_task\_config.gil\_accesses\}, "{}}}
\DoxyCodeLine{937                           f\textcolor{stringliteral}{"{}\{sdevice\_task\_config.gil\_fraction\}, \{sdevice\_task\_config.memory\} \}\}"{}})}
\DoxyCodeLine{938             graph += f\textcolor{stringliteral}{"{} | \{dependency\_block\}"{}}}
\DoxyCodeLine{939             graph += f\textcolor{stringliteral}{"{} | : : \{inout\_data\_block\}\(\backslash\)n"{}}}
\DoxyCodeLine{940             \textcolor{keywordflow}{if} tgraph\_config.fixed\_placement:}
\DoxyCodeLine{941                 bridge\_task\_dev\_id += 1}
\DoxyCodeLine{942                 \textcolor{keywordflow}{if} bridge\_task\_dev\_id == num\_gpus + DeviceType.USER\_CHOSEN\_DEVICE:}
\DoxyCodeLine{943                     bridge\_task\_dev\_id = DeviceType.USER\_CHOSEN\_DEVICE}
\DoxyCodeLine{944             last\_bridge\_task\_id\_str = f\textcolor{stringliteral}{"{}\{task\_id\}"{}}}
\DoxyCodeLine{945             last\_bridge\_task\_id = int(task\_id)}
\DoxyCodeLine{946             task\_id += 1}
\DoxyCodeLine{947         \textcolor{keywordflow}{else}:  \textcolor{comment}{\# Bulk tasks condition}}
\DoxyCodeLine{948             bulk\_task\_id\_per\_gpu = 0}
\DoxyCodeLine{949             bulk\_task\_dev\_id = DeviceType.USER\_CHOSEN\_DEVICE \textcolor{keywordflow}{if} tgraph\_config.fixed\_placement \textcolor{keywordflow}{else} \(\backslash\)}
\DoxyCodeLine{950                 DeviceType.ANY\_GPU\_DEVICE}
\DoxyCodeLine{951             \textcolor{keywordflow}{for} bulk\_task\_id \textcolor{keywordflow}{in} range(l\_num\_bulk\_tasks):}
\DoxyCodeLine{952                 inout\_data\_block = f\textcolor{stringliteral}{"{}\{bulk\_task\_id\}"{}}}
\DoxyCodeLine{953                 \textcolor{comment}{\# TODO(hc): assume a single device task.}}
\DoxyCodeLine{954                 \textcolor{keywordflow}{for} \_, sdevice\_task\_config \textcolor{keywordflow}{in} task\_config.configurations.items():}
\DoxyCodeLine{955                     graph += (f\textcolor{stringliteral}{"{}\{task\_id\} | \{\{ \{bulk\_task\_dev\_id\} : \{sdevice\_task\_config.task\_time\}, "{}}}
\DoxyCodeLine{956                               f\textcolor{stringliteral}{"{}\{sdevice\_task\_config.device\_fraction\}, \{sdevice\_task\_config.gil\_accesses\}, "{}}}
\DoxyCodeLine{957                               f\textcolor{stringliteral}{"{}\{sdevice\_task\_config.gil\_fraction\}, \{sdevice\_task\_config.memory\} \}\}"{}})}
\DoxyCodeLine{958                 graph += f\textcolor{stringliteral}{"{} | \{last\_bridge\_task\_id\_str\}"{}}}
\DoxyCodeLine{959                 graph += f\textcolor{stringliteral}{"{} | : : \{inout\_data\_block\}\(\backslash\)n"{}}}
\DoxyCodeLine{960                 l\_num\_bulk\_tasks\_per\_gpu = l\_num\_bulk\_tasks // num\_gpus}
\DoxyCodeLine{961                 \textcolor{keywordflow}{if} tgraph\_config.fixed\_placement:}
\DoxyCodeLine{962                     \textcolor{keywordflow}{if} l\_num\_bulk\_tasks \% num\_gpus >= (bulk\_task\_dev\_id -\/ DeviceType.USER\_CHOSEN\_DEVICE):}
\DoxyCodeLine{963                         l\_num\_bulk\_tasks\_per\_gpu += 1}
\DoxyCodeLine{964                     bulk\_task\_id\_per\_gpu += 1}
\DoxyCodeLine{965                     \textcolor{keywordflow}{if} bulk\_task\_id\_per\_gpu == l\_num\_bulk\_tasks\_per\_gpu:}
\DoxyCodeLine{966                         bulk\_task\_id\_per\_gpu = 0}
\DoxyCodeLine{967                         bulk\_task\_dev\_id += 1}
\DoxyCodeLine{968                         \textcolor{keywordflow}{if} bulk\_task\_dev\_id == num\_gpus:}
\DoxyCodeLine{969                             bulk\_task\_id = DeviceType.USER\_CHOSEN\_DEVICE}
\DoxyCodeLine{970                 task\_id += 1}
\DoxyCodeLine{971     \textcolor{keywordflow}{return} graph}
\DoxyCodeLine{972 }
\DoxyCodeLine{973 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_a5f39eb578ed535adc1aaf6732fa9b018}\label{namespaceparla_1_1utility_1_1graphs_a5f39eb578ed535adc1aaf6732fa9b018}} 
\index{parla.utility.graphs@{parla.utility.graphs}!generate\_serial\_graph@{generate\_serial\_graph}}
\index{generate\_serial\_graph@{generate\_serial\_graph}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{generate\_serial\_graph()}{generate\_serial\_graph()}}
{\footnotesize\ttfamily  str parla.\+utility.\+graphs.\+generate\+\_\+serial\+\_\+graph (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1SerialConfig}{Serial\+Config}}}]{config }\end{DoxyParamCaption})}



Definition at line 652 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{652 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a5f39eb578ed535adc1aaf6732fa9b018}{generate\_serial\_graph}}(config: SerialConfig) -\/> str:}
\DoxyCodeLine{653     task\_config = config.task\_config}
\DoxyCodeLine{654     configurations = task\_config.configurations}
\DoxyCodeLine{655 }
\DoxyCodeLine{656     graph = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{657 }
\DoxyCodeLine{658     data\_config\_string = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{659     \textcolor{keywordflow}{if} config.data\_pattern == DataInitType.NO\_DATA:}
\DoxyCodeLine{660         data\_config\_string = \textcolor{stringliteral}{"{}\{1 , -\/1\}\(\backslash\)n"{}}}
\DoxyCodeLine{661     \textcolor{keywordflow}{elif} config.data\_pattern == DataInitType.OVERLAPPED\_DATA:}
\DoxyCodeLine{662         config.data\_partitions = 1}
\DoxyCodeLine{663         single\_data\_block\_size = (}
\DoxyCodeLine{664             config.total\_data\_width // config.data\_partitions)}
\DoxyCodeLine{665         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(config.data\_partitions):}
\DoxyCodeLine{666             data\_config\_string += f\textcolor{stringliteral}{"{}\{single\_data\_block\_size , -\/1\}"{}}}
\DoxyCodeLine{667             \textcolor{keywordflow}{if} i+1 < config.data\_partitions:}
\DoxyCodeLine{668                 data\_config\_string += f\textcolor{stringliteral}{"{} | "{}}}
\DoxyCodeLine{669     \textcolor{keywordflow}{elif} config.data\_pattern == DataInitType.INDEPENDENT\_DATA:}
\DoxyCodeLine{670         \textcolor{keywordflow}{raise} NotImplementedError(\textcolor{stringliteral}{"{}[Serial] Data patterns not implemented"{}})}
\DoxyCodeLine{671     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{672         \textcolor{keywordflow}{raise} ValueError(}
\DoxyCodeLine{673             f\textcolor{stringliteral}{"{}[Serial] Not supported data configuration: \{config.data\_pattern\}"{}})}
\DoxyCodeLine{674     data\_config\_string += \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{675 }
\DoxyCodeLine{676     \textcolor{keywordflow}{if} task\_config \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{677         \textcolor{keywordflow}{raise} ValueError(\textcolor{stringliteral}{"{}Task config must be specified"{}})}
\DoxyCodeLine{678 }
\DoxyCodeLine{679     configuration\_string = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{680     \textcolor{keywordflow}{for} device\_id, task\_config \textcolor{keywordflow}{in} configurations.items():}
\DoxyCodeLine{681         last\_flag = 1 \textcolor{keywordflow}{if} device\_id == list(}
\DoxyCodeLine{682             configurations.keys())[-\/1] \textcolor{keywordflow}{else} 0}
\DoxyCodeLine{683         \textcolor{keywordflow}{if} config.fixed\_placement:}
\DoxyCodeLine{684             device\_id = DeviceType.GPU\_0}
\DoxyCodeLine{685         \textcolor{comment}{\# Othrewise, expect any cpu or any gpu.}}
\DoxyCodeLine{686         configuration\_string += f\textcolor{stringliteral}{"{}\{\{ \{device\_id\} : \{task\_config.task\_time\}, \{task\_config.device\_fraction\}, \{task\_config.gil\_accesses\}, \{task\_config.gil\_fraction\}, \{task\_config.memory\} \}\}"{}}}
\DoxyCodeLine{687 }
\DoxyCodeLine{688         \textcolor{keywordflow}{if} last\_flag == 0:}
\DoxyCodeLine{689             configuration\_string += \textcolor{stringliteral}{"{}, "{}}}
\DoxyCodeLine{690 }
\DoxyCodeLine{691     graph += data\_config\_string}
\DoxyCodeLine{692     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(config.steps):  \textcolor{comment}{\# height}}
\DoxyCodeLine{693         inout\_data\_index = i}
\DoxyCodeLine{694         \textcolor{keywordflow}{if} config.data\_pattern == DataInitType.OVERLAPPED\_DATA:}
\DoxyCodeLine{695             inout\_data\_index = 0}
\DoxyCodeLine{696         \textcolor{keywordflow}{for} j \textcolor{keywordflow}{in} range(config.chains):  \textcolor{comment}{\# width}}
\DoxyCodeLine{697             \textcolor{comment}{\# TODO(hc): for now, do not support chain}}
\DoxyCodeLine{698             dependency\_string = \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{699             dependency\_limit = min(i, config.dependency\_count)}
\DoxyCodeLine{700             \textcolor{keywordflow}{for} k \textcolor{keywordflow}{in} range(1, dependency\_limit+1):}
\DoxyCodeLine{701                 \textcolor{keyword}{assert} (i-\/k >= 0)}
\DoxyCodeLine{702                 dependency\_string += f\textcolor{stringliteral}{"{}\{i-\/k, j\}"{}}}
\DoxyCodeLine{703 }
\DoxyCodeLine{704                 \textcolor{keywordflow}{if} k < dependency\_limit:}
\DoxyCodeLine{705                     dependency\_string += \textcolor{stringliteral}{"{} : "{}}}
\DoxyCodeLine{706 }
\DoxyCodeLine{707             \textcolor{comment}{\# TODO(hc): for now, do not support chain}}
\DoxyCodeLine{708             graph += f\textcolor{stringliteral}{"{}\{i, 0\} |  \{configuration\_string\} | \{dependency\_string\} | : : \{inout\_data\_index\} \(\backslash\)n"{}}}
\DoxyCodeLine{709 }
\DoxyCodeLine{710     \textcolor{keywordflow}{return} graph}
\DoxyCodeLine{711 }
\DoxyCodeLine{712 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_a91464daf4588b93c8f2414815b03f0af}\label{namespaceparla_1_1utility_1_1graphs_a91464daf4588b93c8f2414815b03f0af}} 
\index{parla.utility.graphs@{parla.utility.graphs}!get\_task\_properties@{get\_task\_properties}}
\index{get\_task\_properties@{get\_task\_properties}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{get\_task\_properties()}{get\_task\_properties()}}
{\footnotesize\ttfamily def parla.\+utility.\+graphs.\+get\+\_\+task\+\_\+properties (\begin{DoxyParamCaption}\item[{str}]{line }\end{DoxyParamCaption})}



Definition at line 461 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{461 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a91464daf4588b93c8f2414815b03f0af}{get\_task\_properties}}(line: str):}
\DoxyCodeLine{462     message = line.split(\textcolor{stringliteral}{'>>'})[1].strip()}
\DoxyCodeLine{463     tasks = re.findall(task\_filter, message)}
\DoxyCodeLine{464     tprops = []}
\DoxyCodeLine{465     \textcolor{keywordflow}{for} task \textcolor{keywordflow}{in} tasks:}
\DoxyCodeLine{466         properties = \{\}}
\DoxyCodeLine{467         task = task.strip(\textcolor{stringliteral}{'InnerTask\{'}).strip(\textcolor{stringliteral}{'\}'}).strip()}
\DoxyCodeLine{468         task\_properties = task.split(\textcolor{stringliteral}{','})}
\DoxyCodeLine{469         \textcolor{keywordflow}{for} prop \textcolor{keywordflow}{in} task\_properties:}
\DoxyCodeLine{470             prop\_name, prop\_value = prop.strip().split(\textcolor{stringliteral}{':'})}
\DoxyCodeLine{471             properties[prop\_name] = prop\_value.strip()}
\DoxyCodeLine{472 }
\DoxyCodeLine{473         \textcolor{comment}{\# If "{}.dm."{} is in the task name, ignore it since}}
\DoxyCodeLine{474         \textcolor{comment}{\# this is a data movement task.}}
\DoxyCodeLine{475         \textcolor{comment}{\# TODO(hc): we may need to verify data movemnt task too.}}
\DoxyCodeLine{476         \textcolor{keywordflow}{if} \textcolor{stringliteral}{"{}.dm."{}} \textcolor{keywordflow}{in} properties[\textcolor{stringliteral}{'name'}]:}
\DoxyCodeLine{477             \textcolor{keywordflow}{continue}}
\DoxyCodeLine{478 }
\DoxyCodeLine{479         properties[\textcolor{stringliteral}{'name'}] = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ae605dd6b2b3610b8c2e31d34905a063b}{convert\_task\_id}}(}
\DoxyCodeLine{480             properties[\textcolor{stringliteral}{'name'}], properties[\textcolor{stringliteral}{'instance'}])}
\DoxyCodeLine{481 }
\DoxyCodeLine{482         tprops.append(properties)}
\DoxyCodeLine{483 }
\DoxyCodeLine{484     \textcolor{keywordflow}{return} tprops}
\DoxyCodeLine{485 }
\DoxyCodeLine{486 }

\end{DoxyCode}


References parla.\+utility.\+graphs.\+convert\+\_\+task\+\_\+id().



Referenced by parla.\+utility.\+graphs.\+parse\+\_\+blog().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1graphs_a91464daf4588b93c8f2414815b03f0af_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1graphs_a91464daf4588b93c8f2414815b03f0af_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_a68326b9dfaa2cdc94962da90b2d19f5c}\label{namespaceparla_1_1utility_1_1graphs_a68326b9dfaa2cdc94962da90b2d19f5c}} 
\index{parla.utility.graphs@{parla.utility.graphs}!get\_time@{get\_time}}
\index{get\_time@{get\_time}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{get\_time()}{get\_time()}}
{\footnotesize\ttfamily  int parla.\+utility.\+graphs.\+get\+\_\+time (\begin{DoxyParamCaption}\item[{str}]{line }\end{DoxyParamCaption})}



Definition at line 430 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{430 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a68326b9dfaa2cdc94962da90b2d19f5c}{get\_time}}(line: str) -\/> int:}
\DoxyCodeLine{431     logged\_time = line.split(\textcolor{stringliteral}{'>>'})[0].strip().strip(\textcolor{stringliteral}{"{}\(\backslash\)`"{}}).strip(\textcolor{stringliteral}{'[]'})}
\DoxyCodeLine{432     \textcolor{keywordflow}{return} int(logged\_time)}
\DoxyCodeLine{433 }
\DoxyCodeLine{434 }

\end{DoxyCode}


Referenced by parla.\+utility.\+graphs.\+parse\+\_\+blog().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1graphs_a68326b9dfaa2cdc94962da90b2d19f5c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_a5176733360f40aa9f08acda45b7371c1}\label{namespaceparla_1_1utility_1_1graphs_a5176733360f40aa9f08acda45b7371c1}} 
\index{parla.utility.graphs@{parla.utility.graphs}!parse\_blog@{parse\_blog}}
\index{parse\_blog@{parse\_blog}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{parse\_blog()}{parse\_blog()}}
{\footnotesize\ttfamily  Tuple\mbox{[}Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskTime}{Task\+Time}}\mbox{]},  Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]}\mbox{]} parla.\+utility.\+graphs.\+parse\+\_\+blog (\begin{DoxyParamCaption}\item[{str }]{filename = {\ttfamily \textquotesingle{}parla.blog\textquotesingle{}} }\end{DoxyParamCaption})}



Definition at line 487 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{487 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a5176733360f40aa9f08acda45b7371c1}{parse\_blog}}(filename: str = \textcolor{stringliteral}{'parla.blog'}) -\/> Tuple[Dict[TaskID, TaskTime],  Dict[TaskID, List[TaskID]]]:}
\DoxyCodeLine{488 }
\DoxyCodeLine{489     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{490         result = subprocess.run(}
\DoxyCodeLine{491             [\textcolor{stringliteral}{'bread'}, \textcolor{stringliteral}{'-\/s'}, \textcolor{stringliteral}{r"{}-\/f `[\%r] >> \%m`"{}}, filename], stdout=subprocess.PIPE)}
\DoxyCodeLine{492 }
\DoxyCodeLine{493         output = result.stdout.decode(\textcolor{stringliteral}{'utf-\/8'})}
\DoxyCodeLine{494     \textcolor{keywordflow}{except} subprocess.CalledProcessError \textcolor{keyword}{as} e:}
\DoxyCodeLine{495         \textcolor{keywordflow}{raise} Exception(e.output)}
\DoxyCodeLine{496 }
\DoxyCodeLine{497     output = output.splitlines()}
\DoxyCodeLine{498 }
\DoxyCodeLine{499     task\_start\_times = \{\}}
\DoxyCodeLine{500     task\_runahead\_times = \{\}}
\DoxyCodeLine{501     task\_notify\_times = \{\}}
\DoxyCodeLine{502     task\_end\_times = \{\}}
\DoxyCodeLine{503     task\_assigned\_times = \{\}}
\DoxyCodeLine{504 }
\DoxyCodeLine{505     task\_start\_order = []}
\DoxyCodeLine{506     task\_end\_order = []}
\DoxyCodeLine{507     task\_runahead\_order = []}
\DoxyCodeLine{508 }
\DoxyCodeLine{509     task\_times = \{\}}
\DoxyCodeLine{510     task\_states = defaultdict(list)}
\DoxyCodeLine{511 }
\DoxyCodeLine{512     task\_dependencies = \{\}}
\DoxyCodeLine{513 }
\DoxyCodeLine{514     final\_instance\_map = \{\}}
\DoxyCodeLine{515 }
\DoxyCodeLine{516     \textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} output:}
\DoxyCodeLine{517         line\_type = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a609d97a4399ec9e52333ecc2b4dd7428}{check\_log\_line}}(line)}
\DoxyCodeLine{518         \textcolor{keywordflow}{if} line\_type == LogState.START\_TASK:}
\DoxyCodeLine{519             start\_time = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a68326b9dfaa2cdc94962da90b2d19f5c}{get\_time}}(line)}
\DoxyCodeLine{520             task\_properties = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a91464daf4588b93c8f2414815b03f0af}{get\_task\_properties}}(line)}
\DoxyCodeLine{521             \textcolor{keywordflow}{if} len(task\_properties) == 0:}
\DoxyCodeLine{522                 \textcolor{comment}{\# If the length of the task properties is 0,}}
\DoxyCodeLine{523                 \textcolor{comment}{\# it implies that this task is data movement task.}}
\DoxyCodeLine{524                 \textcolor{comment}{\# Ignore it.}}
\DoxyCodeLine{525                 \textcolor{keywordflow}{continue}}
\DoxyCodeLine{526             task\_properties = task\_properties[0]}
\DoxyCodeLine{527 }
\DoxyCodeLine{528             task\_start\_times[task\_properties[\textcolor{stringliteral}{'name'}]] = start\_time}
\DoxyCodeLine{529             task\_start\_order.append(task\_properties[\textcolor{stringliteral}{'name'}])}
\DoxyCodeLine{530 }
\DoxyCodeLine{531             current\_name = task\_properties[\textcolor{stringliteral}{'name'}]}
\DoxyCodeLine{532 }
\DoxyCodeLine{533             base\_name = TaskID(current\_name.taskspace,}
\DoxyCodeLine{534                                current\_name.task\_idx,}
\DoxyCodeLine{535                                0)}
\DoxyCodeLine{536 }
\DoxyCodeLine{537             \textcolor{keywordflow}{if} base\_name \textcolor{keywordflow}{in} final\_instance\_map:}
\DoxyCodeLine{538                 \textcolor{keywordflow}{if} current\_name.instance > final\_instance\_map[base\_name].instance:}
\DoxyCodeLine{539                     final\_instance\_map[base\_name] = current\_name}
\DoxyCodeLine{540             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{541                 \textcolor{comment}{\# if current\_name.instance > 0:}}
\DoxyCodeLine{542                 \textcolor{comment}{\#    raise RuntimeError(}}
\DoxyCodeLine{543                 \textcolor{comment}{\#        "{}Instance number is not 0 for first instance of task"{})}}
\DoxyCodeLine{544                 final\_instance\_map[base\_name] = base\_name}
\DoxyCodeLine{545 }
\DoxyCodeLine{546         \textcolor{keywordflow}{elif} line\_type == LogState.RUNAHEAD\_TASK:}
\DoxyCodeLine{547             runahead\_time = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a68326b9dfaa2cdc94962da90b2d19f5c}{get\_time}}(line)}
\DoxyCodeLine{548             task\_properties = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a91464daf4588b93c8f2414815b03f0af}{get\_task\_properties}}(line)}
\DoxyCodeLine{549             \textcolor{keywordflow}{if} len(task\_properties) == 0:}
\DoxyCodeLine{550                 \textcolor{comment}{\# If the length of the task properties is 0,}}
\DoxyCodeLine{551                 \textcolor{comment}{\# it implies that this task is data movement task.}}
\DoxyCodeLine{552                 \textcolor{comment}{\# Ignore it.}}
\DoxyCodeLine{553                 \textcolor{keywordflow}{continue}}
\DoxyCodeLine{554 }
\DoxyCodeLine{555             task\_properties = task\_properties[0]}
\DoxyCodeLine{556 }
\DoxyCodeLine{557             current\_name = task\_properties[\textcolor{stringliteral}{'name'}]}
\DoxyCodeLine{558             base\_name = TaskID(current\_name.taskspace,}
\DoxyCodeLine{559                                current\_name.task\_idx,}
\DoxyCodeLine{560                                0)}
\DoxyCodeLine{561 }
\DoxyCodeLine{562             task\_runahead\_times[base\_name] = runahead\_time}
\DoxyCodeLine{563             task\_runahead\_order.append(base\_name)}
\DoxyCodeLine{564 }
\DoxyCodeLine{565         \textcolor{keywordflow}{elif} line\_type == LogState.COMPLETED\_TASK:}
\DoxyCodeLine{566             end\_time = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a68326b9dfaa2cdc94962da90b2d19f5c}{get\_time}}(line)}
\DoxyCodeLine{567             task\_properties = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a91464daf4588b93c8f2414815b03f0af}{get\_task\_properties}}(line)}
\DoxyCodeLine{568             \textcolor{keywordflow}{if} len(task\_properties) == 0:}
\DoxyCodeLine{569                 \textcolor{comment}{\# If the length of the task properties is 0,}}
\DoxyCodeLine{570                 \textcolor{comment}{\# it implies that this task is data movement task.}}
\DoxyCodeLine{571                 \textcolor{comment}{\# Ignore it.}}
\DoxyCodeLine{572                 \textcolor{keywordflow}{continue}}
\DoxyCodeLine{573 }
\DoxyCodeLine{574             task\_properties = task\_properties[0]}
\DoxyCodeLine{575 }
\DoxyCodeLine{576             current\_name = task\_properties[\textcolor{stringliteral}{'name'}]}
\DoxyCodeLine{577             base\_name = TaskID(current\_name.taskspace,}
\DoxyCodeLine{578                                current\_name.task\_idx,}
\DoxyCodeLine{579                                0)}
\DoxyCodeLine{580 }
\DoxyCodeLine{581             task\_end\_times[base\_name] = end\_time}
\DoxyCodeLine{582             task\_end\_order.append(base\_name)}
\DoxyCodeLine{583 }
\DoxyCodeLine{584         \textcolor{keywordflow}{elif} line\_type == LogState.NOTIFY\_DEPENDENTS:}
\DoxyCodeLine{585             notify\_time = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a68326b9dfaa2cdc94962da90b2d19f5c}{get\_time}}(line)}
\DoxyCodeLine{586             task\_properties = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a91464daf4588b93c8f2414815b03f0af}{get\_task\_properties}}(line)}
\DoxyCodeLine{587             \textcolor{keywordflow}{if} len(task\_properties) == 0:}
\DoxyCodeLine{588                 \textcolor{comment}{\# If the length of the task properties is 0,}}
\DoxyCodeLine{589                 \textcolor{comment}{\# it implies that this task is data movement task.}}
\DoxyCodeLine{590                 \textcolor{comment}{\# Ignore it.}}
\DoxyCodeLine{591                 \textcolor{keywordflow}{continue}}
\DoxyCodeLine{592 }
\DoxyCodeLine{593             notifying\_task = task\_properties[0]}
\DoxyCodeLine{594             current\_name = notifying\_task[\textcolor{stringliteral}{'name'}]}
\DoxyCodeLine{595             current\_state = notifying\_task[\textcolor{stringliteral}{'get\_state'}]}
\DoxyCodeLine{596             instance = notifying\_task[\textcolor{stringliteral}{'instance'}]}
\DoxyCodeLine{597 }
\DoxyCodeLine{598             \textcolor{keywordflow}{if} int(instance) > 0:}
\DoxyCodeLine{599                 base\_name = TaskID(current\_name.taskspace,}
\DoxyCodeLine{600                                    current\_name.task\_idx,}
\DoxyCodeLine{601                                    0)}
\DoxyCodeLine{602                 task\_states[base\_name] += [current\_state]}
\DoxyCodeLine{603 }
\DoxyCodeLine{604             task\_states[current\_name] += [current\_state]}
\DoxyCodeLine{605 }
\DoxyCodeLine{606         \textcolor{keywordflow}{elif} line\_type == LogState.ASSIGNED\_TASK:}
\DoxyCodeLine{607             assigned\_time = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a68326b9dfaa2cdc94962da90b2d19f5c}{get\_time}}(line)}
\DoxyCodeLine{608             task\_properties = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a91464daf4588b93c8f2414815b03f0af}{get\_task\_properties}}(line)}
\DoxyCodeLine{609             \textcolor{keywordflow}{if} len(task\_properties) == 0:}
\DoxyCodeLine{610                 \textcolor{comment}{\# If the length of the task properties is 0,}}
\DoxyCodeLine{611                 \textcolor{comment}{\# it implies that this task is data movement task.}}
\DoxyCodeLine{612                 \textcolor{comment}{\# Ignore it.}}
\DoxyCodeLine{613                 \textcolor{keywordflow}{continue}}
\DoxyCodeLine{614 }
\DoxyCodeLine{615             task\_properties = task\_properties[0]}
\DoxyCodeLine{616 }
\DoxyCodeLine{617             current\_name = task\_properties[\textcolor{stringliteral}{'name'}]}
\DoxyCodeLine{618             base\_name = TaskID(current\_name.taskspace,}
\DoxyCodeLine{619                                current\_name.task\_idx,}
\DoxyCodeLine{620                                0)}
\DoxyCodeLine{621 }
\DoxyCodeLine{622             task\_assigned\_times[base\_name] = assigned\_time}
\DoxyCodeLine{623 }
\DoxyCodeLine{624         \textcolor{keywordflow}{elif} line\_type == LogState.ADDING\_DEPENDENCIES:}
\DoxyCodeLine{625             task\_properties = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a91464daf4588b93c8f2414815b03f0af}{get\_task\_properties}}(line)}
\DoxyCodeLine{626             \textcolor{keywordflow}{if} len(task\_properties) == 0:}
\DoxyCodeLine{627                 \textcolor{comment}{\# If the length of the task properties is 0,}}
\DoxyCodeLine{628                 \textcolor{comment}{\# it implies that this task is data movement task.}}
\DoxyCodeLine{629                 \textcolor{comment}{\# Ignore it.}}
\DoxyCodeLine{630                 \textcolor{keywordflow}{continue}}
\DoxyCodeLine{631 }
\DoxyCodeLine{632             current\_task = task\_properties[0][\textcolor{stringliteral}{'name'}]}
\DoxyCodeLine{633             current\_dependencies = []}
\DoxyCodeLine{634 }
\DoxyCodeLine{635             \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} task\_properties[1:]:}
\DoxyCodeLine{636                 dependency = d[\textcolor{stringliteral}{'name'}]}
\DoxyCodeLine{637                 current\_dependencies.append(dependency)}
\DoxyCodeLine{638 }
\DoxyCodeLine{639             task\_dependencies[current\_task] = current\_dependencies}
\DoxyCodeLine{640 }
\DoxyCodeLine{641     \textcolor{keywordflow}{for} task \textcolor{keywordflow}{in} task\_end\_times:}
\DoxyCodeLine{642         assigned\_t = task\_assigned\_times[task]}
\DoxyCodeLine{643         start\_t = task\_start\_times[task]}
\DoxyCodeLine{644         \textcolor{comment}{\# end\_t = task\_end\_times[task]}}
\DoxyCodeLine{645         end\_t = task\_end\_times[task]}
\DoxyCodeLine{646         duration = end\_t -\/ start\_t}
\DoxyCodeLine{647         task\_times[task] = TaskTime(assigned\_t, start\_t, end\_t, duration)}
\DoxyCodeLine{648 }
\DoxyCodeLine{649     \textcolor{keywordflow}{return} task\_times, task\_dependencies, task\_states}
\DoxyCodeLine{650 }
\DoxyCodeLine{651 }

\end{DoxyCode}


References parla.\+utility.\+graphs.\+check\+\_\+log\+\_\+line(), parla.\+utility.\+graphs.\+get\+\_\+task\+\_\+properties(), and parla.\+utility.\+graphs.\+get\+\_\+time().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1graphs_a5176733360f40aa9f08acda45b7371c1_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_ad56d530ed6f726f7f36b624aec7e96d5}\label{namespaceparla_1_1utility_1_1graphs_ad56d530ed6f726f7f36b624aec7e96d5}} 
\index{parla.utility.graphs@{parla.utility.graphs}!read\_pgraph@{read\_pgraph}}
\index{read\_pgraph@{read\_pgraph}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{read\_pgraph()}{read\_pgraph()}}
{\footnotesize\ttfamily  Tuple\mbox{[}Dict\mbox{[}int, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1DataInfo}{Data\+Info}}\mbox{]}, Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]}\mbox{]} parla.\+utility.\+graphs.\+read\+\_\+pgraph (\begin{DoxyParamCaption}\item[{str}]{filename }\end{DoxyParamCaption})}

\begin{DoxyVerb}Reads a pgraph file and returns:
1. A list of the nodes in the graph
2. The initial data configuration
\end{DoxyVerb}
 

Definition at line 290 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{290 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ad56d530ed6f726f7f36b624aec7e96d5}{read\_pgraph}}(filename: str) -\/> Tuple[Dict[int, DataInfo], Dict[TaskID, TaskInfo]]:}
\DoxyCodeLine{291     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{292 \textcolor{stringliteral}{    Reads a pgraph file and returns:}}
\DoxyCodeLine{293 \textcolor{stringliteral}{    1. A list of the nodes in the graph}}
\DoxyCodeLine{294 \textcolor{stringliteral}{    2. The initial data configuration}}
\DoxyCodeLine{295 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{296 }
\DoxyCodeLine{297     task\_list = []}
\DoxyCodeLine{298     data\_config = dict()}
\DoxyCodeLine{299 }
\DoxyCodeLine{300     \textcolor{keyword}{with} open(filename, \textcolor{stringliteral}{'r'}) \textcolor{keyword}{as} graph\_file:}
\DoxyCodeLine{301 }
\DoxyCodeLine{302         lines = graph\_file.readlines()}
\DoxyCodeLine{303 }
\DoxyCodeLine{304         \textcolor{comment}{\# Read the initial data configuration}}
\DoxyCodeLine{305         data\_info = lines.pop(0)}
\DoxyCodeLine{306         data\_info = data\_info.split(\textcolor{stringliteral}{'|'})}
\DoxyCodeLine{307         idx = 0}
\DoxyCodeLine{308         \textcolor{keywordflow}{for} data \textcolor{keywordflow}{in} data\_info:}
\DoxyCodeLine{309             info = data.strip().strip(\textcolor{stringliteral}{"{}()"{}}).strip().split(\textcolor{stringliteral}{"{},"{}})}
\DoxyCodeLine{310             size = int(info[0].strip())}
\DoxyCodeLine{311             location = int(info[1].strip())}
\DoxyCodeLine{312             data\_config[idx] = DataInfo(idx, size, location)}
\DoxyCodeLine{313             idx += 1}
\DoxyCodeLine{314 }
\DoxyCodeLine{315         \textcolor{comment}{\# print("{}Data Config"{}, data\_config)}}
\DoxyCodeLine{316         \textcolor{comment}{\# Read the task graph}}
\DoxyCodeLine{317         \textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} lines:}
\DoxyCodeLine{318 }
\DoxyCodeLine{319             task = line.split(\textcolor{stringliteral}{"{}|"{}})}
\DoxyCodeLine{320             \textcolor{comment}{\# Breaks into [task\_id, task\_runtime, task\_dependencies, data\_dependencies]}}
\DoxyCodeLine{321 }
\DoxyCodeLine{322             \textcolor{comment}{\# Process task id (can't be empty)}}
\DoxyCodeLine{323             ids = task[0].strip()}
\DoxyCodeLine{324             ids = make\_tuple(ids)}
\DoxyCodeLine{325 }
\DoxyCodeLine{326             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} isinstance(ids, tuple):}
\DoxyCodeLine{327                 ids = (ids,)}
\DoxyCodeLine{328 }
\DoxyCodeLine{329             \textcolor{keywordflow}{if} isinstance(ids[0], str) \textcolor{keywordflow}{and} ids[0].isalpha():}
\DoxyCodeLine{330                 taskspace = ids[0]}
\DoxyCodeLine{331                 idx = ids[1]}
\DoxyCodeLine{332 }
\DoxyCodeLine{333                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} isinstance(idx, tuple):}
\DoxyCodeLine{334                     idx = (idx, )}
\DoxyCodeLine{335 }
\DoxyCodeLine{336                 task\_ids = TaskID(taskspace, idx, 0)}
\DoxyCodeLine{337             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{338                 taskspace = \textcolor{stringliteral}{"{}T"{}}}
\DoxyCodeLine{339                 task\_ids = TaskID(taskspace, ids, 0)}
\DoxyCodeLine{340 }
\DoxyCodeLine{341             \textcolor{comment}{\# Process task runtime (can't be empty)}}
\DoxyCodeLine{342             configurations = task[1].strip().split(\textcolor{stringliteral}{"{}\},"{}})}
\DoxyCodeLine{343             task\_runtime = dict()}
\DoxyCodeLine{344             \textcolor{keywordflow}{for} config \textcolor{keywordflow}{in} configurations:}
\DoxyCodeLine{345                 config = config.strip().strip(\textcolor{stringliteral}{"{}\{\}"{}}).strip()}
\DoxyCodeLine{346                 config = config.split(\textcolor{stringliteral}{"{}:"{}})}
\DoxyCodeLine{347 }
\DoxyCodeLine{348                 targets = config[0].strip().strip(\textcolor{stringliteral}{"{}()"{}}).strip().split(\textcolor{stringliteral}{"{},"{}})}
\DoxyCodeLine{349                 targets = [int(target.strip())}
\DoxyCodeLine{350                            \textcolor{keywordflow}{for} target \textcolor{keywordflow}{in} targets \textcolor{keywordflow}{if} target.strip() != \textcolor{stringliteral}{"{}"{}}]}
\DoxyCodeLine{351                 target = tuple(targets)}
\DoxyCodeLine{352 }
\DoxyCodeLine{353                 details = config[1].strip().split(\textcolor{stringliteral}{"{},"{}})}
\DoxyCodeLine{354 }
\DoxyCodeLine{355                 details = [\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a05f8adea1d435af5369c1ee8df975ffc}{extract}}(detail.strip()) \textcolor{keywordflow}{for} detail \textcolor{keywordflow}{in} details]}
\DoxyCodeLine{356                 details = TaskRuntimeInfo(*details)}
\DoxyCodeLine{357 }
\DoxyCodeLine{358                 task\_runtime[target] = details}
\DoxyCodeLine{359 }
\DoxyCodeLine{360             \textcolor{comment}{\# Process task dependencies (can be empty)}}
\DoxyCodeLine{361             \textcolor{keywordflow}{if} len(task) > 2:}
\DoxyCodeLine{362                 dependencies = task[2].split(\textcolor{stringliteral}{"{}:"{}})}
\DoxyCodeLine{363                 \textcolor{keywordflow}{if} (len(dependencies) > 0) \textcolor{keywordflow}{and} (\textcolor{keywordflow}{not} dependencies[0].isspace()):}
\DoxyCodeLine{364                     task\_dependencies = []}
\DoxyCodeLine{365 }
\DoxyCodeLine{366                     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(dependencies)):}
\DoxyCodeLine{367                         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} dependencies[i].isspace():}
\DoxyCodeLine{368                             ids = dependencies[i].strip()}
\DoxyCodeLine{369 }
\DoxyCodeLine{370                             ids = make\_tuple(ids)}
\DoxyCodeLine{371 }
\DoxyCodeLine{372                             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} isinstance(ids, tuple):}
\DoxyCodeLine{373                                 ids = (ids,)}
\DoxyCodeLine{374 }
\DoxyCodeLine{375                             \textcolor{keywordflow}{if} isinstance(ids[0], str) \textcolor{keywordflow}{and} ids[0].isalpha():}
\DoxyCodeLine{376                                 name, idx = ids[0], ids[1]}
\DoxyCodeLine{377 }
\DoxyCodeLine{378                                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} isinstance(idx, tuple):}
\DoxyCodeLine{379                                     idx = (idx, )}
\DoxyCodeLine{380                                 dep\_id = TaskID(name, idx, 0)}
\DoxyCodeLine{381 }
\DoxyCodeLine{382                             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{383                                 dep\_id = TaskID(taskspace, ids, 0)}
\DoxyCodeLine{384 }
\DoxyCodeLine{385                             task\_dependencies.append(dep\_id)}
\DoxyCodeLine{386                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{387                     task\_dependencies = []}
\DoxyCodeLine{388 }
\DoxyCodeLine{389             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{390                 task\_dependencies = []}
\DoxyCodeLine{391 }
\DoxyCodeLine{392             task\_dependencies = task\_dependencies}
\DoxyCodeLine{393 }
\DoxyCodeLine{394             \textcolor{comment}{\# Process data dependencies (can be empty)}}
\DoxyCodeLine{395             \textcolor{keywordflow}{if} len(task) > 3:}
\DoxyCodeLine{396                 \textcolor{comment}{\# Split into [read, write, read/write]}}
\DoxyCodeLine{397                 types = task[3].split(\textcolor{stringliteral}{"{}:"{}})}
\DoxyCodeLine{398 }
\DoxyCodeLine{399                 check = [\textcolor{keywordflow}{not} t.isspace() \textcolor{keywordflow}{for} t \textcolor{keywordflow}{in} types]}
\DoxyCodeLine{400 }
\DoxyCodeLine{401                 \textcolor{keywordflow}{if} any(check):}
\DoxyCodeLine{402                     task\_data = [[], [], []]}
\DoxyCodeLine{403 }
\DoxyCodeLine{404                     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(types)):}
\DoxyCodeLine{405                         \textcolor{keywordflow}{if} check[i]:}
\DoxyCodeLine{406                             data = types[i].strip().split(\textcolor{stringliteral}{"{},"{}})}
\DoxyCodeLine{407                             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} data[0].isspace():}
\DoxyCodeLine{408                                 task\_data[i] = [0 \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(len(data))]}
\DoxyCodeLine{409 }
\DoxyCodeLine{410                                 \textcolor{keywordflow}{for} j \textcolor{keywordflow}{in} range(len(data)):}
\DoxyCodeLine{411                                     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} data[j].isspace():}
\DoxyCodeLine{412                                         task\_data[i][j] = int(data[j])}
\DoxyCodeLine{413                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{414                     task\_data = [[], [], []]}
\DoxyCodeLine{415             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{416                 task\_data = [[], [], []]}
\DoxyCodeLine{417 }
\DoxyCodeLine{418             task\_data = TaskDataInfo(*task\_data)}
\DoxyCodeLine{419 }
\DoxyCodeLine{420             task\_tuple = TaskInfo(task\_ids, task\_runtime,}
\DoxyCodeLine{421                                   task\_dependencies, task\_data)}
\DoxyCodeLine{422 }
\DoxyCodeLine{423             task\_list.append(task\_tuple)}
\DoxyCodeLine{424 }
\DoxyCodeLine{425     task\_graph = \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ae1abf0f8056a29df96a56673ddfe8f6a}{convert\_to\_dictionary}}(task\_list)}
\DoxyCodeLine{426 }
\DoxyCodeLine{427     \textcolor{keywordflow}{return} data\_config, task\_graph}
\DoxyCodeLine{428 }
\DoxyCodeLine{429 }

\end{DoxyCode}


References parla.\+utility.\+graphs.\+convert\+\_\+to\+\_\+dictionary(), and parla.\+utility.\+graphs.\+extract().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1graphs_ad56d530ed6f726f7f36b624aec7e96d5_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_a31de3aa5796ba52c96a31676f5fcfaed}\label{namespaceparla_1_1utility_1_1graphs_a31de3aa5796ba52c96a31676f5fcfaed}} 
\index{parla.utility.graphs@{parla.utility.graphs}!shuffle\_tasks@{shuffle\_tasks}}
\index{shuffle\_tasks@{shuffle\_tasks}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{shuffle\_tasks()}{shuffle\_tasks()}}
{\footnotesize\ttfamily  Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]} parla.\+utility.\+graphs.\+shuffle\+\_\+tasks (\begin{DoxyParamCaption}\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]}}]{tasks }\end{DoxyParamCaption})}

\begin{DoxyVerb}Shuffles the task graph
\end{DoxyVerb}
 

Definition at line 271 of file graphs.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{271 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_a31de3aa5796ba52c96a31676f5fcfaed}{shuffle\_tasks}}(tasks: Dict[TaskID, TaskInfo]) -\/> Dict[TaskID, TaskInfo]:}
\DoxyCodeLine{272     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{273 \textcolor{stringliteral}{    Shuffles the task graph}}
\DoxyCodeLine{274 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{275     task\_list = list(tasks.values())}
\DoxyCodeLine{276     np.random.shuffle(task\_list)}
\DoxyCodeLine{277     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceparla_1_1utility_1_1graphs_ae1abf0f8056a29df96a56673ddfe8f6a}{convert\_to\_dictionary}}(task\_list)}
\DoxyCodeLine{278 }
\DoxyCodeLine{279 }

\end{DoxyCode}


References parla.\+utility.\+graphs.\+convert\+\_\+to\+\_\+dictionary().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1graphs_a31de3aa5796ba52c96a31676f5fcfaed_cgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_ae9d9fca669cb92e7995c50e4ae3d8632}\label{namespaceparla_1_1utility_1_1graphs_ae9d9fca669cb92e7995c50e4ae3d8632}} 
\index{parla.utility.graphs@{parla.utility.graphs}!\_\_all\_\_@{\_\_all\_\_}}
\index{\_\_all\_\_@{\_\_all\_\_}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{\_\_all\_\_}{\_\_all\_\_}}
{\footnotesize\ttfamily list parla.\+utility.\+graphs.\+\_\+\+\_\+all\+\_\+\+\_\+\hspace{0.3cm}{\ttfamily [private]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 =  [DeviceType, LogState, MovementType, DataInitType, TaskID, TaskRuntimeInfo,}
\DoxyCodeLine{2            TaskDataInfo, TaskInfo, DataInfo, TaskTime, TimeSample, read\_pgraph,}
\DoxyCodeLine{3            parse\_blog, TaskConfigs, RunConfig, shuffle\_tasks,}
\DoxyCodeLine{4            generate\_independent\_graph, generate\_serial\_graph,}
\DoxyCodeLine{5            generate\_reduction\_scatter\_graph]}

\end{DoxyCode}


Definition at line 974 of file graphs.\+py.

\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_ac4eb344f9f706421c6ca4559f15967cb}\label{namespaceparla_1_1utility_1_1graphs_ac4eb344f9f706421c6ca4559f15967cb}} 
\index{parla.utility.graphs@{parla.utility.graphs}!num\_gpus@{num\_gpus}}
\index{num\_gpus@{num\_gpus}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{num\_gpus}{num\_gpus}}
{\footnotesize\ttfamily int parla.\+utility.\+graphs.\+num\+\_\+gpus = 4}



Definition at line 25 of file graphs.\+py.

\mbox{\Hypertarget{namespaceparla_1_1utility_1_1graphs_a960ebc3be7f47b455783b439a7a884fd}\label{namespaceparla_1_1utility_1_1graphs_a960ebc3be7f47b455783b439a7a884fd}} 
\index{parla.utility.graphs@{parla.utility.graphs}!task\_filter@{task\_filter}}
\index{task\_filter@{task\_filter}!parla.utility.graphs@{parla.utility.graphs}}
\doxysubsubsection{\texorpdfstring{task\_filter}{task\_filter}}
{\footnotesize\ttfamily parla.\+utility.\+graphs.\+task\+\_\+filter = re.\+compile(r\textquotesingle{}Inner\+Task\textbackslash{}\{ .$\ast$? \textbackslash{}\}\textquotesingle{})}



Definition at line 257 of file graphs.\+py.

