\hypertarget{namespaceparla_1_1common_1_1array}{}\doxysection{parla.\+common.\+array Namespace Reference}
\label{namespaceparla_1_1common_1_1array}\index{parla.common.array@{parla.common.array}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classparla_1_1common_1_1array_1_1ArrayType}{Array\+Type}}
\item 
class \mbox{\hyperlink{classparla_1_1common_1_1array_1_1NumpyArray}{Numpy\+Array}}
\item 
class \mbox{\hyperlink{classparla_1_1common_1_1array_1_1CupyArray}{Cupy\+Array}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespaceparla_1_1common_1_1array_a8e485710b019c063b604ce567ca898d1}{\+\_\+register\+\_\+array\+\_\+type}} (ty, \mbox{\hyperlink{classparla_1_1common_1_1array_1_1ArrayType}{Array\+Type}} get\+\_\+memory\+\_\+impl)
\item 
def \mbox{\hyperlink{namespaceparla_1_1common_1_1array_ab049a1a648a55658cbb087592d89e999}{can\+\_\+assign\+\_\+from}} (a, b)
\item 
def \mbox{\hyperlink{namespaceparla_1_1common_1_1array_afde400cdbd0def19ac9250f756bd526b}{get\+\_\+array\+\_\+module}} (a)
\item 
bool \mbox{\hyperlink{namespaceparla_1_1common_1_1array_a268e77177f856cc7a8be5c5b449fcdb8}{is\+\_\+array}} (a)
\item 
def \mbox{\hyperlink{namespaceparla_1_1common_1_1array_aef962d460291a9a7bb386b1e9916b7a3}{asnumpy}} (a)
\item 
def \mbox{\hyperlink{namespaceparla_1_1common_1_1array_adcb8d71426772a7e69a362ae58287b8c}{copy}} (destination, source)
\item 
def \mbox{\hyperlink{namespaceparla_1_1common_1_1array_a2fb98621d2f781a43f8922f7b5015cac}{clone\+\_\+here}} (source, kind=None)
\item 
def \mbox{\hyperlink{namespaceparla_1_1common_1_1array_ae1227110199451602c5479dda1e9df5e}{storage\+\_\+size}} ($\ast$arrays)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespaceparla_1_1common_1_1array_a8e485710b019c063b604ce567ca898d1}\label{namespaceparla_1_1common_1_1array_a8e485710b019c063b604ce567ca898d1}} 
\index{parla.common.array@{parla.common.array}!\_register\_array\_type@{\_register\_array\_type}}
\index{\_register\_array\_type@{\_register\_array\_type}!parla.common.array@{parla.common.array}}
\doxysubsubsection{\texorpdfstring{\_register\_array\_type()}{\_register\_array\_type()}}
{\footnotesize\ttfamily def parla.\+common.\+array.\+\_\+register\+\_\+array\+\_\+type (\begin{DoxyParamCaption}\item[{}]{ty,  }\item[{\mbox{\hyperlink{classparla_1_1common_1_1array_1_1ArrayType}{Array\+Type}}}]{get\+\_\+memory\+\_\+impl }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 196 of file array.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{196 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1common_1_1array_a8e485710b019c063b604ce567ca898d1}{\_register\_array\_type}}(ty, get\_memory\_impl: ArrayType):}
\DoxyCodeLine{197     \_array\_types[ty] = get\_memory\_impl}
\DoxyCodeLine{198 }
\DoxyCodeLine{199 }
\DoxyCodeLine{200 \mbox{\hyperlink{namespaceparla_1_1common_1_1array_a8e485710b019c063b604ce567ca898d1}{\_register\_array\_type}}(numpy.ndarray, NumpyArray())}
\DoxyCodeLine{201 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceparla_1_1common_1_1array_aef962d460291a9a7bb386b1e9916b7a3}\label{namespaceparla_1_1common_1_1array_aef962d460291a9a7bb386b1e9916b7a3}} 
\index{parla.common.array@{parla.common.array}!asnumpy@{asnumpy}}
\index{asnumpy@{asnumpy}!parla.common.array@{parla.common.array}}
\doxysubsubsection{\texorpdfstring{asnumpy()}{asnumpy()}}
{\footnotesize\ttfamily def parla.\+common.\+array.\+asnumpy (\begin{DoxyParamCaption}\item[{}]{a }\end{DoxyParamCaption})}



Definition at line 231 of file array.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{231 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1common_1_1array_aef962d460291a9a7bb386b1e9916b7a3}{asnumpy}}(a):}
\DoxyCodeLine{232     ar = \mbox{\hyperlink{namespaceparla_1_1common_1_1array_afde400cdbd0def19ac9250f756bd526b}{get\_array\_module}}(a)}
\DoxyCodeLine{233     \textcolor{keywordflow}{if} hasattr(ar, \textcolor{stringliteral}{"{}asnumpy"{}}):}
\DoxyCodeLine{234         \textcolor{keywordflow}{return} ar.asnumpy(a)}
\DoxyCodeLine{235     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{236         \textcolor{keywordflow}{return} ar.asarray(a)}
\DoxyCodeLine{237 }
\DoxyCodeLine{238 }

\end{DoxyCode}


References parla.\+common.\+array.\+get\+\_\+array\+\_\+module().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1common_1_1array_aef962d460291a9a7bb386b1e9916b7a3_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1common_1_1array_ab049a1a648a55658cbb087592d89e999}\label{namespaceparla_1_1common_1_1array_ab049a1a648a55658cbb087592d89e999}} 
\index{parla.common.array@{parla.common.array}!can\_assign\_from@{can\_assign\_from}}
\index{can\_assign\_from@{can\_assign\_from}!parla.common.array@{parla.common.array}}
\doxysubsubsection{\texorpdfstring{can\_assign\_from()}{can\_assign\_from()}}
{\footnotesize\ttfamily def parla.\+common.\+array.\+can\+\_\+assign\+\_\+from (\begin{DoxyParamCaption}\item[{}]{a,  }\item[{}]{b }\end{DoxyParamCaption})}

\begin{DoxyVerb}:param a: An array.
:param b: An array.
:return: True iff `a` supports assignments from `b`.
\end{DoxyVerb}
 

Definition at line 206 of file array.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{206 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1common_1_1array_ab049a1a648a55658cbb087592d89e999}{can\_assign\_from}}(a, b):}
\DoxyCodeLine{207     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{208 \textcolor{stringliteral}{    :param a: An array.}}
\DoxyCodeLine{209 \textcolor{stringliteral}{    :param b: An array.}}
\DoxyCodeLine{210 \textcolor{stringliteral}{    :return: True iff `a` supports assignments from `b`.}}
\DoxyCodeLine{211 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{212     \textcolor{keywordflow}{return} \_array\_types[type(a)].\mbox{\hyperlink{namespaceparla_1_1common_1_1array_ab049a1a648a55658cbb087592d89e999}{can\_assign\_from}}(a, b)}
\DoxyCodeLine{213 }
\DoxyCodeLine{214 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceparla_1_1common_1_1array_a2fb98621d2f781a43f8922f7b5015cac}\label{namespaceparla_1_1common_1_1array_a2fb98621d2f781a43f8922f7b5015cac}} 
\index{parla.common.array@{parla.common.array}!clone\_here@{clone\_here}}
\index{clone\_here@{clone\_here}!parla.common.array@{parla.common.array}}
\doxysubsubsection{\texorpdfstring{clone\_here()}{clone\_here()}}
{\footnotesize\ttfamily def parla.\+common.\+array.\+clone\+\_\+here (\begin{DoxyParamCaption}\item[{}]{source,  }\item[{}]{kind = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Create a local copy of `source` stored at the current location.
:param source: The array to read from.
\end{DoxyVerb}
 

Definition at line 259 of file array.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{259 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1common_1_1array_a2fb98621d2f781a43f8922f7b5015cac}{clone\_here}}(source, kind=None):}
\DoxyCodeLine{260     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{261 \textcolor{stringliteral}{    Create a local copy of `source` stored at the current location.}}
\DoxyCodeLine{262 \textcolor{stringliteral}{    :param source: The array to read from.}}
\DoxyCodeLine{263 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{264 }
\DoxyCodeLine{265     \textcolor{keywordflow}{if} \mbox{\hyperlink{namespaceparla_1_1common_1_1array_a268e77177f856cc7a8be5c5b449fcdb8}{is\_array}}(source):}
\DoxyCodeLine{266 }
\DoxyCodeLine{267         current\_content = \mbox{\hyperlink{namespaceparla_1_1common_1_1globals_a984f8b4c44f904aec08e3fe4cbcab416}{get\_current\_context}}()}
\DoxyCodeLine{268 }
\DoxyCodeLine{269         \textcolor{keywordflow}{if} current\_content \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{270             \textcolor{keywordflow}{raise} ValueError(}
\DoxyCodeLine{271                 \textcolor{stringliteral}{"{}No device context exists for the current copy. Operation is ambiguous."{}})}
\DoxyCodeLine{272         \textcolor{keywordflow}{if} len(current\_content.devices) != 1:}
\DoxyCodeLine{273             \textcolor{keywordflow}{raise} ValueError(}
\DoxyCodeLine{274                 \textcolor{stringliteral}{"{}Multiple devices exist for the current copy. Operation is ambiguous."{}})}
\DoxyCodeLine{275 }
\DoxyCodeLine{276         current\_device = current\_content.devices[0]}
\DoxyCodeLine{277 }
\DoxyCodeLine{278         \textcolor{comment}{\# FIXME: Make this a property of the device}}
\DoxyCodeLine{279         \textcolor{keywordflow}{if} (current\_device.architecture == DeviceType.CUDA) \textcolor{keywordflow}{and} CUPY\_ENABLED:}
\DoxyCodeLine{280             AType = CupyArray()}
\DoxyCodeLine{281         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{282             AType = NumpyArray()}
\DoxyCodeLine{283 }
\DoxyCodeLine{284         target\_device\_id = current\_device().device\_id}
\DoxyCodeLine{285         dst = AType.copy\_from(source, target\_device\_id)}
\DoxyCodeLine{286 }
\DoxyCodeLine{287         \textcolor{keywordflow}{return} dst}
\DoxyCodeLine{288 }
\DoxyCodeLine{289     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{290         \textcolor{keywordflow}{raise} TypeError(}
\DoxyCodeLine{291             \textcolor{stringliteral}{"{}ArrayType required, given value of type \{\}"{}}.format(type(source)))}
\DoxyCodeLine{292 }
\DoxyCodeLine{293 }

\end{DoxyCode}


References parla.\+common.\+globals.\+get\+\_\+current\+\_\+context(), and parla.\+common.\+array.\+is\+\_\+array().



Referenced by parla.\+utility.\+execute.\+create\+\_\+task\+\_\+lazy\+\_\+data().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1common_1_1array_a2fb98621d2f781a43f8922f7b5015cac_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1common_1_1array_a2fb98621d2f781a43f8922f7b5015cac_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1common_1_1array_adcb8d71426772a7e69a362ae58287b8c}\label{namespaceparla_1_1common_1_1array_adcb8d71426772a7e69a362ae58287b8c}} 
\index{parla.common.array@{parla.common.array}!copy@{copy}}
\index{copy@{copy}!parla.common.array@{parla.common.array}}
\doxysubsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily def parla.\+common.\+array.\+copy (\begin{DoxyParamCaption}\item[{}]{destination,  }\item[{}]{source }\end{DoxyParamCaption})}

\begin{DoxyVerb}Copy the contents of `source` into `destination`.
:param destination: The array to write into.
:param source: The array to read from or the scalar value to put in destination.
\end{DoxyVerb}
 

Definition at line 239 of file array.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{239 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1common_1_1array_adcb8d71426772a7e69a362ae58287b8c}{copy}}(destination, source):}
\DoxyCodeLine{240     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{241 \textcolor{stringliteral}{    Copy the contents of `source` into `destination`.}}
\DoxyCodeLine{242 \textcolor{stringliteral}{    :param destination: The array to write into.}}
\DoxyCodeLine{243 \textcolor{stringliteral}{    :param source: The array to read from or the scalar value to put in destination.}}
\DoxyCodeLine{244 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{245     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{246         \textcolor{keywordflow}{if} \mbox{\hyperlink{namespaceparla_1_1common_1_1array_a268e77177f856cc7a8be5c5b449fcdb8}{is\_array}}(source):}
\DoxyCodeLine{247             \_array\_types[type(destination)].copy\_into(source, destination)}
\DoxyCodeLine{248         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{249             \textcolor{comment}{\# We assume all non-\/array types are by-\/value and hence already exist in the Python interpreter}}
\DoxyCodeLine{250             \textcolor{comment}{\# and don't need to be copied.}}
\DoxyCodeLine{251             destination[:] = source}
\DoxyCodeLine{252     \textcolor{keywordflow}{except} ValueError \textcolor{keyword}{as} e:}
\DoxyCodeLine{253         print(\textcolor{stringliteral}{"{}Error in copy: "{}}, e)}
\DoxyCodeLine{254         \textcolor{keywordflow}{raise} ValueError(\textcolor{stringliteral}{"{}Failed to copy (\{\} \{\} to \{\} \{\})"{}}.format(source, getattr(}
\DoxyCodeLine{255             source, \textcolor{stringliteral}{"{}shape"{}}, \textcolor{keywordtype}{None}),}
\DoxyCodeLine{256             destination, getattr(destination, \textcolor{stringliteral}{"{}shape"{}}, \textcolor{keywordtype}{None}))) \textcolor{keyword}{from} e}
\DoxyCodeLine{257 }
\DoxyCodeLine{258 }

\end{DoxyCode}


References parla.\+common.\+array.\+is\+\_\+array().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1common_1_1array_adcb8d71426772a7e69a362ae58287b8c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1common_1_1array_afde400cdbd0def19ac9250f756bd526b}\label{namespaceparla_1_1common_1_1array_afde400cdbd0def19ac9250f756bd526b}} 
\index{parla.common.array@{parla.common.array}!get\_array\_module@{get\_array\_module}}
\index{get\_array\_module@{get\_array\_module}!parla.common.array@{parla.common.array}}
\doxysubsubsection{\texorpdfstring{get\_array\_module()}{get\_array\_module()}}
{\footnotesize\ttfamily def parla.\+common.\+array.\+get\+\_\+array\+\_\+module (\begin{DoxyParamCaption}\item[{}]{a }\end{DoxyParamCaption})}

\begin{DoxyVerb}:param a: A numpy-compatible array.
:return: The numpy-compatible module associated with the array class (e.g., cupy or numpy).
\end{DoxyVerb}
 

Definition at line 215 of file array.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{215 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1common_1_1array_afde400cdbd0def19ac9250f756bd526b}{get\_array\_module}}(a):}
\DoxyCodeLine{216     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{217 \textcolor{stringliteral}{    :param a: A numpy-\/compatible array.}}
\DoxyCodeLine{218 \textcolor{stringliteral}{    :return: The numpy-\/compatible module associated with the array class (e.g., cupy or numpy).}}
\DoxyCodeLine{219 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{220     \textcolor{keywordflow}{return} \_array\_types[type(a)].\mbox{\hyperlink{namespaceparla_1_1common_1_1array_afde400cdbd0def19ac9250f756bd526b}{get\_array\_module}}(a)}
\DoxyCodeLine{221 }
\DoxyCodeLine{222 }

\end{DoxyCode}


Referenced by parla.\+common.\+array.\+asnumpy().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1common_1_1array_afde400cdbd0def19ac9250f756bd526b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1common_1_1array_a268e77177f856cc7a8be5c5b449fcdb8}\label{namespaceparla_1_1common_1_1array_a268e77177f856cc7a8be5c5b449fcdb8}} 
\index{parla.common.array@{parla.common.array}!is\_array@{is\_array}}
\index{is\_array@{is\_array}!parla.common.array@{parla.common.array}}
\doxysubsubsection{\texorpdfstring{is\_array()}{is\_array()}}
{\footnotesize\ttfamily  bool parla.\+common.\+array.\+is\+\_\+array (\begin{DoxyParamCaption}\item[{}]{a }\end{DoxyParamCaption})}

\begin{DoxyVerb}:param a: A value.
:return: True if `a` is an array of some type known to parla.
\end{DoxyVerb}
 

Definition at line 223 of file array.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{223 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1common_1_1array_a268e77177f856cc7a8be5c5b449fcdb8}{is\_array}}(a) -\/> bool:}
\DoxyCodeLine{224     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{225 \textcolor{stringliteral}{    :param a: A value.}}
\DoxyCodeLine{226 \textcolor{stringliteral}{    :return: True if `a` is an array of some type known to parla.}}
\DoxyCodeLine{227 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{228     \textcolor{keywordflow}{return} type(a) \textcolor{keywordflow}{in} \_array\_types}
\DoxyCodeLine{229 }
\DoxyCodeLine{230 }

\end{DoxyCode}


Referenced by parla.\+common.\+array.\+clone\+\_\+here(), and parla.\+common.\+array.\+copy().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1common_1_1array_a268e77177f856cc7a8be5c5b449fcdb8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1common_1_1array_ae1227110199451602c5479dda1e9df5e}\label{namespaceparla_1_1common_1_1array_ae1227110199451602c5479dda1e9df5e}} 
\index{parla.common.array@{parla.common.array}!storage\_size@{storage\_size}}
\index{storage\_size@{storage\_size}!parla.common.array@{parla.common.array}}
\doxysubsubsection{\texorpdfstring{storage\_size()}{storage\_size()}}
{\footnotesize\ttfamily def parla.\+common.\+array.\+storage\+\_\+size (\begin{DoxyParamCaption}\item[{$\ast$}]{arrays }\end{DoxyParamCaption})}

\begin{DoxyVerb}:return: the total size of the arrays passed as arguments.
\end{DoxyVerb}
 

Definition at line 294 of file array.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{294 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1common_1_1array_ae1227110199451602c5479dda1e9df5e}{storage\_size}}(*arrays):}
\DoxyCodeLine{295     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{296 \textcolor{stringliteral}{    :return: the total size of the arrays passed as arguments.}}
\DoxyCodeLine{297 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{298     \textcolor{keywordflow}{return} sum(a.size * a.itemsize \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} arrays)}

\end{DoxyCode}
