\hypertarget{classLauncher}{}\doxysection{Launcher Class Reference}
\label{classLauncher}\index{Launcher@{Launcher}}


The \mbox{\hyperlink{classLauncher}{Launcher}} phase of the scheduler. Dispatches tasks to workers.  




{\ttfamily \#include $<$phases.\+hpp$>$}



Inheritance diagram for Launcher\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=174pt]{classLauncher__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Launcher\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classLauncher__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classLauncher_a12e01578528a06d29695d8aadb1c0b6d}{Launcher}} (\mbox{\hyperlink{classInnerScheduler}{Inner\+Scheduler}} $\ast$\mbox{\hyperlink{classSchedulerPhase_a5b1a4e7a44cc2162e50cded7bba4376f}{scheduler}}, \mbox{\hyperlink{classDeviceManager}{Device\+Manager}} $\ast$devices)
\item 
void \mbox{\hyperlink{classLauncher_a5b6bdce05738701c16814a95c6562470}{enqueue}} (\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$task)
\begin{DoxyCompactList}\small\item\em Add a task to the launcher. Assigns a task to a free worker. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classLauncher_a10eddabbcda664971728e959bec88fcd}{enqueue}} (\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$task, \mbox{\hyperlink{classInnerWorker}{Inner\+Worker}} $\ast$worker)
\begin{DoxyCompactList}\small\item\em Add a task to the launcher. Assigns a task to a free worker. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classLauncher_aad6517ac14e5f482e85c6a9bc27637a8}{enqueue}} (std\+::vector$<$ \mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$ $>$ \&tasks)
\begin{DoxyCompactList}\small\item\em Add a batch of tasks to the launcher. Assigns them to free workers. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classLauncher_a8f02f47a43b1bcb64eb8be4be661cbc4}{run}} ()
\begin{DoxyCompactList}\small\item\em A placeholder function in case work needs to be done at this stage. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classLauncher_abe18604894b9aa9d7594b10f68fa2fee}{run}} (\mbox{\hyperlink{classSchedulerPhase}{Scheduler\+Phase}} $\ast$next\+\_\+phase)
\begin{DoxyCompactList}\small\item\em Run the phase. Check tasks in the enqueued buffer, check phase condition, and move tasks to the next phase. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classLauncher_a4735556d50f5c29ca5a503f1318b438c}{get\+\_\+count}} ()
\begin{DoxyCompactList}\small\item\em Number of running tasks. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::atomic$<$ size\+\_\+t $>$ \mbox{\hyperlink{classLauncher_a9990332300e6106da0749a4d988a14ed}{num\+\_\+running\+\_\+tasks}} \{0\}
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classLauncherStatus}{Launcher\+Status}} \mbox{\hyperlink{classLauncher_a72fef720bfafcf0cd461fb7c0dddef6e}{status}} \{\mbox{\hyperlink{classLauncher_a364d09571122ac4885bddd2f38b52ac8}{name}}\}
\begin{DoxyCompactList}\small\item\em The status of the phase. Used for debugging and tracing. \end{DoxyCompactList}\item 
\mbox{\hyperlink{parray_8hpp_ac4c8b62fd3a9d24a68816d47985773ba}{Task\+List}} \mbox{\hyperlink{classLauncher_a9b2009c6ced35c5a0255ef9271fc4454}{task\+\_\+buffer}}
\begin{DoxyCompactList}\small\item\em Buffer to store not yet launched tasks. Currently unused. \end{DoxyCompactList}\item 
\mbox{\hyperlink{runtime_8hpp_a5ff8f8b435fba02242f07b56a717af3d}{Worker\+List}} \mbox{\hyperlink{classLauncher_ae3d8d3e0b14fa1189e688d9dcf01a1b9}{worker\+\_\+buffer}}
\begin{DoxyCompactList}\small\item\em Buffer to store unassigned workers. Currently unused. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Protected Attributes}
\begin{DoxyCompactItemize}
\item 
static const std\+::string \mbox{\hyperlink{classLauncher_a364d09571122ac4885bddd2f38b52ac8}{name}} \{\char`\"{}Launcher\char`\"{}\}
\begin{DoxyCompactList}\small\item\em The name of the phase. Used for debugging and tracing. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{classLauncher}{Launcher}} phase of the scheduler. Dispatches tasks to workers. 

Definition at line 354 of file phases.\+hpp.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classLauncher_a12e01578528a06d29695d8aadb1c0b6d}\label{classLauncher_a12e01578528a06d29695d8aadb1c0b6d}} 
\index{Launcher@{Launcher}!Launcher@{Launcher}}
\index{Launcher@{Launcher}!Launcher@{Launcher}}
\doxysubsubsection{\texorpdfstring{Launcher()}{Launcher()}}
{\footnotesize\ttfamily Launcher\+::\+Launcher (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerScheduler}{Inner\+Scheduler}} $\ast$}]{scheduler,  }\item[{\mbox{\hyperlink{classDeviceManager}{Device\+Manager}} $\ast$}]{devices }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 360 of file phases.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{361       : \mbox{\hyperlink{classSchedulerPhase_af30330d46896e1e64815407abbb06ab8}{SchedulerPhase}}(\mbox{\hyperlink{classSchedulerPhase_a5b1a4e7a44cc2162e50cded7bba4376f}{scheduler}}, \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a4cd77e2b819d63fe1c64f5f59c52360b}{devices}}) \{\}}

\end{DoxyCode}


References Scheduler\+Phase\+::\+Scheduler\+Phase().



Referenced by Inner\+Scheduler\+::\+Inner\+Scheduler().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classLauncher_a12e01578528a06d29695d8aadb1c0b6d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classLauncher_a12e01578528a06d29695d8aadb1c0b6d_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classLauncher_a5b6bdce05738701c16814a95c6562470}\label{classLauncher_a5b6bdce05738701c16814a95c6562470}} 
\index{Launcher@{Launcher}!enqueue@{enqueue}}
\index{enqueue@{enqueue}!Launcher@{Launcher}}
\doxysubsubsection{\texorpdfstring{enqueue()}{enqueue()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void Launcher\+::enqueue (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$}]{task }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Add a task to the launcher. Assigns a task to a free worker. 



Implements \mbox{\hyperlink{classSchedulerPhase_ab728fba49a9d47d0baa1694df9debb92}{Scheduler\+Phase}}.



Definition at line 364 of file phases.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{364 \{\};}

\end{DoxyCode}
\mbox{\Hypertarget{classLauncher_a10eddabbcda664971728e959bec88fcd}\label{classLauncher_a10eddabbcda664971728e959bec88fcd}} 
\index{Launcher@{Launcher}!enqueue@{enqueue}}
\index{enqueue@{enqueue}!Launcher@{Launcher}}
\doxysubsubsection{\texorpdfstring{enqueue()}{enqueue()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void Launcher\+::enqueue (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$}]{task,  }\item[{\mbox{\hyperlink{classInnerWorker}{Inner\+Worker}} $\ast$}]{worker }\end{DoxyParamCaption})}



Add a task to the launcher. Assigns a task to a free worker. 



Definition at line 473 of file phases.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{473                                                            \{}
\DoxyCodeLine{474   \mbox{\hyperlink{profiling_8hpp_a4ed1a04fa9103ac0c29157e53ed53e66}{NVTX\_RANGE}}(\textcolor{stringliteral}{"{}Launcher::enqueue"{}}, \mbox{\hyperlink{profiling_8hpp_a166725049865b4af08e946c886ebe327}{NVTX\_COLOR\_LIGHT\_GREEN}})}
\DoxyCodeLine{475 }
\DoxyCodeLine{476   \textcolor{comment}{// std::cout << "{}Launcher::enqueue"{} << std::endl;}}
\DoxyCodeLine{477 }
\DoxyCodeLine{478   \textcolor{comment}{// Immediately launch task}}
\DoxyCodeLine{479   \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}-\/>set\_state(\mbox{\hyperlink{runtime_8hpp_a724f9ce2351c125b3b7f6c7923822bcea43491564ebcfd38568918efbd6e840fd}{TaskState::RUNNING}});}
\DoxyCodeLine{480   this-\/>\mbox{\hyperlink{classLauncher_a9990332300e6106da0749a4d988a14ed}{num\_running\_tasks}}++;}
\DoxyCodeLine{481 }
\DoxyCodeLine{482   \textcolor{comment}{// Assign task to thread and notify via c++ condition variable.}}
\DoxyCodeLine{483   \textcolor{comment}{// No GIL needed until worker wakes.}}
\DoxyCodeLine{484   worker-\/>\mbox{\hyperlink{classInnerWorker_a0ad91300f87f6409eeeb336a3b61eaf3}{assign\_task}}(\mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}});}
\DoxyCodeLine{485 }
\DoxyCodeLine{486   \textcolor{comment}{// std::cout << "{}Assigned "{} << task-\/>name << "{} to "{} << worker-\/>thread\_idx}}
\DoxyCodeLine{487   \textcolor{comment}{//          << std::endl;}}
\DoxyCodeLine{488   \mbox{\hyperlink{profiling_8hpp_a9ebb3c6ae8e23ea2260d5274b3a22a89}{LOG\_INFO}}(\mbox{\hyperlink{profiling_8hpp_a61fc173cd03db618eb2f64b60f42b55b}{WORKER}}, \textcolor{stringliteral}{"{}Assigned \{\} to \{\}"{}}, \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a80c42ae6cf7c7174352631aa0d84cbe0}{task}}, \mbox{\hyperlink{namespaceparla_1_1cython_1_1core_a8368535304ebfdbd53c01c50f851dbc6}{worker}});}
\DoxyCodeLine{489 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classLauncher_aad6517ac14e5f482e85c6a9bc27637a8}\label{classLauncher_aad6517ac14e5f482e85c6a9bc27637a8}} 
\index{Launcher@{Launcher}!enqueue@{enqueue}}
\index{enqueue@{enqueue}!Launcher@{Launcher}}
\doxysubsubsection{\texorpdfstring{enqueue()}{enqueue()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily void Launcher\+::enqueue (\begin{DoxyParamCaption}\item[{std\+::vector$<$ \mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$ $>$ \&}]{tasks }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Add a batch of tasks to the launcher. Assigns them to free workers. 



Implements \mbox{\hyperlink{classSchedulerPhase_a61e9e3138f4eb16579cde472887e9255}{Scheduler\+Phase}}.



Definition at line 368 of file phases.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{368 \{\};}

\end{DoxyCode}
\mbox{\Hypertarget{classLauncher_a4735556d50f5c29ca5a503f1318b438c}\label{classLauncher_a4735556d50f5c29ca5a503f1318b438c}} 
\index{Launcher@{Launcher}!get\_count@{get\_count}}
\index{get\_count@{get\_count}!Launcher@{Launcher}}
\doxysubsubsection{\texorpdfstring{get\_count()}{get\_count()}}
{\footnotesize\ttfamily size\+\_\+t Launcher\+::get\+\_\+count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Number of running tasks. 

A task is running if it has been assigned to a worker and is not complete 

Implements \mbox{\hyperlink{classSchedulerPhase_a0d81d78469a09647970acdc42244e79e}{Scheduler\+Phase}}.



Definition at line 377 of file phases.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{377 \{ \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{classLauncher_a9990332300e6106da0749a4d988a14ed}{num\_running\_tasks}}.load(); \}}

\end{DoxyCode}


Referenced by Inner\+Scheduler\+::get\+\_\+num\+\_\+running\+\_\+tasks().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=348pt]{classLauncher_a4735556d50f5c29ca5a503f1318b438c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classLauncher_a8f02f47a43b1bcb64eb8be4be661cbc4}\label{classLauncher_a8f02f47a43b1bcb64eb8be4be661cbc4}} 
\index{Launcher@{Launcher}!run@{run}}
\index{run@{run}!Launcher@{Launcher}}
\doxysubsubsection{\texorpdfstring{run()}{run()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Launcher\+::run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



A placeholder function in case work needs to be done at this stage. 

Not used. 

Definition at line 491 of file phases.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{491                    \{}
\DoxyCodeLine{492   \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"{}Launcher::run() not implemented."{}});}
\DoxyCodeLine{493 \}}

\end{DoxyCode}


Referenced by run().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=282pt]{classLauncher_a8f02f47a43b1bcb64eb8be4be661cbc4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classLauncher_abe18604894b9aa9d7594b10f68fa2fee}\label{classLauncher_abe18604894b9aa9d7594b10f68fa2fee}} 
\index{Launcher@{Launcher}!run@{run}}
\index{run@{run}!Launcher@{Launcher}}
\doxysubsubsection{\texorpdfstring{run()}{run()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Launcher\+::run (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classSchedulerPhase}{Scheduler\+Phase}} $\ast$}]{next\+\_\+phase }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Run the phase. Check tasks in the enqueued buffer, check phase condition, and move tasks to the next phase. 


\begin{DoxyParams}{Parameters}
{\em next\+\_\+phase} & The next phase to move tasks to. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classSchedulerPhase_a23e561996d5bbc884e2701d6966f5670}{Scheduler\+Phase}}.



Definition at line 373 of file phases.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{373 \{ this-\/>\mbox{\hyperlink{classLauncher_a8f02f47a43b1bcb64eb8be4be661cbc4}{run}}(); \};}

\end{DoxyCode}


References run().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=282pt]{classLauncher_abe18604894b9aa9d7594b10f68fa2fee_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classLauncher_a364d09571122ac4885bddd2f38b52ac8}\label{classLauncher_a364d09571122ac4885bddd2f38b52ac8}} 
\index{Launcher@{Launcher}!name@{name}}
\index{name@{name}!Launcher@{Launcher}}
\doxysubsubsection{\texorpdfstring{name}{name}}
{\footnotesize\ttfamily const std\+::string Launcher\+::name \{\char`\"{}Launcher\char`\"{}\}\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [protected]}}



The name of the phase. Used for debugging and tracing. 



Definition at line 381 of file phases.\+hpp.



Referenced by parla.\+cython.\+tasks.\+Task\+::\+\_\+\+\_\+hash\+\_\+\+\_\+(), parla.\+cython.\+tasks.\+Task\+::get\+\_\+name(), parla.\+cython.\+tasks.\+Task\+::unpack\+\_\+name(), and parla.\+cython.\+tasks.\+Task\+::update\+\_\+name().

\mbox{\Hypertarget{classLauncher_a9990332300e6106da0749a4d988a14ed}\label{classLauncher_a9990332300e6106da0749a4d988a14ed}} 
\index{Launcher@{Launcher}!num\_running\_tasks@{num\_running\_tasks}}
\index{num\_running\_tasks@{num\_running\_tasks}!Launcher@{Launcher}}
\doxysubsubsection{\texorpdfstring{num\_running\_tasks}{num\_running\_tasks}}
{\footnotesize\ttfamily std\+::atomic$<$size\+\_\+t$>$ Launcher\+::num\+\_\+running\+\_\+tasks \{0\}}



Definition at line 358 of file phases.\+hpp.

\mbox{\Hypertarget{classLauncher_a72fef720bfafcf0cd461fb7c0dddef6e}\label{classLauncher_a72fef720bfafcf0cd461fb7c0dddef6e}} 
\index{Launcher@{Launcher}!status@{status}}
\index{status@{status}!Launcher@{Launcher}}
\doxysubsubsection{\texorpdfstring{status}{status}}
{\footnotesize\ttfamily \mbox{\hyperlink{classLauncherStatus}{Launcher\+Status}} Launcher\+::status \{\mbox{\hyperlink{classLauncher_a364d09571122ac4885bddd2f38b52ac8}{name}}\}\hspace{0.3cm}{\ttfamily [protected]}}



The status of the phase. Used for debugging and tracing. 



Definition at line 383 of file phases.\+hpp.



Referenced by parla.\+cython.\+scheduler.\+Worker\+Thread\+::run().

\mbox{\Hypertarget{classLauncher_a9b2009c6ced35c5a0255ef9271fc4454}\label{classLauncher_a9b2009c6ced35c5a0255ef9271fc4454}} 
\index{Launcher@{Launcher}!task\_buffer@{task\_buffer}}
\index{task\_buffer@{task\_buffer}!Launcher@{Launcher}}
\doxysubsubsection{\texorpdfstring{task\_buffer}{task\_buffer}}
{\footnotesize\ttfamily \mbox{\hyperlink{parray_8hpp_ac4c8b62fd3a9d24a68816d47985773ba}{Task\+List}} Launcher\+::task\+\_\+buffer\hspace{0.3cm}{\ttfamily [protected]}}



Buffer to store not yet launched tasks. Currently unused. 



Definition at line 385 of file phases.\+hpp.

\mbox{\Hypertarget{classLauncher_ae3d8d3e0b14fa1189e688d9dcf01a1b9}\label{classLauncher_ae3d8d3e0b14fa1189e688d9dcf01a1b9}} 
\index{Launcher@{Launcher}!worker\_buffer@{worker\_buffer}}
\index{worker\_buffer@{worker\_buffer}!Launcher@{Launcher}}
\doxysubsubsection{\texorpdfstring{worker\_buffer}{worker\_buffer}}
{\footnotesize\ttfamily \mbox{\hyperlink{runtime_8hpp_a5ff8f8b435fba02242f07b56a717af3d}{Worker\+List}} Launcher\+::worker\+\_\+buffer\hspace{0.3cm}{\ttfamily [protected]}}



Buffer to store unassigned workers. Currently unused. 



Definition at line 387 of file phases.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/c/backend/include/\mbox{\hyperlink{phases_8hpp}{phases.\+hpp}}\item 
src/c/backend/\mbox{\hyperlink{phases_8cpp}{phases.\+cpp}}\end{DoxyCompactItemize}
