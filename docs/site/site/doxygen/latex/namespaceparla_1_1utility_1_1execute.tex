\hypertarget{namespaceparla_1_1utility_1_1execute}{}\doxysection{parla.\+utility.\+execute Namespace Reference}
\label{namespaceparla_1_1utility_1_1execute}\index{parla.utility.execute@{parla.utility.execute}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1execute_1_1GPUInfo}{GPUInfo}}
\item 
class \mbox{\hyperlink{classparla_1_1utility_1_1execute_1_1GraphContext}{Graph\+Context}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a59276b82194374cbbefddea28d9a5fb7}{make\+\_\+parrays}} (data\+\_\+list)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a0d98b269ad236b82a5ff24e9cc1fad5b}{estimate\+\_\+frequency}} (n\+\_\+samples=10, ticks=1900000000)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_ad50b926af45187a1fd4211017243f56f}{get\+\_\+placement\+\_\+set\+\_\+from}} (ps\+\_\+str\+\_\+set, num\+\_\+gpus)
\item 
List\mbox{[}np.\+ndarray\mbox{]} \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_ad9b1c0da9f5296d064e811073bf5488f}{generate\+\_\+data}} (Dict\mbox{[}int, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1DataInfo}{Data\+Info}}\mbox{]} data\+\_\+config, float data\+\_\+scale, data\+\_\+movement\+\_\+type)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_aed85656b4da947051803f2b43f78bebb}{synthetic\+\_\+kernel}} (int total\+\_\+time, Union\mbox{[}Fraction, float\mbox{]} gil\+\_\+fraction, int gil\+\_\+accesses, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1RunConfig}{Run\+Config}} config)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_aba0a90f5fe8ebd1c4d8dba72186a853f}{synthetic\+\_\+kernel\+\_\+gpu}} (int total\+\_\+time, Union\mbox{[}Fraction, float\mbox{]} gil\+\_\+fraction, int gil\+\_\+accesses, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1RunConfig}{Run\+Config}} config)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a413cb5485dfb3fe11168a7bb98d3cd66}{create\+\_\+task\+\_\+no\+\_\+data}} (task, taskspaces, config, data\+\_\+list=None)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a1e1558616a61e33a389de419efc0f4fa}{create\+\_\+task\+\_\+eager\+\_\+data}} (task, taskspaces, config=None, data\+\_\+list=None)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_aae6064a04ffee1ae1eac53d47d3c443b}{create\+\_\+task\+\_\+lazy\+\_\+data}} (task, taskspaces, config=None, data\+\_\+list=None)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a43ff947748f8008c5e914e5a32f7dd60}{execute\+\_\+tasks}} (taskspaces, Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]} tasks, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1RunConfig}{Run\+Config}} run\+\_\+config, data\+\_\+list=None)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a60754db99c2d6a2a1876af63d96e8c01}{execute\+\_\+graph}} (Dict\mbox{[}int, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1DataInfo}{Data\+Info}}\mbox{]} data\+\_\+config, Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]} tasks, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1RunConfig}{Run\+Config}} run\+\_\+config, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TimeSample}{Time\+Sample}}\mbox{]} timing)
\item 
\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TimeSample}{Time\+Sample}} \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a8a7b4a0f22674fe7982b3167eb89adcd}{run}} (Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]} tasks, Dict\mbox{[}int, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1DataInfo}{Data\+Info}}\mbox{]} data\+\_\+config=None, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1RunConfig}{Run\+Config}} run\+\_\+config=None)
\item 
bool \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a3557769ccde07f9ad874f8d684ee5fd2}{verify\+\_\+order}} (Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskTime}{Task\+Time}}\mbox{]} log\+\_\+times, Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]} truth\+\_\+graph)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a21f8962cb471483e18d353cfd071f601}{verify\+\_\+dependencies}} (Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]} log\+\_\+graph, Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]} truth\+\_\+graph)
\item 
bool \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_ae075017f43eee3460ed598223f75b4b3}{verify\+\_\+complete}} (Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]} log\+\_\+graph, Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]} truth\+\_\+graph)
\item 
bool \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a45f94ff549e58e310bb868bce281af42}{verify\+\_\+time}} (Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskTime}{Task\+Time}}\mbox{]} log\+\_\+times, Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]} truth\+\_\+graph, float factor=2.\+0)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a40d72166f4771e543dc1ca324bb26244}{verify\+\_\+ntasks}} (Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskTime}{Task\+Time}}\mbox{]} log\+\_\+times, Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]} truth\+\_\+graph)
\item 
bool \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_aab877c9e9e838f5e2acfcfa72c8fdf84}{verify\+\_\+states}} (log\+\_\+states)
\item 
def \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a50e9b92625105e162489118fb319f9e0}{timeout}} (seconds\+\_\+before\+\_\+timeout)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a77cf484a209c81a25d537fd8ba9601a2}{PArray}} = parray.\+core.\+PArray
\item 
\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a3214c71f4b3a7a7e865d35da682e4a0b}{\+\_\+\+GPUInfo}} = \mbox{\hyperlink{classparla_1_1utility_1_1execute_1_1GPUInfo}{GPUInfo}}()
\item 
list \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a5a4a9e11ae8733e45bef229c55240a42}{\+\_\+\+\_\+all\+\_\+\+\_\+}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a1e1558616a61e33a389de419efc0f4fa}\label{namespaceparla_1_1utility_1_1execute_a1e1558616a61e33a389de419efc0f4fa}} 
\index{parla.utility.execute@{parla.utility.execute}!create\_task\_eager\_data@{create\_task\_eager\_data}}
\index{create\_task\_eager\_data@{create\_task\_eager\_data}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{create\_task\_eager\_data()}{create\_task\_eager\_data()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+create\+\_\+task\+\_\+eager\+\_\+data (\begin{DoxyParamCaption}\item[{}]{task,  }\item[{}]{taskspaces,  }\item[{}]{config = {\ttfamily None},  }\item[{}]{data\+\_\+list = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 329 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{329 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a1e1558616a61e33a389de419efc0f4fa}{create\_task\_eager\_data}}(task, taskspaces, config=None, data\_list=None):}
\DoxyCodeLine{330 }
\DoxyCodeLine{331     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{332         \textcolor{comment}{\# Task ID}}
\DoxyCodeLine{333         task\_idx = task.task\_id.task\_idx}
\DoxyCodeLine{334         taskspace = taskspaces[task.task\_id.taskspace]}
\DoxyCodeLine{335 }
\DoxyCodeLine{336         \textcolor{comment}{\# Dependency Info}}
\DoxyCodeLine{337         dependencies = [taskspaces[dep.taskspace][dep.task\_idx]}
\DoxyCodeLine{338                         \textcolor{keywordflow}{for} dep \textcolor{keywordflow}{in} task.task\_dependencies]}
\DoxyCodeLine{339 }
\DoxyCodeLine{340         \textcolor{comment}{\# Valid Placement Set}}
\DoxyCodeLine{341         num\_gpus = config.num\_gpus}
\DoxyCodeLine{342         placement\_key = task.task\_runtime.keys()}
\DoxyCodeLine{343         placement\_set\_str = list(placement\_key)}
\DoxyCodeLine{344         placement\_set = \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_ad50b926af45187a1fd4211017243f56f}{get\_placement\_set\_from}}(placement\_set\_str, num\_gpus)}
\DoxyCodeLine{345 }
\DoxyCodeLine{346         \textcolor{comment}{\# In/out/inout data information}}
\DoxyCodeLine{347         \textcolor{comment}{\# read: list, write: list, read\_write: list}}
\DoxyCodeLine{348         data\_information = task.data\_dependencies}
\DoxyCodeLine{349         read\_data\_list = data\_information.read}
\DoxyCodeLine{350         write\_data\_list = data\_information.write}
\DoxyCodeLine{351         rw\_data\_list = data\_information.read\_write}
\DoxyCodeLine{352 }
\DoxyCodeLine{353         \textcolor{comment}{\# Remove duplicated data blocks between in/out and inout}}
\DoxyCodeLine{354         \textcolor{keywordflow}{if} len(read\_data\_list) > 0 \textcolor{keywordflow}{and} len(rw\_data\_list) > 0:}
\DoxyCodeLine{355             read\_data\_list = list(}
\DoxyCodeLine{356                 set(read\_data\_list).difference(set(rw\_data\_list)))}
\DoxyCodeLine{357         \textcolor{keywordflow}{if} len(write\_data\_list) > 0 \textcolor{keywordflow}{and} len(rw\_data\_list) > 0:}
\DoxyCodeLine{358             write\_data\_list = list(}
\DoxyCodeLine{359                 set(write\_data\_list).difference(set(rw\_data\_list)))}
\DoxyCodeLine{360 }
\DoxyCodeLine{361         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{362 \textcolor{stringliteral}{        print("{}RW data list:"{}, rw\_data\_list)}}
\DoxyCodeLine{363 \textcolor{stringliteral}{        print("{}R data list:"{}, read\_data\_list)}}
\DoxyCodeLine{364 \textcolor{stringliteral}{        print("{}W data list:"{}, write\_data\_list)}}
\DoxyCodeLine{365 \textcolor{stringliteral}{        print("{}Data list:"{}, data\_list)}}
\DoxyCodeLine{366 \textcolor{stringliteral}{        "{}"{}"{}}}
\DoxyCodeLine{367 }
\DoxyCodeLine{368         \textcolor{comment}{\# Construct data blocks.}}
\DoxyCodeLine{369         INOUT = [] \textcolor{keywordflow}{if} len(rw\_data\_list) == 0 \textcolor{keywordflow}{else} [}
\DoxyCodeLine{370             (data\_list[d], 0) \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} rw\_data\_list]}
\DoxyCodeLine{371         IN = [] \textcolor{keywordflow}{if} len(read\_data\_list) == 0 \textcolor{keywordflow}{else} [(data\_list[d], 0)}
\DoxyCodeLine{372                                                   \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} read\_data\_list]}
\DoxyCodeLine{373         OUT = [] \textcolor{keywordflow}{if} len(write\_data\_list) == 0 \textcolor{keywordflow}{else} [(data\_list[d], 0)}
\DoxyCodeLine{374                                                     \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} write\_data\_list]}
\DoxyCodeLine{375 }
\DoxyCodeLine{376         \textcolor{comment}{\# TODO: This needs rework with Device support}}
\DoxyCodeLine{377         \textcolor{comment}{\# TODO(hc): This assumes that this task is a single task}}
\DoxyCodeLine{378         \textcolor{comment}{\#           and does not have multiple placement options.}}
\DoxyCodeLine{379         runtime\_info = task.task\_runtime[placement\_set\_str[0]]}
\DoxyCodeLine{380 }
\DoxyCodeLine{381         \textcolor{comment}{\# Task Constraints}}
\DoxyCodeLine{382         device\_fraction = runtime\_info.device\_fraction}
\DoxyCodeLine{383         \textcolor{keywordflow}{if} config.device\_fraction \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{384             device\_fraction = config.device\_fraction}
\DoxyCodeLine{385 }
\DoxyCodeLine{386         \textcolor{comment}{\# Task Work}}
\DoxyCodeLine{387         total\_time = runtime\_info.task\_time}
\DoxyCodeLine{388         gil\_accesses = runtime\_info.gil\_accesses}
\DoxyCodeLine{389         gil\_fraction = runtime\_info.gil\_fraction}
\DoxyCodeLine{390 }
\DoxyCodeLine{391         \textcolor{keywordflow}{if} config.task\_time \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{392             total\_time = config.task\_time}
\DoxyCodeLine{393 }
\DoxyCodeLine{394         \textcolor{keywordflow}{if} config.gil\_accesses \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{395             gil\_accesses = config.gil\_accesses}
\DoxyCodeLine{396 }
\DoxyCodeLine{397         \textcolor{keywordflow}{if} config.gil\_fraction \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{398             gil\_fraction = config.gil\_fraction}
\DoxyCodeLine{399 }
\DoxyCodeLine{400         \textcolor{comment}{\# print("{}Eager data in:"{}, IN, "{} out:"{}, OUT, "{} inout:"{}, INOUT, flush=True)}}
\DoxyCodeLine{401         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{402 \textcolor{stringliteral}{        print("{}task idx:"{}, task\_idx, "{} dependencies:"{}, dependencies, "{} vcu:"{}, device\_fraction,}}
\DoxyCodeLine{403 \textcolor{stringliteral}{            "{} placement:"{}, placement\_set)}}
\DoxyCodeLine{404 \textcolor{stringliteral}{        "{}"{}"{}}}
\DoxyCodeLine{405 }
\DoxyCodeLine{406         \textcolor{comment}{\# TODO(hc): Add data checking.}}
\DoxyCodeLine{407         \textcolor{preprocessor}{@spawn(taskspace[task\_idx], dependencies=dependencies, vcus=device\_fraction, placement=[placement\_set], input=IN, output=OUT, inout=INOUT)}}
\DoxyCodeLine{408         async \textcolor{keyword}{def }task\_func():}
\DoxyCodeLine{409             \textcolor{keywordflow}{if} config.verbose:}
\DoxyCodeLine{410                 print(f\textcolor{stringliteral}{"{}+\{task.task\_id\} Running"{}}, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{411 }
\DoxyCodeLine{412             elapsed = \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_aed85656b4da947051803f2b43f78bebb}{synthetic\_kernel}}(total\_time, gil\_fraction,}
\DoxyCodeLine{413                                        gil\_accesses, config=config)}
\DoxyCodeLine{414 }
\DoxyCodeLine{415             \textcolor{keywordflow}{if} config.verbose:}
\DoxyCodeLine{416                 print(f\textcolor{stringliteral}{"{}-\/\{task.task\_id\} Finished: \{elapsed\} seconds"{}}, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{417 }
\DoxyCodeLine{418     \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{419         print(f\textcolor{stringliteral}{"{}Failed creating Task \{task.task\_id\}: \{e\}"{}}, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{420     \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{421         \textcolor{keywordflow}{return}}
\DoxyCodeLine{422 }
\DoxyCodeLine{423 }

\end{DoxyCode}


References parla.\+utility.\+execute.\+get\+\_\+placement\+\_\+set\+\_\+from(), and parla.\+utility.\+execute.\+synthetic\+\_\+kernel().



Referenced by parla.\+utility.\+execute.\+execute\+\_\+tasks().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a1e1558616a61e33a389de419efc0f4fa_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a1e1558616a61e33a389de419efc0f4fa_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_aae6064a04ffee1ae1eac53d47d3c443b}\label{namespaceparla_1_1utility_1_1execute_aae6064a04ffee1ae1eac53d47d3c443b}} 
\index{parla.utility.execute@{parla.utility.execute}!create\_task\_lazy\_data@{create\_task\_lazy\_data}}
\index{create\_task\_lazy\_data@{create\_task\_lazy\_data}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{create\_task\_lazy\_data()}{create\_task\_lazy\_data()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+create\+\_\+task\+\_\+lazy\+\_\+data (\begin{DoxyParamCaption}\item[{}]{task,  }\item[{}]{taskspaces,  }\item[{}]{config = {\ttfamily None},  }\item[{}]{data\+\_\+list = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 424 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{424 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_aae6064a04ffee1ae1eac53d47d3c443b}{create\_task\_lazy\_data}}(task, taskspaces, config=None, data\_list=None):}
\DoxyCodeLine{425 }
\DoxyCodeLine{426     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{427         \textcolor{comment}{\# Task ID}}
\DoxyCodeLine{428         task\_idx = task.task\_id.task\_idx}
\DoxyCodeLine{429         taskspace = taskspaces[task.task\_id.taskspace]}
\DoxyCodeLine{430 }
\DoxyCodeLine{431         \textcolor{comment}{\# Dependency Info}}
\DoxyCodeLine{432         dependencies = [taskspaces[dep.taskspace][dep.task\_idx]}
\DoxyCodeLine{433                         \textcolor{keywordflow}{for} dep \textcolor{keywordflow}{in} task.task\_dependencies]}
\DoxyCodeLine{434 }
\DoxyCodeLine{435         \textcolor{comment}{\# Valid Placement Set}}
\DoxyCodeLine{436         num\_gpus = config.num\_gpus}
\DoxyCodeLine{437         placement\_key = task.task\_runtime.keys()}
\DoxyCodeLine{438         placement\_set\_str = list(placement\_key)}
\DoxyCodeLine{439         placement\_set = \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_ad50b926af45187a1fd4211017243f56f}{get\_placement\_set\_from}}(placement\_set\_str, num\_gpus)}
\DoxyCodeLine{440 }
\DoxyCodeLine{441         \textcolor{comment}{\# In/out/inout data information}}
\DoxyCodeLine{442         \textcolor{comment}{\# read: list, write: list, read\_write: list}}
\DoxyCodeLine{443         data\_information = task.data\_dependencies}
\DoxyCodeLine{444         read\_data\_list = data\_information.read}
\DoxyCodeLine{445         write\_data\_list = data\_information.write}
\DoxyCodeLine{446         rw\_data\_list = data\_information.read\_write}
\DoxyCodeLine{447 }
\DoxyCodeLine{448         \textcolor{comment}{\# Remove duplicated data blocks between in/out and inout}}
\DoxyCodeLine{449         \textcolor{keywordflow}{if} len(read\_data\_list) > 0 \textcolor{keywordflow}{and} len(rw\_data\_list) > 0:}
\DoxyCodeLine{450             read\_data\_list = list(}
\DoxyCodeLine{451                 set(read\_data\_list).difference(set(rw\_data\_list)))}
\DoxyCodeLine{452         \textcolor{keywordflow}{if} len(write\_data\_list) > 0 \textcolor{keywordflow}{and} len(rw\_data\_list) > 0:}
\DoxyCodeLine{453             write\_data\_list = list(}
\DoxyCodeLine{454                 set(write\_data\_list).difference(set(rw\_data\_list)))}
\DoxyCodeLine{455 }
\DoxyCodeLine{456         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{457 \textcolor{stringliteral}{        print("{}RW data list:"{}, rw\_data\_list)}}
\DoxyCodeLine{458 \textcolor{stringliteral}{        print("{}R data list:"{}, read\_data\_list)}}
\DoxyCodeLine{459 \textcolor{stringliteral}{        print("{}W data list:"{}, write\_data\_list)}}
\DoxyCodeLine{460 \textcolor{stringliteral}{        print("{}Data list:"{}, data\_list)}}
\DoxyCodeLine{461 \textcolor{stringliteral}{        "{}"{}"{}}}
\DoxyCodeLine{462 }
\DoxyCodeLine{463         \textcolor{comment}{\# TODO: This needs rework with Device support}}
\DoxyCodeLine{464         \textcolor{comment}{\# TODO(hc): This assumes that this task is a single task}}
\DoxyCodeLine{465         \textcolor{comment}{\#           and does not have multiple placement options.}}
\DoxyCodeLine{466         runtime\_info = task.task\_runtime[placement\_set\_str[0]]}
\DoxyCodeLine{467 }
\DoxyCodeLine{468         \textcolor{comment}{\# Task Constraints}}
\DoxyCodeLine{469         device\_fraction = runtime\_info.device\_fraction}
\DoxyCodeLine{470         \textcolor{keywordflow}{if} config.device\_fraction \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{471             device\_fraction = config.device\_fraction}
\DoxyCodeLine{472 }
\DoxyCodeLine{473         \textcolor{comment}{\# Task Work}}
\DoxyCodeLine{474         total\_time = runtime\_info.task\_time}
\DoxyCodeLine{475         gil\_accesses = runtime\_info.gil\_accesses}
\DoxyCodeLine{476         gil\_fraction = runtime\_info.gil\_fraction}
\DoxyCodeLine{477 }
\DoxyCodeLine{478         \textcolor{keywordflow}{if} config.task\_time \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{479             total\_time = config.task\_time}
\DoxyCodeLine{480 }
\DoxyCodeLine{481         \textcolor{keywordflow}{if} config.gil\_accesses \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{482             gil\_accesses = config.gil\_accesses}
\DoxyCodeLine{483 }
\DoxyCodeLine{484         \textcolor{keywordflow}{if} config.gil\_fraction \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{485             gil\_fraction = config.gil\_fraction}
\DoxyCodeLine{486         print(\textcolor{stringliteral}{"{}task idx:"{}}, task\_idx, \textcolor{stringliteral}{"{} dependencies:"{}}, dependencies, \textcolor{stringliteral}{"{} vcu:"{}}, device\_fraction,}
\DoxyCodeLine{487               \textcolor{stringliteral}{"{} placement:"{}}, placement\_set)}
\DoxyCodeLine{488 }
\DoxyCodeLine{489         \textcolor{preprocessor}{@spawn(taskspace[task\_idx], dependencies=dependencies, vcus=device\_fraction, placement=[placement\_set])}}
\DoxyCodeLine{490         async \textcolor{keyword}{def }task\_func():}
\DoxyCodeLine{491             \textcolor{keywordflow}{if} config.verbose:}
\DoxyCodeLine{492                 print(f\textcolor{stringliteral}{"{}+\{task.task\_id\} Running"{}}, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{493 }
\DoxyCodeLine{494             local\_data = dict()}
\DoxyCodeLine{495 }
\DoxyCodeLine{496             \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} itertools.chain(read\_data\_list, rw\_data\_list):}
\DoxyCodeLine{497                 data = data\_list[d]}
\DoxyCodeLine{498                 where = -\/1 \textcolor{keywordflow}{if} isinstance(data, np.ndarray) \textcolor{keywordflow}{else} data.device.id}
\DoxyCodeLine{499                 local\_data[d] = \mbox{\hyperlink{namespaceparla_1_1common_1_1array_a2fb98621d2f781a43f8922f7b5015cac}{clone\_here}}(data)}
\DoxyCodeLine{500                 old = \textcolor{keywordtype}{None}}
\DoxyCodeLine{501                 \textcolor{keywordflow}{if} config.do\_check:}
\DoxyCodeLine{502                     old = np.copy(data[0, 1])}
\DoxyCodeLine{503                     local\_data[d][0, 1] = -\/old}
\DoxyCodeLine{504                 \textcolor{keywordflow}{if} config.verbose:}
\DoxyCodeLine{505                     print(}
\DoxyCodeLine{506                         f\textcolor{stringliteral}{"{}=Task \{task\_idx\} moved Data[\{d\}] from Device[\{where\}]. Block=[\{local\_data[d][0, 0]\}] | Value=[\{local\_data[d][0, 1]\}], <\{old\}>"{}}, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{507 }
\DoxyCodeLine{508             elapsed = \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_aed85656b4da947051803f2b43f78bebb}{synthetic\_kernel}}(total\_time, gil\_fraction,}
\DoxyCodeLine{509                                        gil\_accesses, config=config)}
\DoxyCodeLine{510 }
\DoxyCodeLine{511             \textcolor{keywordflow}{for} d \textcolor{keywordflow}{in} itertools.chain(write\_data\_list, rw\_data\_list):}
\DoxyCodeLine{512                 data\_list[d] = local\_data[d]}
\DoxyCodeLine{513 }
\DoxyCodeLine{514             \textcolor{keywordflow}{if} config.verbose:}
\DoxyCodeLine{515                 print(f\textcolor{stringliteral}{"{}-\/\{task.task\_id\} Finished: \{elapsed\} seconds"{}}, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{516 }
\DoxyCodeLine{517     \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{518         print(f\textcolor{stringliteral}{"{}Failed creating Task \{task.task\_id\}: \{e\}"{}}, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{519     \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{520         \textcolor{keywordflow}{return}}
\DoxyCodeLine{521 }
\DoxyCodeLine{522 }

\end{DoxyCode}


References parla.\+common.\+array.\+clone\+\_\+here(), parla.\+utility.\+execute.\+get\+\_\+placement\+\_\+set\+\_\+from(), and parla.\+utility.\+execute.\+synthetic\+\_\+kernel().



Referenced by parla.\+utility.\+execute.\+execute\+\_\+tasks().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_aae6064a04ffee1ae1eac53d47d3c443b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_aae6064a04ffee1ae1eac53d47d3c443b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a413cb5485dfb3fe11168a7bb98d3cd66}\label{namespaceparla_1_1utility_1_1execute_a413cb5485dfb3fe11168a7bb98d3cd66}} 
\index{parla.utility.execute@{parla.utility.execute}!create\_task\_no\_data@{create\_task\_no\_data}}
\index{create\_task\_no\_data@{create\_task\_no\_data}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{create\_task\_no\_data()}{create\_task\_no\_data()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+create\+\_\+task\+\_\+no\+\_\+data (\begin{DoxyParamCaption}\item[{}]{task,  }\item[{}]{taskspaces,  }\item[{}]{config,  }\item[{}]{data\+\_\+list = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 264 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{264 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a413cb5485dfb3fe11168a7bb98d3cd66}{create\_task\_no\_data}}(task, taskspaces, config, data\_list=None):}
\DoxyCodeLine{265 }
\DoxyCodeLine{266     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{267         \textcolor{comment}{\# Task ID}}
\DoxyCodeLine{268         task\_idx = task.task\_id.task\_idx}
\DoxyCodeLine{269         taskspace = taskspaces[task.task\_id.taskspace]}
\DoxyCodeLine{270 }
\DoxyCodeLine{271         \textcolor{comment}{\# Dependency Info}}
\DoxyCodeLine{272         dependencies = [taskspaces[dep.taskspace][dep.task\_idx]}
\DoxyCodeLine{273                         \textcolor{keywordflow}{for} dep \textcolor{keywordflow}{in} task.task\_dependencies]}
\DoxyCodeLine{274 }
\DoxyCodeLine{275         \textcolor{comment}{\# Valid Placement Set}}
\DoxyCodeLine{276         num\_gpus = config.num\_gpus}
\DoxyCodeLine{277         placement\_key = task.task\_runtime.keys()}
\DoxyCodeLine{278         placement\_set\_str = list(placement\_key)}
\DoxyCodeLine{279         placement\_set = \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_ad50b926af45187a1fd4211017243f56f}{get\_placement\_set\_from}}(placement\_set\_str, num\_gpus)}
\DoxyCodeLine{280 }
\DoxyCodeLine{281         print(\textcolor{stringliteral}{"{}placement key: "{}}, placement\_key)}
\DoxyCodeLine{282         print(\textcolor{stringliteral}{"{}placement set str: "{}}, placement\_set\_str)}
\DoxyCodeLine{283         print(\textcolor{stringliteral}{"{}placement set: "{}}, placement\_set)}
\DoxyCodeLine{284 }
\DoxyCodeLine{285         \textcolor{comment}{\# TODO: This needs rework with Device support}}
\DoxyCodeLine{286         \textcolor{comment}{\# TODO(hc): This assumes that this task is a single task}}
\DoxyCodeLine{287         \textcolor{comment}{\#           and does not have multiple placement options.}}
\DoxyCodeLine{288         runtime\_info = task.task\_runtime[placement\_set\_str[0]]}
\DoxyCodeLine{289 }
\DoxyCodeLine{290         \textcolor{comment}{\# Task Constraints}}
\DoxyCodeLine{291         device\_fraction = runtime\_info.device\_fraction}
\DoxyCodeLine{292         \textcolor{keywordflow}{if} config.device\_fraction \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{293             device\_fraction = config.device\_fraction}
\DoxyCodeLine{294 }
\DoxyCodeLine{295         \textcolor{comment}{\# Task Work}}
\DoxyCodeLine{296         total\_time = runtime\_info.task\_time}
\DoxyCodeLine{297         gil\_accesses = runtime\_info.gil\_accesses}
\DoxyCodeLine{298         gil\_fraction = runtime\_info.gil\_fraction}
\DoxyCodeLine{299 }
\DoxyCodeLine{300         \textcolor{keywordflow}{if} config.task\_time \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{301             total\_time = config.task\_time}
\DoxyCodeLine{302 }
\DoxyCodeLine{303         \textcolor{keywordflow}{if} config.gil\_accesses \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{304             gil\_accesses = config.gil\_accesses}
\DoxyCodeLine{305 }
\DoxyCodeLine{306         \textcolor{keywordflow}{if} config.gil\_fraction \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{307             gil\_fraction = config.gil\_fraction}
\DoxyCodeLine{308 }
\DoxyCodeLine{309         \textcolor{comment}{\# print("{}task idx:"{}, task\_idx, "{} dependencies:"{}, dependencies, "{} vcu:"{}, device\_fraction,}}
\DoxyCodeLine{310         \textcolor{comment}{\#      "{} placement:"{}, placement\_set, "{} placement key:"{}, placement\_set\_str)}}
\DoxyCodeLine{311 }
\DoxyCodeLine{312         \textcolor{preprocessor}{@spawn(taskspace[task\_idx], dependencies=dependencies, vcus=device\_fraction, placement=[placement\_set])}}
\DoxyCodeLine{313         async \textcolor{keyword}{def }task\_func():}
\DoxyCodeLine{314             \textcolor{keywordflow}{if} config.verbose:}
\DoxyCodeLine{315                 print(f\textcolor{stringliteral}{"{}+\{task.task\_id\} Running"{}}, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{316 }
\DoxyCodeLine{317             elapsed = \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_aed85656b4da947051803f2b43f78bebb}{synthetic\_kernel}}(total\_time, gil\_fraction,}
\DoxyCodeLine{318                                        gil\_accesses, config=config)}
\DoxyCodeLine{319 }
\DoxyCodeLine{320             \textcolor{keywordflow}{if} config.verbose:}
\DoxyCodeLine{321                 print(f\textcolor{stringliteral}{"{}-\/\{task.task\_id\} Finished: \{elapsed\} seconds"{}}, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{322 }
\DoxyCodeLine{323     \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{324         print(f\textcolor{stringliteral}{"{}Failed creating Task \{task.task\_id\}: \{e\}"{}}, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{325     \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{326         \textcolor{keywordflow}{return}}
\DoxyCodeLine{327 }
\DoxyCodeLine{328 }

\end{DoxyCode}


References parla.\+utility.\+execute.\+get\+\_\+placement\+\_\+set\+\_\+from(), and parla.\+utility.\+execute.\+synthetic\+\_\+kernel().



Referenced by parla.\+utility.\+execute.\+execute\+\_\+tasks().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a413cb5485dfb3fe11168a7bb98d3cd66_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a413cb5485dfb3fe11168a7bb98d3cd66_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a0d98b269ad236b82a5ff24e9cc1fad5b}\label{namespaceparla_1_1utility_1_1execute_a0d98b269ad236b82a5ff24e9cc1fad5b}} 
\index{parla.utility.execute@{parla.utility.execute}!estimate\_frequency@{estimate\_frequency}}
\index{estimate\_frequency@{estimate\_frequency}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{estimate\_frequency()}{estimate\_frequency()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+estimate\+\_\+frequency (\begin{DoxyParamCaption}\item[{}]{n\+\_\+samples = {\ttfamily 10},  }\item[{}]{ticks = {\ttfamily 1900000000} }\end{DoxyParamCaption})}



Definition at line 49 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{49 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a0d98b269ad236b82a5ff24e9cc1fad5b}{estimate\_frequency}}(n\_samples=10, ticks=1900000000):}
\DoxyCodeLine{50     \textcolor{keyword}{import} cupy \textcolor{keyword}{as} cp}
\DoxyCodeLine{51     stream = cp.cuda.get\_current\_stream()}
\DoxyCodeLine{52     cycles = ticks}
\DoxyCodeLine{53     device\_id = 0}
\DoxyCodeLine{54 }
\DoxyCodeLine{55     print(f\textcolor{stringliteral}{"{}Starting GPU Frequency benchmark."{}})}
\DoxyCodeLine{56     times = np.zeros(n\_samples)}
\DoxyCodeLine{57     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(n\_samples):}
\DoxyCodeLine{58 }
\DoxyCodeLine{59         start = time.perf\_counter()}
\DoxyCodeLine{60         gpu\_bsleep\_nogil(device\_id, int(ticks), stream)}
\DoxyCodeLine{61         stream.synchronize()}
\DoxyCodeLine{62         end = time.perf\_counter()}
\DoxyCodeLine{63         print(f\textcolor{stringliteral}{"{}...collected frequency sample \{i\} "{}}, end-\/start)}
\DoxyCodeLine{64 }
\DoxyCodeLine{65         times[i] = (end-\/start)}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     times = times[2:]}
\DoxyCodeLine{68     elapsed = np.mean(times)}
\DoxyCodeLine{69     estimated\_speed = cycles/np.mean(times)}
\DoxyCodeLine{70     median\_speed = cycles/np.median(times)}
\DoxyCodeLine{71 }
\DoxyCodeLine{72     print(\textcolor{stringliteral}{"{}Finished Benchmark."{}})}
\DoxyCodeLine{73     print(\textcolor{stringliteral}{"{}Estimated GPU Frequency: Mean: "{}}, estimated\_speed,}
\DoxyCodeLine{74           \textcolor{stringliteral}{"{}, Median: "{}}, median\_speed, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{75     }
\DoxyCodeLine{76     \textcolor{keywordflow}{return} estimated\_speed}
\DoxyCodeLine{77 }
\DoxyCodeLine{78 }

\end{DoxyCode}


Referenced by parla.\+utility.\+execute.\+GPUInfo.\+update\+\_\+cycles().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a0d98b269ad236b82a5ff24e9cc1fad5b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a60754db99c2d6a2a1876af63d96e8c01}\label{namespaceparla_1_1utility_1_1execute_a60754db99c2d6a2a1876af63d96e8c01}} 
\index{parla.utility.execute@{parla.utility.execute}!execute\_graph@{execute\_graph}}
\index{execute\_graph@{execute\_graph}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{execute\_graph()}{execute\_graph()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+execute\+\_\+graph (\begin{DoxyParamCaption}\item[{Dict\mbox{[}int, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1DataInfo}{Data\+Info}}\mbox{]}}]{data\+\_\+config,  }\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]}}]{tasks,  }\item[{\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1RunConfig}{Run\+Config}}}]{run\+\_\+config,  }\item[{List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TimeSample}{Time\+Sample}}\mbox{]}}]{timing }\end{DoxyParamCaption})}



Definition at line 548 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{548 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a60754db99c2d6a2a1876af63d96e8c01}{execute\_graph}}(data\_config: Dict[int, DataInfo], tasks: Dict[TaskID, TaskInfo], run\_config: RunConfig, timing: List[TimeSample]):}
\DoxyCodeLine{549 }
\DoxyCodeLine{550     \textcolor{preprocessor}{@spawn(vcus=0)}}
\DoxyCodeLine{551     async \textcolor{keyword}{def }main\_task():}
\DoxyCodeLine{552 }
\DoxyCodeLine{553         graph\_times = []}
\DoxyCodeLine{554 }
\DoxyCodeLine{555         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(run\_config.inner\_iterations):}
\DoxyCodeLine{556             data\_list = \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_ad9b1c0da9f5296d064e811073bf5488f}{generate\_data}}(}
\DoxyCodeLine{557                 data\_config, run\_config.data\_scale, run\_config.movement\_type)}
\DoxyCodeLine{558 }
\DoxyCodeLine{559             \textcolor{comment}{\# Initialize task spaces}}
\DoxyCodeLine{560             taskspaces = \{\}}
\DoxyCodeLine{561 }
\DoxyCodeLine{562             \textcolor{keywordflow}{for} task, details \textcolor{keywordflow}{in} tasks.items():}
\DoxyCodeLine{563                 space\_name = details.task\_id.taskspace}
\DoxyCodeLine{564                 \textcolor{keywordflow}{if} space\_name \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} taskspaces:}
\DoxyCodeLine{565                     taskspaces[space\_name] = \mbox{\hyperlink{namespaceparla_a36622c3f1023c843a2106d70e9807281}{TaskSpace}}(space\_name)}
\DoxyCodeLine{566 }
\DoxyCodeLine{567             graph\_start\_t = time.perf\_counter()}
\DoxyCodeLine{568 }
\DoxyCodeLine{569             \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a43ff947748f8008c5e914e5a32f7dd60}{execute\_tasks}}(taskspaces, tasks, run\_config, data\_list=data\_list)}
\DoxyCodeLine{570 }
\DoxyCodeLine{571             \textcolor{keywordflow}{for} taskspace \textcolor{keywordflow}{in} taskspaces.values():}
\DoxyCodeLine{572                 await taskspace}
\DoxyCodeLine{573 }
\DoxyCodeLine{574             graph\_end\_t = time.perf\_counter()}
\DoxyCodeLine{575 }
\DoxyCodeLine{576             graph\_elapsed = graph\_end\_t -\/ graph\_start\_t}
\DoxyCodeLine{577             graph\_times.append(graph\_elapsed)}
\DoxyCodeLine{578 }
\DoxyCodeLine{579         graph\_times = np.asarray(graph\_times)}
\DoxyCodeLine{580         graph\_t = TimeSample(np.mean(graph\_times), np.median(graph\_times), np.std(}
\DoxyCodeLine{581             graph\_times), np.min(graph\_times), np.max(graph\_times), len(graph\_times))}
\DoxyCodeLine{582 }
\DoxyCodeLine{583         timing.append(graph\_t)}
\DoxyCodeLine{584 }
\DoxyCodeLine{585 }

\end{DoxyCode}


References parla.\+utility.\+execute.\+execute\+\_\+tasks(), parla.\+utility.\+execute.\+generate\+\_\+data(), and parla.\+Task\+Space.



Referenced by parla.\+utility.\+execute.\+run().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a60754db99c2d6a2a1876af63d96e8c01_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a60754db99c2d6a2a1876af63d96e8c01_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a43ff947748f8008c5e914e5a32f7dd60}\label{namespaceparla_1_1utility_1_1execute_a43ff947748f8008c5e914e5a32f7dd60}} 
\index{parla.utility.execute@{parla.utility.execute}!execute\_tasks@{execute\_tasks}}
\index{execute\_tasks@{execute\_tasks}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{execute\_tasks()}{execute\_tasks()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+execute\+\_\+tasks (\begin{DoxyParamCaption}\item[{}]{taskspaces,  }\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]}}]{tasks,  }\item[{\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1RunConfig}{Run\+Config}}}]{run\+\_\+config,  }\item[{}]{data\+\_\+list = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 523 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{523 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a43ff947748f8008c5e914e5a32f7dd60}{execute\_tasks}}(taskspaces, tasks: Dict[TaskID, TaskInfo], run\_config: RunConfig, data\_list=\textcolor{keywordtype}{None}):}
\DoxyCodeLine{524 }
\DoxyCodeLine{525     spawn\_start\_t = time.perf\_counter()}
\DoxyCodeLine{526 }
\DoxyCodeLine{527     \textcolor{comment}{\# Spawn tasks}}
\DoxyCodeLine{528     \textcolor{keywordflow}{for} task, details \textcolor{keywordflow}{in} tasks.items():}
\DoxyCodeLine{529         \textcolor{comment}{\# print("{}task:"{}, task, "{}, details:"{}, details)}}
\DoxyCodeLine{530         \textcolor{keywordflow}{if} run\_config.movement\_type == MovementType.NO\_MOVEMENT:}
\DoxyCodeLine{531             \textcolor{comment}{\# print("{}No data movement"{})}}
\DoxyCodeLine{532             \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a413cb5485dfb3fe11168a7bb98d3cd66}{create\_task\_no\_data}}(details, taskspaces,}
\DoxyCodeLine{533                                 config=run\_config, data\_list=data\_list)}
\DoxyCodeLine{534         \textcolor{keywordflow}{elif} run\_config.movement\_type == MovementType.EAGER\_MOVEMENT:}
\DoxyCodeLine{535             \textcolor{comment}{\# print("{}Eager data movement"{})}}
\DoxyCodeLine{536             \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a1e1558616a61e33a389de419efc0f4fa}{create\_task\_eager\_data}}(details, taskspaces,}
\DoxyCodeLine{537                                    config=run\_config, data\_list=data\_list)}
\DoxyCodeLine{538         \textcolor{keywordflow}{elif} run\_config.movement\_type == MovementType.LAZY\_MOVEMENT:}
\DoxyCodeLine{539             \textcolor{comment}{\# print("{}Lazy data movement"{})}}
\DoxyCodeLine{540             \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_aae6064a04ffee1ae1eac53d47d3c443b}{create\_task\_lazy\_data}}(details, taskspaces,}
\DoxyCodeLine{541                                   config=run\_config, data\_list=data\_list)}
\DoxyCodeLine{542 }
\DoxyCodeLine{543     spawn\_end\_t = time.perf\_counter()}
\DoxyCodeLine{544 }
\DoxyCodeLine{545     \textcolor{keywordflow}{return} taskspaces}
\DoxyCodeLine{546 }
\DoxyCodeLine{547 }

\end{DoxyCode}


References parla.\+utility.\+execute.\+create\+\_\+task\+\_\+eager\+\_\+data(), parla.\+utility.\+execute.\+create\+\_\+task\+\_\+lazy\+\_\+data(), and parla.\+utility.\+execute.\+create\+\_\+task\+\_\+no\+\_\+data().



Referenced by parla.\+utility.\+execute.\+execute\+\_\+graph().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a43ff947748f8008c5e914e5a32f7dd60_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a43ff947748f8008c5e914e5a32f7dd60_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_ad9b1c0da9f5296d064e811073bf5488f}\label{namespaceparla_1_1utility_1_1execute_ad9b1c0da9f5296d064e811073bf5488f}} 
\index{parla.utility.execute@{parla.utility.execute}!generate\_data@{generate\_data}}
\index{generate\_data@{generate\_data}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{generate\_data()}{generate\_data()}}
{\footnotesize\ttfamily  List\mbox{[}np.\+ndarray\mbox{]} parla.\+utility.\+execute.\+generate\+\_\+data (\begin{DoxyParamCaption}\item[{Dict\mbox{[}int, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1DataInfo}{Data\+Info}}\mbox{]}}]{data\+\_\+config,  }\item[{float}]{data\+\_\+scale,  }\item[{}]{data\+\_\+movement\+\_\+type }\end{DoxyParamCaption})}



Definition at line 126 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{126 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_ad9b1c0da9f5296d064e811073bf5488f}{generate\_data}}(data\_config: Dict[int, DataInfo], data\_scale: float, data\_movement\_type) -\/> List[np.ndarray]:}
\DoxyCodeLine{127     value = 0}
\DoxyCodeLine{128     data\_list = []}
\DoxyCodeLine{129     \textcolor{comment}{\# If data does not exist, this loop will not be iterated.}}
\DoxyCodeLine{130     \textcolor{keywordflow}{for} data\_idx \textcolor{keywordflow}{in} data\_config:}
\DoxyCodeLine{131 }
\DoxyCodeLine{132         data\_info = data\_config[data\_idx]}
\DoxyCodeLine{133 }
\DoxyCodeLine{134         data\_location = data\_info.location}
\DoxyCodeLine{135         data\_size = data\_info.size}
\DoxyCodeLine{136 }
\DoxyCodeLine{137         \textcolor{keywordflow}{if} data\_location == DeviceType.CPU\_DEVICE:}
\DoxyCodeLine{138             data = np.zeros([data\_size, data\_scale],}
\DoxyCodeLine{139                             dtype=np.float32) + value + 1}
\DoxyCodeLine{140             data\_list.append(data)}
\DoxyCodeLine{141 }
\DoxyCodeLine{142         \textcolor{keywordflow}{elif} data\_location > DeviceType.ANY\_GPU\_DEVICE:}
\DoxyCodeLine{143             \textcolor{keyword}{import} cupy \textcolor{keyword}{as} cp}
\DoxyCodeLine{144             \textcolor{keyword}{with} cp.cuda.Device(data\_location -\/ 1) \textcolor{keyword}{as} device:}
\DoxyCodeLine{145                 data = cp.zeros([data\_size, data\_scale],}
\DoxyCodeLine{146                                 dtyp=np.float32) + value + 1}
\DoxyCodeLine{147                 device.synchronize()}
\DoxyCodeLine{148                 data\_list.append(data)}
\DoxyCodeLine{149         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{150             \textcolor{keywordflow}{raise} NotImplementedError(\textcolor{stringliteral}{"{}This device is not supported for data"{}})}
\DoxyCodeLine{151         value += 1}
\DoxyCodeLine{152 }
\DoxyCodeLine{153         }
\DoxyCodeLine{154     \textcolor{keywordflow}{return} data\_list}
\DoxyCodeLine{155 }
\DoxyCodeLine{156 }
\DoxyCodeLine{157 \textcolor{comment}{\#TODO(wlr): Rewrite this supporting multiple device placement.}}

\end{DoxyCode}


References parla.\+utility.\+execute.\+make\+\_\+parrays().



Referenced by parla.\+utility.\+execute.\+execute\+\_\+graph().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_ad9b1c0da9f5296d064e811073bf5488f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_ad9b1c0da9f5296d064e811073bf5488f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_ad50b926af45187a1fd4211017243f56f}\label{namespaceparla_1_1utility_1_1execute_ad50b926af45187a1fd4211017243f56f}} 
\index{parla.utility.execute@{parla.utility.execute}!get\_placement\_set\_from@{get\_placement\_set\_from}}
\index{get\_placement\_set\_from@{get\_placement\_set\_from}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{get\_placement\_set\_from()}{get\_placement\_set\_from()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+get\+\_\+placement\+\_\+set\+\_\+from (\begin{DoxyParamCaption}\item[{}]{ps\+\_\+str\+\_\+set,  }\item[{}]{num\+\_\+gpus }\end{DoxyParamCaption})}



Definition at line 100 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{100 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_ad50b926af45187a1fd4211017243f56f}{get\_placement\_set\_from}}(ps\_str\_set, num\_gpus):}
\DoxyCodeLine{101     ps\_set = []}
\DoxyCodeLine{102     \textcolor{comment}{\# TODO(hc): This assumes a single device task.}}
\DoxyCodeLine{103     \textcolor{keywordflow}{for} ps\_str \textcolor{keywordflow}{in} ps\_str\_set[0]:}
\DoxyCodeLine{104         dev\_type = int(ps\_str)}
\DoxyCodeLine{105         \textcolor{keywordflow}{if} dev\_type == DeviceType.ANY\_GPU\_DEVICE:}
\DoxyCodeLine{106             ps\_set.append(gpu)}
\DoxyCodeLine{107         \textcolor{keywordflow}{elif} dev\_type == DeviceType.CPU\_DEVICE:}
\DoxyCodeLine{108             ps\_set.append(cpu)}
\DoxyCodeLine{109         \textcolor{comment}{\# TODO(hc): just assume that system has 4 gpus.}}
\DoxyCodeLine{110         \textcolor{keywordflow}{elif} dev\_type == DeviceType.GPU\_0:}
\DoxyCodeLine{111             ps\_set.append(\mbox{\hyperlink{namespaceparla_1_1cython_1_1device__manager_af1099b0145d8f42a9cf040ef2b4b67cf}{gpu}}(0))}
\DoxyCodeLine{112         \textcolor{keywordflow}{elif} dev\_type == DeviceType.GPU\_1:}
\DoxyCodeLine{113             ps\_set.append(\mbox{\hyperlink{namespaceparla_1_1cython_1_1device__manager_af1099b0145d8f42a9cf040ef2b4b67cf}{gpu}}(1))}
\DoxyCodeLine{114         \textcolor{keywordflow}{elif} dev\_type == DeviceType.GPU\_2:}
\DoxyCodeLine{115             ps\_set.append(\mbox{\hyperlink{namespaceparla_1_1cython_1_1device__manager_af1099b0145d8f42a9cf040ef2b4b67cf}{gpu}}(2))}
\DoxyCodeLine{116         \textcolor{keywordflow}{elif} dev\_type == DeviceType.GPU\_3:}
\DoxyCodeLine{117             ps\_set.append(\mbox{\hyperlink{namespaceparla_1_1cython_1_1device__manager_af1099b0145d8f42a9cf040ef2b4b67cf}{gpu}}(3))}
\DoxyCodeLine{118         \textcolor{keywordflow}{elif} dev\_type >= DeviceType.USER\_CHOSEN\_DEVICE:}
\DoxyCodeLine{119             gpu\_idx = (dev\_type -\/ DeviceType.USER\_CHOSEN\_DEVICE) \% num\_gpus}
\DoxyCodeLine{120             ps\_set.append(\mbox{\hyperlink{namespaceparla_1_1cython_1_1device__manager_af1099b0145d8f42a9cf040ef2b4b67cf}{gpu}}(gpu\_idx))}
\DoxyCodeLine{121         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{122             \textcolor{keywordflow}{raise} ValueError(\textcolor{stringliteral}{"{}Does not support this placement:"{}}, dev\_type)}
\DoxyCodeLine{123     \textcolor{keywordflow}{return} tuple(ps\_set)}
\DoxyCodeLine{124 }
\DoxyCodeLine{125 }

\end{DoxyCode}


References parla.\+cython.\+device\+\_\+manager.\+gpu.



Referenced by parla.\+utility.\+execute.\+create\+\_\+task\+\_\+eager\+\_\+data(), parla.\+utility.\+execute.\+create\+\_\+task\+\_\+lazy\+\_\+data(), and parla.\+utility.\+execute.\+create\+\_\+task\+\_\+no\+\_\+data().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_ad50b926af45187a1fd4211017243f56f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a59276b82194374cbbefddea28d9a5fb7}\label{namespaceparla_1_1utility_1_1execute_a59276b82194374cbbefddea28d9a5fb7}} 
\index{parla.utility.execute@{parla.utility.execute}!make\_parrays@{make\_parrays}}
\index{make\_parrays@{make\_parrays}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{make\_parrays()}{make\_parrays()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+make\+\_\+parrays (\begin{DoxyParamCaption}\item[{}]{data\+\_\+list }\end{DoxyParamCaption})}



Definition at line 42 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{42 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a59276b82194374cbbefddea28d9a5fb7}{make\_parrays}}(data\_list):}
\DoxyCodeLine{43     parray\_list = list()}
\DoxyCodeLine{44     \textcolor{keywordflow}{for} i, data \textcolor{keywordflow}{in} enumerate(data\_list):}
\DoxyCodeLine{45         parray\_list.append( \mbox{\hyperlink{namespaceparla_1_1common_1_1parray_1_1from__data_a8632d3fcf2de6f3858522c7730a85fc2}{asarray}}(data, name=\textcolor{stringliteral}{"{}data"{}}+str(i)) )}
\DoxyCodeLine{46     \textcolor{keywordflow}{return} parray\_list}
\DoxyCodeLine{47 }
\DoxyCodeLine{48 }

\end{DoxyCode}


References parla.\+common.\+parray.\+from\+\_\+data.\+asarray().



Referenced by parla.\+utility.\+execute.\+generate\+\_\+data().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a59276b82194374cbbefddea28d9a5fb7_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a59276b82194374cbbefddea28d9a5fb7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a8a7b4a0f22674fe7982b3167eb89adcd}\label{namespaceparla_1_1utility_1_1execute_a8a7b4a0f22674fe7982b3167eb89adcd}} 
\index{parla.utility.execute@{parla.utility.execute}!run@{run}}
\index{run@{run}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TimeSample}{Time\+Sample}} parla.\+utility.\+execute.\+run (\begin{DoxyParamCaption}\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskInfo}{Task\+Info}}\mbox{]}}]{tasks,  }\item[{Dict\mbox{[}int, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1DataInfo}{Data\+Info}}\mbox{]} }]{data\+\_\+config = {\ttfamily None},  }\item[{\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1RunConfig}{Run\+Config}} }]{run\+\_\+config = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 586 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{586 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a8a7b4a0f22674fe7982b3167eb89adcd}{run}}(tasks: Dict[TaskID, TaskInfo], data\_config: Dict[int, DataInfo] = \textcolor{keywordtype}{None}, run\_config: RunConfig = \textcolor{keywordtype}{None}) -\/> TimeSample:}
\DoxyCodeLine{587 }
\DoxyCodeLine{588     \textcolor{keywordflow}{if} run\_config \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{589         run\_config = RunConfig(outer\_iterations=1, inner\_iterations=1,}
\DoxyCodeLine{590                                verbose=\textcolor{keyword}{False}, threads=1, data\_scale=1)}
\DoxyCodeLine{591 }
\DoxyCodeLine{592     timing = []}
\DoxyCodeLine{593 }
\DoxyCodeLine{594     \textcolor{keywordflow}{for} outer \textcolor{keywordflow}{in} range(run\_config.outer\_iterations):}
\DoxyCodeLine{595 }
\DoxyCodeLine{596         outer\_start\_t = time.perf\_counter()}
\DoxyCodeLine{597 }
\DoxyCodeLine{598         \textcolor{keyword}{with} Parla(logfile=run\_config.logfile):}
\DoxyCodeLine{599             internal\_start\_t = time.perf\_counter()}
\DoxyCodeLine{600             \mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a60754db99c2d6a2a1876af63d96e8c01}{execute\_graph}}(data\_config, tasks, run\_config, timing)}
\DoxyCodeLine{601             internal\_end\_t = time.perf\_counter()}
\DoxyCodeLine{602 }
\DoxyCodeLine{603         outer\_end\_t = time.perf\_counter()}
\DoxyCodeLine{604 }
\DoxyCodeLine{605         parla\_total\_elapsed = outer\_end\_t -\/ outer\_start\_t}
\DoxyCodeLine{606         parla\_internal\_elapsed = internal\_end\_t -\/ internal\_start\_t}
\DoxyCodeLine{607 }
\DoxyCodeLine{608     \textcolor{keywordflow}{return} timing[0]}
\DoxyCodeLine{609 }
\DoxyCodeLine{610 }

\end{DoxyCode}


References parla.\+utility.\+execute.\+execute\+\_\+graph().



Referenced by parla.\+cython.\+core.\+Py\+Inner\+Scheduler.\+\_\+\+\_\+dealloc\+\_\+\+\_\+().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a8a7b4a0f22674fe7982b3167eb89adcd_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_a8a7b4a0f22674fe7982b3167eb89adcd_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_aed85656b4da947051803f2b43f78bebb}\label{namespaceparla_1_1utility_1_1execute_aed85656b4da947051803f2b43f78bebb}} 
\index{parla.utility.execute@{parla.utility.execute}!synthetic\_kernel@{synthetic\_kernel}}
\index{synthetic\_kernel@{synthetic\_kernel}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{synthetic\_kernel()}{synthetic\_kernel()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+synthetic\+\_\+kernel (\begin{DoxyParamCaption}\item[{int}]{total\+\_\+time,  }\item[{Union\mbox{[}Fraction, float\mbox{]}}]{gil\+\_\+fraction,  }\item[{int}]{gil\+\_\+accesses,  }\item[{\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1RunConfig}{Run\+Config}}}]{config }\end{DoxyParamCaption})}

\begin{DoxyVerb}A simple synthetic kernel that simulates a task that takes a given amount of time
and accesses the GIL a given number of times. The GIL is accessed in a fraction of
the total time given.
\end{DoxyVerb}
 

Definition at line 179 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{179 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_aed85656b4da947051803f2b43f78bebb}{synthetic\_kernel}}(total\_time: int, gil\_fraction: Union[Fraction, float], gil\_accesses: int, config: RunConfig):}
\DoxyCodeLine{180     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{181 \textcolor{stringliteral}{    A simple synthetic kernel that simulates a task that takes a given amount of time}}
\DoxyCodeLine{182 \textcolor{stringliteral}{    and accesses the GIL a given number of times. The GIL is accessed in a fraction of}}
\DoxyCodeLine{183 \textcolor{stringliteral}{    the total time given.}}
\DoxyCodeLine{184 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{185     \textcolor{keywordflow}{if} config.verbose:}
\DoxyCodeLine{186         task\_internal\_start\_t = time.perf\_counter()}
\DoxyCodeLine{187 }
\DoxyCodeLine{188     \textcolor{comment}{\# Simulate task work}}
\DoxyCodeLine{189     kernel\_time = total\_time / gil\_accesses}
\DoxyCodeLine{190     free\_time = kernel\_time * (1 -\/ gil\_fraction)}
\DoxyCodeLine{191     gil\_time = kernel\_time * gil\_fraction}
\DoxyCodeLine{192 }
\DoxyCodeLine{193     \textcolor{comment}{\#print(f"{}gil accesses: \{gil\_accesses\}, free time: \{free\_time\}, gil time: \{gil\_time\}"{}, flush=True)}}
\DoxyCodeLine{194 }
\DoxyCodeLine{195     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(gil\_accesses):}
\DoxyCodeLine{196         free\_sleep(free\_time)}
\DoxyCodeLine{197         lock\_sleep(gil\_time)}
\DoxyCodeLine{198 }
\DoxyCodeLine{199     \textcolor{keywordflow}{if} config.verbose:}
\DoxyCodeLine{200         task\_internal\_end\_t = time.perf\_counter()}
\DoxyCodeLine{201         task\_internal\_duration = task\_internal\_end\_t -\/ task\_internal\_start\_t}
\DoxyCodeLine{202         \textcolor{keywordflow}{return} task\_internal\_duration}
\DoxyCodeLine{203 }
\DoxyCodeLine{204     \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}
\DoxyCodeLine{205 }
\DoxyCodeLine{206 }
\DoxyCodeLine{207 \textcolor{preprocessor}{@synthetic\_kernel.variant(architecture=gpu)}}

\end{DoxyCode}


Referenced by parla.\+utility.\+execute.\+create\+\_\+task\+\_\+eager\+\_\+data(), parla.\+utility.\+execute.\+create\+\_\+task\+\_\+lazy\+\_\+data(), and parla.\+utility.\+execute.\+create\+\_\+task\+\_\+no\+\_\+data().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_aed85656b4da947051803f2b43f78bebb_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_aba0a90f5fe8ebd1c4d8dba72186a853f}\label{namespaceparla_1_1utility_1_1execute_aba0a90f5fe8ebd1c4d8dba72186a853f}} 
\index{parla.utility.execute@{parla.utility.execute}!synthetic\_kernel\_gpu@{synthetic\_kernel\_gpu}}
\index{synthetic\_kernel\_gpu@{synthetic\_kernel\_gpu}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{synthetic\_kernel\_gpu()}{synthetic\_kernel\_gpu()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+synthetic\+\_\+kernel\+\_\+gpu (\begin{DoxyParamCaption}\item[{int}]{total\+\_\+time,  }\item[{Union\mbox{[}Fraction, float\mbox{]}}]{gil\+\_\+fraction,  }\item[{int}]{gil\+\_\+accesses,  }\item[{\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1RunConfig}{Run\+Config}}}]{config }\end{DoxyParamCaption})}

\begin{DoxyVerb}A simple synthetic kernel that simulates a task that takes a given amount of time
and accesses the GIL a given number of times. The GIL is accessed in a fraction of
the total time given.
\end{DoxyVerb}
 

Definition at line 208 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{208 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_aba0a90f5fe8ebd1c4d8dba72186a853f}{synthetic\_kernel\_gpu}}(total\_time: int, gil\_fraction: Union[Fraction, float], gil\_accesses: int, config: RunConfig):}
\DoxyCodeLine{209     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{210 \textcolor{stringliteral}{    A simple synthetic kernel that simulates a task that takes a given amount of time}}
\DoxyCodeLine{211 \textcolor{stringliteral}{    and accesses the GIL a given number of times. The GIL is accessed in a fraction of}}
\DoxyCodeLine{212 \textcolor{stringliteral}{    the total time given.}}
\DoxyCodeLine{213 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{214     \textcolor{keywordflow}{if} config.verbose:}
\DoxyCodeLine{215         task\_internal\_start\_t = time.perf\_counter()}
\DoxyCodeLine{216 }
\DoxyCodeLine{217     \textcolor{comment}{\# Simulate task work}}
\DoxyCodeLine{218     cycles\_per\_second = \_GPUInfo.get\_cycles\_per\_second()}
\DoxyCodeLine{219     kernel\_time = total\_time / gil\_accesses}
\DoxyCodeLine{220 }
\DoxyCodeLine{221     free\_time = kernel\_time * (1 -\/ gil\_fraction)}
\DoxyCodeLine{222     gil\_time = kernel\_time * gil\_fraction}
\DoxyCodeLine{223 }
\DoxyCodeLine{224     free\_ticks = int((free\_time/(10**6))*cycles\_per\_second)}
\DoxyCodeLine{225     gil\_ticks = int((gil\_time/(10**6))*cycles\_per\_second)}
\DoxyCodeLine{226 }
\DoxyCodeLine{227     \textcolor{comment}{\# print(f"{}gil accesses: \{gil\_accesses\}, free time: \{free\_time\}, gil time: \{gil\_time\}"{})}}
\DoxyCodeLine{228     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(gil\_accesses):}
\DoxyCodeLine{229         print(dev\_id[0]().device\_id, parla\_cuda\_stream.stream, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{230         gpu\_bsleep\_nogil(dev\_id[0]().device\_id, int(}
\DoxyCodeLine{231             ticks), parla\_cuda\_stream.stream)}
\DoxyCodeLine{232         parla\_cuda\_stream.stream.synchronize()}
\DoxyCodeLine{233         lock\_sleep(gil\_time)}
\DoxyCodeLine{234 }
\DoxyCodeLine{235     context = \mbox{\hyperlink{namespaceparla_1_1common_1_1globals_a984f8b4c44f904aec08e3fe4cbcab416}{get\_current\_context}}()}
\DoxyCodeLine{236 }
\DoxyCodeLine{237     \textcolor{keywordflow}{for} device \textcolor{keywordflow}{in} context.loop():}
\DoxyCodeLine{238         device\_idx = device.gpu\_id}
\DoxyCodeLine{239         stream = device.cupy\_stream }
\DoxyCodeLine{240 }
\DoxyCodeLine{241         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(gil\_accesses):}
\DoxyCodeLine{242 }
\DoxyCodeLine{243             gpu\_bsleep\_nogil(device\_idx, free\_ticks, stream)}
\DoxyCodeLine{244             gpu\_bsleep\_gil(device\_idx, gil\_ticks, stream)}
\DoxyCodeLine{245 }
\DoxyCodeLine{246             \textcolor{keywordflow}{if} config.inner\_sync:}
\DoxyCodeLine{247                 stream.synchronize()}
\DoxyCodeLine{248     }
\DoxyCodeLine{249     \textcolor{keywordflow}{if} config.outer\_sync:}
\DoxyCodeLine{250         context.synchronize()}
\DoxyCodeLine{251 }
\DoxyCodeLine{252     \textcolor{keywordflow}{if} config.verbose:}
\DoxyCodeLine{253         task\_internal\_end\_t = time.perf\_counter()}
\DoxyCodeLine{254         task\_internal\_duration = task\_internal\_end\_t -\/ task\_internal\_start\_t}
\DoxyCodeLine{255         \textcolor{keywordflow}{return} task\_internal\_duration}
\DoxyCodeLine{256 }
\DoxyCodeLine{257     task\_internal\_end\_t = time.perf\_counter()}
\DoxyCodeLine{258     task\_internal\_duration = task\_internal\_end\_t -\/ task\_internal\_start\_t}
\DoxyCodeLine{259     \textcolor{comment}{\# print("{}Wall clock duration:"{}, task\_internal\_duration, "{}, user passed total time:"{}, total\_time, "{}, ticks:"{}, ticks , flush=True)}}
\DoxyCodeLine{260 }
\DoxyCodeLine{261     \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}
\DoxyCodeLine{262 }
\DoxyCodeLine{263 }

\end{DoxyCode}


References parla.\+common.\+globals.\+get\+\_\+current\+\_\+context().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceparla_1_1utility_1_1execute_aba0a90f5fe8ebd1c4d8dba72186a853f_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a50e9b92625105e162489118fb319f9e0}\label{namespaceparla_1_1utility_1_1execute_a50e9b92625105e162489118fb319f9e0}} 
\index{parla.utility.execute@{parla.utility.execute}!timeout@{timeout}}
\index{timeout@{timeout}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{timeout()}{timeout()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+timeout (\begin{DoxyParamCaption}\item[{}]{seconds\+\_\+before\+\_\+timeout }\end{DoxyParamCaption})}

\begin{DoxyVerb}Decorator that raises an exception if the function takes longer than seconds_before_timeout to execute.
https://stackoverflow.com/questions/21827874/timeout-a-function-windows
\end{DoxyVerb}
 

Definition at line 721 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{721 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a50e9b92625105e162489118fb319f9e0}{timeout}}(seconds\_before\_timeout):}
\DoxyCodeLine{722     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{723 \textcolor{stringliteral}{    Decorator that raises an exception if the function takes longer than seconds\_before\_timeout to execute.}}
\DoxyCodeLine{724 \textcolor{stringliteral}{    https://stackoverflow.com/questions/21827874/timeout-\/a-\/function-\/windows}}
\DoxyCodeLine{725 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{726     \textcolor{keyword}{def }deco(func):}
\DoxyCodeLine{727         \textcolor{preprocessor}{@functools.wraps(func)}}
\DoxyCodeLine{728         \textcolor{keyword}{def }wrapper(*args, **kwargs):}
\DoxyCodeLine{729             res = [Exception(\textcolor{stringliteral}{'function [\%s] timeout [\%s seconds] exceeded!'} \% (}
\DoxyCodeLine{730                 func.\_\_name\_\_, seconds\_before\_timeout))]}
\DoxyCodeLine{731 }
\DoxyCodeLine{732             \textcolor{keyword}{def }newFunc():}
\DoxyCodeLine{733                 \textcolor{keywordflow}{try}:}
\DoxyCodeLine{734                     res[0] = func(*args, **kwargs)}
\DoxyCodeLine{735                 \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{736                     res[0] = e}
\DoxyCodeLine{737             t = Propagate(target=newFunc)}
\DoxyCodeLine{738             t.daemon = \textcolor{keyword}{True}}
\DoxyCodeLine{739             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{740                 t.start()}
\DoxyCodeLine{741                 t.join(seconds\_before\_timeout)}
\DoxyCodeLine{742                 r = t.value}
\DoxyCodeLine{743             \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{744                 print(\textcolor{stringliteral}{'Unhandled exception in Propagate wrapper'}, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{745                 \textcolor{keywordflow}{raise} e}
\DoxyCodeLine{746             ret = res[0]}
\DoxyCodeLine{747             \textcolor{keywordflow}{if} isinstance(ret, BaseException):}
\DoxyCodeLine{748                 \textcolor{keywordflow}{raise} ret}
\DoxyCodeLine{749             \textcolor{keywordflow}{return} ret}
\DoxyCodeLine{750         \textcolor{keywordflow}{return} wrapper}
\DoxyCodeLine{751     \textcolor{keywordflow}{return} deco}
\DoxyCodeLine{752 }
\DoxyCodeLine{753 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_ae075017f43eee3460ed598223f75b4b3}\label{namespaceparla_1_1utility_1_1execute_ae075017f43eee3460ed598223f75b4b3}} 
\index{parla.utility.execute@{parla.utility.execute}!verify\_complete@{verify\_complete}}
\index{verify\_complete@{verify\_complete}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{verify\_complete()}{verify\_complete()}}
{\footnotesize\ttfamily  bool parla.\+utility.\+execute.\+verify\+\_\+complete (\begin{DoxyParamCaption}\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]}}]{log\+\_\+graph,  }\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]}}]{truth\+\_\+graph }\end{DoxyParamCaption})}

\begin{DoxyVerb}Verify that all tasks in the truth graph have completed exceution in the log graph.
\end{DoxyVerb}
 

Definition at line 646 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{646 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_ae075017f43eee3460ed598223f75b4b3}{verify\_complete}}(log\_graph: Dict[TaskID, List[TaskID]], truth\_graph: Dict[TaskID, List[TaskID]]) -\/> bool:}
\DoxyCodeLine{647     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{648 \textcolor{stringliteral}{    Verify that all tasks in the truth graph have completed exceution in the log graph.}}
\DoxyCodeLine{649 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{650 }
\DoxyCodeLine{651     \textcolor{keywordflow}{for} task \textcolor{keywordflow}{in} truth\_graph:}
\DoxyCodeLine{652         \textcolor{keywordflow}{if} task \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} log\_graph:}
\DoxyCodeLine{653             print(f\textcolor{stringliteral}{"{}Task \{task\} not in log graph"{}})}
\DoxyCodeLine{654             \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{655 }
\DoxyCodeLine{656     \textcolor{keywordflow}{return} \textcolor{keyword}{True}}
\DoxyCodeLine{657 }
\DoxyCodeLine{658 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a21f8962cb471483e18d353cfd071f601}\label{namespaceparla_1_1utility_1_1execute_a21f8962cb471483e18d353cfd071f601}} 
\index{parla.utility.execute@{parla.utility.execute}!verify\_dependencies@{verify\_dependencies}}
\index{verify\_dependencies@{verify\_dependencies}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{verify\_dependencies()}{verify\_dependencies()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+verify\+\_\+dependencies (\begin{DoxyParamCaption}\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]}}]{log\+\_\+graph,  }\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]}}]{truth\+\_\+graph }\end{DoxyParamCaption})}

\begin{DoxyVerb}Verify that all dependencies in the truth graph have completed execution in the log graph.
\end{DoxyVerb}
 

Definition at line 628 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{628 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a21f8962cb471483e18d353cfd071f601}{verify\_dependencies}}(log\_graph: Dict[TaskID, List[TaskID]], truth\_graph: Dict[TaskID, List[TaskID]]):}
\DoxyCodeLine{629     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{630 \textcolor{stringliteral}{    Verify that all dependencies in the truth graph have completed execution in the log graph.}}
\DoxyCodeLine{631 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{632 }
\DoxyCodeLine{633     \textcolor{keywordflow}{for} task \textcolor{keywordflow}{in} truth\_graph:}
\DoxyCodeLine{634 }
\DoxyCodeLine{635         details = truth\_graph[task]}
\DoxyCodeLine{636 }
\DoxyCodeLine{637         \textcolor{keywordflow}{for} dependency \textcolor{keywordflow}{in} details.task\_dependencies:}
\DoxyCodeLine{638             \textcolor{keywordflow}{if} dependency \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} log\_graph:}
\DoxyCodeLine{639                 print(}
\DoxyCodeLine{640                     f\textcolor{stringliteral}{"{}Dependency \{dependency\} of task \{task\} not in log graph"{}})}
\DoxyCodeLine{641                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{642 }
\DoxyCodeLine{643     \textcolor{keywordflow}{return} \textcolor{keyword}{True}}
\DoxyCodeLine{644 }
\DoxyCodeLine{645 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a40d72166f4771e543dc1ca324bb26244}\label{namespaceparla_1_1utility_1_1execute_a40d72166f4771e543dc1ca324bb26244}} 
\index{parla.utility.execute@{parla.utility.execute}!verify\_ntasks@{verify\_ntasks}}
\index{verify\_ntasks@{verify\_ntasks}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{verify\_ntasks()}{verify\_ntasks()}}
{\footnotesize\ttfamily def parla.\+utility.\+execute.\+verify\+\_\+ntasks (\begin{DoxyParamCaption}\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskTime}{Task\+Time}}\mbox{]}}]{log\+\_\+times,  }\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]}}]{truth\+\_\+graph }\end{DoxyParamCaption})}

\begin{DoxyVerb}Verify that the number of tasks in the log graph is the same as the number of tasks in the truth graph.
\end{DoxyVerb}
 

Definition at line 680 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{680 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a40d72166f4771e543dc1ca324bb26244}{verify\_ntasks}}(log\_times: Dict[TaskID, TaskTime], truth\_graph: Dict[TaskID, List[TaskID]]):}
\DoxyCodeLine{681     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{682 \textcolor{stringliteral}{    Verify that the number of tasks in the log graph is the same as the number of tasks in the truth graph.}}
\DoxyCodeLine{683 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{684 }
\DoxyCodeLine{685     \textcolor{keywordflow}{if} len(log\_times) != len(truth\_graph)+1:}
\DoxyCodeLine{686         print(}
\DoxyCodeLine{687             f\textcolor{stringliteral}{"{}Number of tasks in log graph (\{len(log\_times)\}) does not match number of tasks in truth graph (\{len(truth\_graph)\})"{}})}
\DoxyCodeLine{688         \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{689 }
\DoxyCodeLine{690     \textcolor{keywordflow}{return} \textcolor{keyword}{True}}
\DoxyCodeLine{691 }
\DoxyCodeLine{692 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a3557769ccde07f9ad874f8d684ee5fd2}\label{namespaceparla_1_1utility_1_1execute_a3557769ccde07f9ad874f8d684ee5fd2}} 
\index{parla.utility.execute@{parla.utility.execute}!verify\_order@{verify\_order}}
\index{verify\_order@{verify\_order}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{verify\_order()}{verify\_order()}}
{\footnotesize\ttfamily  bool parla.\+utility.\+execute.\+verify\+\_\+order (\begin{DoxyParamCaption}\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskTime}{Task\+Time}}\mbox{]}}]{log\+\_\+times,  }\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]}}]{truth\+\_\+graph }\end{DoxyParamCaption})}

\begin{DoxyVerb}Verify that all tasks have run in the correct order in the log graph.
\end{DoxyVerb}
 

Definition at line 611 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{611 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a3557769ccde07f9ad874f8d684ee5fd2}{verify\_order}}(log\_times: Dict[TaskID, TaskTime], truth\_graph: Dict[TaskID, List[TaskID]]) -\/> bool:}
\DoxyCodeLine{612     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{613 \textcolor{stringliteral}{    Verify that all tasks have run in the correct order in the log graph.}}
\DoxyCodeLine{614 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{615 }
\DoxyCodeLine{616     \textcolor{keywordflow}{for} task \textcolor{keywordflow}{in} truth\_graph:}
\DoxyCodeLine{617 }
\DoxyCodeLine{618         details = truth\_graph[task]}
\DoxyCodeLine{619 }
\DoxyCodeLine{620         \textcolor{keywordflow}{for} dependency \textcolor{keywordflow}{in} details.task\_dependencies:}
\DoxyCodeLine{621             \textcolor{keywordflow}{if} log\_times[task].start\_t < log\_times[dependency].end\_t:}
\DoxyCodeLine{622                 print(\textcolor{stringliteral}{"{}Task \{task\} started before dependency \{dependency\}"{}})}
\DoxyCodeLine{623                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{624 }
\DoxyCodeLine{625     \textcolor{keywordflow}{return} \textcolor{keyword}{True}}
\DoxyCodeLine{626 }
\DoxyCodeLine{627 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_aab877c9e9e838f5e2acfcfa72c8fdf84}\label{namespaceparla_1_1utility_1_1execute_aab877c9e9e838f5e2acfcfa72c8fdf84}} 
\index{parla.utility.execute@{parla.utility.execute}!verify\_states@{verify\_states}}
\index{verify\_states@{verify\_states}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{verify\_states()}{verify\_states()}}
{\footnotesize\ttfamily  bool parla.\+utility.\+execute.\+verify\+\_\+states (\begin{DoxyParamCaption}\item[{}]{log\+\_\+states }\end{DoxyParamCaption})}

\begin{DoxyVerb}Verify that all tasks have visited all states in a valid order.
\end{DoxyVerb}
 

Definition at line 693 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{693 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_aab877c9e9e838f5e2acfcfa72c8fdf84}{verify\_states}}(log\_states) -\/> bool:}
\DoxyCodeLine{694     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{695 \textcolor{stringliteral}{    Verify that all tasks have visited all states in a valid order.}}
\DoxyCodeLine{696 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{697 }
\DoxyCodeLine{698     \textcolor{keywordflow}{for} task \textcolor{keywordflow}{in} log\_states:}
\DoxyCodeLine{699         states = log\_states[task]}
\DoxyCodeLine{700         instance = task.instance}
\DoxyCodeLine{701 }
\DoxyCodeLine{702         \textcolor{comment}{\# if ('SPAWNED' not in states):}}
\DoxyCodeLine{703         \textcolor{comment}{\#    print(f"{}Task \{task\} did not spawn"{}, flush=True)}}
\DoxyCodeLine{704         \textcolor{comment}{\#    return False}}
\DoxyCodeLine{705         \textcolor{keywordflow}{if} (\textcolor{stringliteral}{'MAPPED'} \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} states):}
\DoxyCodeLine{706             print(f\textcolor{stringliteral}{"{}Task \{task\} was not mapped."{}}, states, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{707             \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{708         \textcolor{keywordflow}{if} (\textcolor{stringliteral}{'RESERVED'} \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} states):}
\DoxyCodeLine{709             print(f\textcolor{stringliteral}{"{}Task \{task\} was not reserved."{}}, states, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{710             \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{711         \textcolor{comment}{\# if ('RUNNING' not in states):}}
\DoxyCodeLine{712         \textcolor{comment}{\#    print(f"{}Task \{task\} did not run."{}, states, flush=True)}}
\DoxyCodeLine{713         \textcolor{comment}{\#    return False}}
\DoxyCodeLine{714         \textcolor{keywordflow}{if} (\textcolor{stringliteral}{'RUNAHEAD'} \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} states):}
\DoxyCodeLine{715             print(f\textcolor{stringliteral}{"{}Task \{task\} was not runahead"{}}, states, flush=\textcolor{keyword}{True})}
\DoxyCodeLine{716             \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{717 }
\DoxyCodeLine{718     \textcolor{keywordflow}{return} \textcolor{keyword}{True}}
\DoxyCodeLine{719 }
\DoxyCodeLine{720 }

\end{DoxyCode}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a45f94ff549e58e310bb868bce281af42}\label{namespaceparla_1_1utility_1_1execute_a45f94ff549e58e310bb868bce281af42}} 
\index{parla.utility.execute@{parla.utility.execute}!verify\_time@{verify\_time}}
\index{verify\_time@{verify\_time}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{verify\_time()}{verify\_time()}}
{\footnotesize\ttfamily  bool parla.\+utility.\+execute.\+verify\+\_\+time (\begin{DoxyParamCaption}\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, \mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskTime}{Task\+Time}}\mbox{]}}]{log\+\_\+times,  }\item[{Dict\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}, List\mbox{[}\mbox{\hyperlink{classparla_1_1utility_1_1graphs_1_1TaskID}{Task\+ID}}\mbox{]}\mbox{]}}]{truth\+\_\+graph,  }\item[{float }]{factor = {\ttfamily 2.0} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Verify that all tasks execute near their expected time.
\end{DoxyVerb}
 

Definition at line 659 of file execute.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{659 \textcolor{keyword}{def }\mbox{\hyperlink{namespaceparla_1_1utility_1_1execute_a45f94ff549e58e310bb868bce281af42}{verify\_time}}(log\_times: Dict[TaskID, TaskTime], truth\_graph: Dict[TaskID, List[TaskID]], factor: float = 2.0) -\/> bool:}
\DoxyCodeLine{660     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{661 \textcolor{stringliteral}{    Verify that all tasks execute near their expected time.}}
\DoxyCodeLine{662 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{663 }
\DoxyCodeLine{664     \textcolor{keywordflow}{for} task \textcolor{keywordflow}{in} truth\_graph:}
\DoxyCodeLine{665         details = truth\_graph[task]}
\DoxyCodeLine{666 }
\DoxyCodeLine{667         \textcolor{comment}{\# TODO: This needs to be fixed for device support}}
\DoxyCodeLine{668         device\_idx = (-\/1,)  \textcolor{comment}{\# CPU}}
\DoxyCodeLine{669         expected\_time = details.task\_runtime[device\_idx].task\_time}
\DoxyCodeLine{670         observed\_time = log\_times[task].duration / 1000}
\DoxyCodeLine{671 }
\DoxyCodeLine{672         \textcolor{keywordflow}{if} observed\_time > expected\_time * factor:}
\DoxyCodeLine{673             print(}
\DoxyCodeLine{674                 f\textcolor{stringliteral}{"{}Task \{task\} took too long to execute. Expected \{expected\_time\} us, took \{observed\_time\} us"{}})}
\DoxyCodeLine{675             \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{676 }
\DoxyCodeLine{677     \textcolor{keywordflow}{return} \textcolor{keyword}{True}}
\DoxyCodeLine{678 }
\DoxyCodeLine{679 }

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a5a4a9e11ae8733e45bef229c55240a42}\label{namespaceparla_1_1utility_1_1execute_a5a4a9e11ae8733e45bef229c55240a42}} 
\index{parla.utility.execute@{parla.utility.execute}!\_\_all\_\_@{\_\_all\_\_}}
\index{\_\_all\_\_@{\_\_all\_\_}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{\_\_all\_\_}{\_\_all\_\_}}
{\footnotesize\ttfamily list parla.\+utility.\+execute.\+\_\+\+\_\+all\+\_\+\+\_\+\hspace{0.3cm}{\ttfamily [private]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 =  [run, verify\_order, verify\_dependencies,}
\DoxyCodeLine{2            verify\_complete, verify\_time, timeout, GraphContext]}

\end{DoxyCode}


Definition at line 811 of file execute.\+py.

\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a3214c71f4b3a7a7e865d35da682e4a0b}\label{namespaceparla_1_1utility_1_1execute_a3214c71f4b3a7a7e865d35da682e4a0b}} 
\index{parla.utility.execute@{parla.utility.execute}!\_GPUInfo@{\_GPUInfo}}
\index{\_GPUInfo@{\_GPUInfo}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{\_GPUInfo}{\_GPUInfo}}
{\footnotesize\ttfamily parla.\+utility.\+execute.\+\_\+\+GPUInfo = \mbox{\hyperlink{classparla_1_1utility_1_1execute_1_1GPUInfo}{GPUInfo}}()\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 97 of file execute.\+py.

\mbox{\Hypertarget{namespaceparla_1_1utility_1_1execute_a77cf484a209c81a25d537fd8ba9601a2}\label{namespaceparla_1_1utility_1_1execute_a77cf484a209c81a25d537fd8ba9601a2}} 
\index{parla.utility.execute@{parla.utility.execute}!PArray@{PArray}}
\index{PArray@{PArray}!parla.utility.execute@{parla.utility.execute}}
\doxysubsubsection{\texorpdfstring{PArray}{PArray}}
{\footnotesize\ttfamily parla.\+utility.\+execute.\+PArray = parray.\+core.\+PArray}



Definition at line 39 of file execute.\+py.

