<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Parla: LocalityLoadBalancingMappingPolicy Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Parla
   </div>
   <div id="projectbrief">Heterogeneous Parallel Programming in Python</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classLocalityLoadBalancingMappingPolicy-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">LocalityLoadBalancingMappingPolicy Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="policy_8hpp_source.html">policy.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for LocalityLoadBalancingMappingPolicy:</div>
<div class="dyncontent">
<div class="center"><img src="classLocalityLoadBalancingMappingPolicy__inherit__graph.png" border="0" usemap="#aLocalityLoadBalancingMappingPolicy_inherit__map" alt="Inheritance graph"/></div>
<map name="aLocalityLoadBalancingMappingPolicy_inherit__map" id="aLocalityLoadBalancingMappingPolicy_inherit__map">
<area shape="rect" title=" " alt="" coords="5,80,229,121"/>
<area shape="rect" href="classMappingPolicy.html" title=" " alt="" coords="59,5,176,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for LocalityLoadBalancingMappingPolicy:</div>
<div class="dyncontent">
<div class="center"><img src="classLocalityLoadBalancingMappingPolicy__coll__graph.png" border="0" usemap="#aLocalityLoadBalancingMappingPolicy_coll__map" alt="Collaboration graph"/></div>
<map name="aLocalityLoadBalancingMappingPolicy_coll__map" id="aLocalityLoadBalancingMappingPolicy_coll__map">
<area shape="rect" title=" " alt="" coords="5,260,229,301"/>
<area shape="rect" href="classMappingPolicy.html" title=" " alt="" coords="59,184,176,211"/>
<area shape="rect" href="classDeviceManager.html" title="DeviceManager registers/provides devices and their information on the current system to the Parla run..." alt="" coords="55,5,179,32"/>
<area shape="rect" href="classPArrayTracker.html" title=" " alt="" coords="241,95,351,121"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad4dd7032ab349a74f3ab4498c867a341"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLocalityLoadBalancingMappingPolicy.html#ad4dd7032ab349a74f3ab4498c867a341">calc_score_devplacement</a> (<a class="el" href="classInnerTask.html">InnerTask</a> *task, const std::shared_ptr&lt; <a class="el" href="classDeviceRequirement.html">DeviceRequirement</a> &gt; &amp;dev_placement_req, const <a class="el" href="classMapper.html">Mapper</a> &amp;mapper, <a class="el" href="policy_8hpp.html#acc133555210d07ca50d128e110e9e7a9">Score_t</a> *score, const std::vector&lt; std::pair&lt; <a class="el" href="classparray_1_1InnerPArray.html">parray::InnerPArray</a> *, <a class="el" href="runtime_8hpp.html#ab22d35ed086a478dd91e93ac78037f40">AccessMode</a> &gt;&gt; &amp;parray_list) override</td></tr>
<tr class="memdesc:ad4dd7032ab349a74f3ab4498c867a341"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate a score of the device placement requirement.  <a href="classLocalityLoadBalancingMappingPolicy.html#ad4dd7032ab349a74f3ab4498c867a341">More...</a><br /></td></tr>
<tr class="separator:ad4dd7032ab349a74f3ab4498c867a341"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeffec6001c338c09f6b971d65804965e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLocalityLoadBalancingMappingPolicy.html#aeffec6001c338c09f6b971d65804965e">calc_score_archplacement</a> (<a class="el" href="classInnerTask.html">InnerTask</a> *task, <a class="el" href="classArchitectureRequirement.html">ArchitectureRequirement</a> *arch_placement_req, const <a class="el" href="classMapper.html">Mapper</a> &amp;mapper, std::shared_ptr&lt; <a class="el" href="classDeviceRequirement.html">DeviceRequirement</a> &gt; &amp;chosen_dev_req, <a class="el" href="policy_8hpp.html#acc133555210d07ca50d128e110e9e7a9">Score_t</a> *chosen_dev_score, const std::vector&lt; std::pair&lt; <a class="el" href="classparray_1_1InnerPArray.html">parray::InnerPArray</a> *, <a class="el" href="runtime_8hpp.html#ab22d35ed086a478dd91e93ac78037f40">AccessMode</a> &gt;&gt; &amp;parray_list, std::vector&lt; bool &gt; *is_dev_assigned=nullptr) override</td></tr>
<tr class="memdesc:aeffec6001c338c09f6b971d65804965e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate a score of the architecture placement requirement.  <a href="classLocalityLoadBalancingMappingPolicy.html#aeffec6001c338c09f6b971d65804965e">More...</a><br /></td></tr>
<tr class="separator:aeffec6001c338c09f6b971d65804965e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f33fe9c821604def797319186daedb1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLocalityLoadBalancingMappingPolicy.html#a1f33fe9c821604def797319186daedb1">calc_score_mdevplacement</a> (<a class="el" href="classInnerTask.html">InnerTask</a> *task, <a class="el" href="classMultiDeviceRequirements.html">MultiDeviceRequirements</a> *mdev_placement_req, const <a class="el" href="classMapper.html">Mapper</a> &amp;mapper, std::vector&lt; std::shared_ptr&lt; <a class="el" href="classDeviceRequirement.html">DeviceRequirement</a> &gt;&gt; *member_device_reqs, <a class="el" href="policy_8hpp.html#acc133555210d07ca50d128e110e9e7a9">Score_t</a> *average_score, const std::vector&lt; std::vector&lt; std::pair&lt; <a class="el" href="classparray_1_1InnerPArray.html">parray::InnerPArray</a> *, <a class="el" href="runtime_8hpp.html#ab22d35ed086a478dd91e93ac78037f40">AccessMode</a> &gt;&gt;&gt; &amp;parray_list) override</td></tr>
<tr class="memdesc:a1f33fe9c821604def797319186daedb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate a score of the multi-device placement that users passed.  <a href="classLocalityLoadBalancingMappingPolicy.html#a1f33fe9c821604def797319186daedb1">More...</a><br /></td></tr>
<tr class="separator:a1f33fe9c821604def797319186daedb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c2860ab6caf48e27a869c05d6c29c44"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLocalityLoadBalancingMappingPolicy.html#a1c2860ab6caf48e27a869c05d6c29c44">MappingPolicy</a> (<a class="el" href="classDeviceManager.html">DeviceManager</a> *device_manager, <a class="el" href="classPArrayTracker.html">PArrayTracker</a> *parray_tracker)</td></tr>
<tr class="separator:a1c2860ab6caf48e27a869c05d6c29c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classMappingPolicy"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classMappingPolicy')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classMappingPolicy.html">MappingPolicy</a></td></tr>
<tr class="memitem:a1c2860ab6caf48e27a869c05d6c29c44 inherit pub_methods_classMappingPolicy"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMappingPolicy.html#a1c2860ab6caf48e27a869c05d6c29c44">MappingPolicy</a> (<a class="el" href="classDeviceManager.html">DeviceManager</a> *device_manager, <a class="el" href="classPArrayTracker.html">PArrayTracker</a> *parray_tracker)</td></tr>
<tr class="separator:a1c2860ab6caf48e27a869c05d6c29c44 inherit pub_methods_classMappingPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classMappingPolicy"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classMappingPolicy')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classMappingPolicy.html">MappingPolicy</a></td></tr>
<tr class="memitem:a3943af0460a1a7053151449167da0d26 inherit pro_attribs_classMappingPolicy"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDeviceManager.html">DeviceManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMappingPolicy.html#a3943af0460a1a7053151449167da0d26">device_manager_</a></td></tr>
<tr class="separator:a3943af0460a1a7053151449167da0d26 inherit pro_attribs_classMappingPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70abf983ec3855f3a8f15db9930c5c82 inherit pro_attribs_classMappingPolicy"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPArrayTracker.html">PArrayTracker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMappingPolicy.html#a70abf983ec3855f3a8f15db9930c5c82">parray_tracker_</a></td></tr>
<tr class="separator:a70abf983ec3855f3a8f15db9930c5c82 inherit pro_attribs_classMappingPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ae7076b9ebc8601ea06d3743cf12178 inherit pro_attribs_classMappingPolicy"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMappingPolicy.html#a3ae7076b9ebc8601ea06d3743cf12178">rrcount</a> = 0</td></tr>
<tr class="separator:a3ae7076b9ebc8601ea06d3743cf12178 inherit pro_attribs_classMappingPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="policy_8hpp_source.html#l00107">107</a> of file <a class="el" href="policy_8hpp_source.html">policy.hpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aeffec6001c338c09f6b971d65804965e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeffec6001c338c09f6b971d65804965e">&#9670;&nbsp;</a></span>calc_score_archplacement()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool LocalityLoadBalancingMappingPolicy::calc_score_archplacement </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInnerTask.html">InnerTask</a> *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArchitectureRequirement.html">ArchitectureRequirement</a> *&#160;</td>
          <td class="paramname"><em>arch_placement_req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classMapper.html">Mapper</a> &amp;&#160;</td>
          <td class="paramname"><em>mapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classDeviceRequirement.html">DeviceRequirement</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>chosen_dev_req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="policy_8hpp.html#acc133555210d07ca50d128e110e9e7a9">Score_t</a> *&#160;</td>
          <td class="paramname"><em>chosen_dev_score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::pair&lt; <a class="el" href="classparray_1_1InnerPArray.html">parray::InnerPArray</a> *, <a class="el" href="runtime_8hpp.html#ab22d35ed086a478dd91e93ac78037f40">AccessMode</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>parray_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; bool &gt; *&#160;</td>
          <td class="paramname"><em>is_dev_assigned</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate a score of the architecture placement requirement. </p>
<p>This function first iterates devices of the architecture, and calculates a score for each device based on the current states of the device (e.g., available memory and the number of vcus). It returns a device giving the best score and its score. Note that it does not choose a device for a task, but the caller, so the task mapper, will choose one of the placement options.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Target task for task mapping. </td></tr>
    <tr><td class="paramname">arch_placement_req</td><td>Resource requirement of the architecture. </td></tr>
    <tr><td class="paramname">mapper</td><td><a class="el" href="classMapper.html" title="Mapper phase of the scheduler.">Mapper</a> instance to get mapping information. </td></tr>
    <tr><td class="paramname">chosen_dev_req</td><td>A pointer of a chosen device and its resource requirement. This is a reference type since this function chooses a device and updates its pointer to the device requirement. </td></tr>
    <tr><td class="paramname">chosen_dev_score</td><td>A pointer of a score of the chosen device. </td></tr>
    <tr><td class="paramname">parray_list</td><td>A list of PArray instances used by the target task </td></tr>
    <tr><td class="paramname">is_dev_assigned</td><td>Multi-device task is not allowed to be assigned to duplicated devices. This vector marks assigned devices and avoid that case. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if any device in the architecture is available </dd></dl>

<p>Implements <a class="el" href="classMappingPolicy.html#a86509271105b3cf0c7478c63e3e0469d">MappingPolicy</a>.</p>

<p class="definition">Definition at line <a class="el" href="policy_8cpp_source.html#l00087">87</a> of file <a class="el" href="policy_8cpp_source.html">policy.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                                                            {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="policy_8hpp.html#acc133555210d07ca50d128e110e9e7a9">Score_t</a> best_score{0};</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  std::shared_ptr&lt;DeviceRequirement&gt; best_device_req{<span class="keyword">nullptr</span>};</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// std::cout &lt;&lt; task-&gt;get_name() &lt;&lt; &quot;inside arch req mapping. &quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">//TODO(wlr): Is this unused??</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  uint32_t <a class="code" href="namespaceparla_1_1cython_1_1tasks.html#a17820f0441e4e8e4a8af4a5c50bae09d">i</a>{0};</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordtype">bool</span> is_arch_available{<span class="keyword">false</span>};</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// For now the architecture placement has one resource requirement</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">// regardless of the devices of the architecture. In the future,</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// we will allow a separate placement for each device.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keyword">auto</span> placement_options = arch_placement_req-&gt;<a class="code" href="classArchitectureRequirement.html#af3412a9dcf9a72a470bbacdaff85b496">GetDeviceRequirementOptions</a>();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordtype">int</span> n_options = placement_options.size();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordtype">int</span> start_idx = ++this-&gt;<a class="code" href="classMappingPolicy.html#a3ae7076b9ebc8601ea06d3743cf12178">rrcount</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; n_options; k++){</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordtype">int</span> idx = (start_idx+k)%n_options;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    std::shared_ptr&lt;DeviceRequirement&gt; dev_req = placement_options[idx];</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="policy_8hpp.html#acc133555210d07ca50d128e110e9e7a9">Score_t</a> score{0};</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="device_8hpp.html#a1a60ef2726088f66773542604d44bdd7">DevID_t</a> dev_global_id = dev_req-&gt;device()-&gt;get_global_id();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (is_dev_assigned != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            (*is_dev_assigned)[dev_global_id] == <span class="keyword">true</span>) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <span class="comment">// If this architecture placement is the member of a</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="comment">// multi-device task and this visiting device is already chosen</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="comment">// as one of the placements, skip it.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordtype">bool</span> is_dev_available =</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        this-&gt;<a class="code" href="classLocalityLoadBalancingMappingPolicy.html#ad4dd7032ab349a74f3ab4498c867a341">calc_score_devplacement</a>(task, dev_req, mapper, &amp;score,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            parray_list);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> (!is_dev_available) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    is_arch_available = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (best_score &lt;= score) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      best_score = score;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      best_device_req = dev_req;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    ++<a class="code" href="namespaceparla_1_1cython_1_1tasks.html#a17820f0441e4e8e4a8af4a5c50bae09d">i</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  assert(best_device_req != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  chosen_dev_req = best_device_req;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  *chosen_dev_score = best_score;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">return</span> is_arch_available;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div>
<div class="ttc" id="aclassArchitectureRequirement_html_af3412a9dcf9a72a470bbacdaff85b496"><div class="ttname"><a href="classArchitectureRequirement.html#af3412a9dcf9a72a470bbacdaff85b496">ArchitectureRequirement::GetDeviceRequirementOptions</a></div><div class="ttdeci">const std::vector&lt; std::shared_ptr&lt; DeviceRequirement &gt; &gt; &amp; GetDeviceRequirementOptions()</div><div class="ttdef"><b>Definition:</b> <a href="resource__requirements_8cpp_source.html#l00030">resource_requirements.cpp:30</a></div></div>
<div class="ttc" id="aclassLocalityLoadBalancingMappingPolicy_html_ad4dd7032ab349a74f3ab4498c867a341"><div class="ttname"><a href="classLocalityLoadBalancingMappingPolicy.html#ad4dd7032ab349a74f3ab4498c867a341">LocalityLoadBalancingMappingPolicy::calc_score_devplacement</a></div><div class="ttdeci">bool calc_score_devplacement(InnerTask *task, const std::shared_ptr&lt; DeviceRequirement &gt; &amp;dev_placement_req, const Mapper &amp;mapper, Score_t *score, const std::vector&lt; std::pair&lt; parray::InnerPArray *, AccessMode &gt;&gt; &amp;parray_list) override</div><div class="ttdoc">Calculate a score of the device placement requirement.</div><div class="ttdef"><b>Definition:</b> <a href="policy_8cpp_source.html#l00004">policy.cpp:4</a></div></div>
<div class="ttc" id="aclassMappingPolicy_html_a3ae7076b9ebc8601ea06d3743cf12178"><div class="ttname"><a href="classMappingPolicy.html#a3ae7076b9ebc8601ea06d3743cf12178">MappingPolicy::rrcount</a></div><div class="ttdeci">int rrcount</div><div class="ttdef"><b>Definition:</b> <a href="policy_8hpp_source.html#l00104">policy.hpp:104</a></div></div>
<div class="ttc" id="adevice_8hpp_html_a1a60ef2726088f66773542604d44bdd7"><div class="ttname"><a href="device_8hpp.html#a1a60ef2726088f66773542604d44bdd7">DevID_t</a></div><div class="ttdeci">uint32_t DevID_t</div><div class="ttdef"><b>Definition:</b> <a href="device_8hpp_source.html#l00016">device.hpp:16</a></div></div>
<div class="ttc" id="anamespaceparla_1_1cython_1_1tasks_html_a17820f0441e4e8e4a8af4a5c50bae09d"><div class="ttname"><a href="namespaceparla_1_1cython_1_1tasks.html#a17820f0441e4e8e4a8af4a5c50bae09d">parla.cython.tasks.i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="tasks_8pyx_source.html#l01386">tasks.pyx:1386</a></div></div>
<div class="ttc" id="apolicy_8hpp_html_acc133555210d07ca50d128e110e9e7a9"><div class="ttname"><a href="policy_8hpp.html#acc133555210d07ca50d128e110e9e7a9">Score_t</a></div><div class="ttdeci">double Score_t</div><div class="ttdef"><b>Definition:</b> <a href="policy_8hpp_source.html#l00014">policy.hpp:14</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classMappingPolicy.html#a3ae7076b9ebc8601ea06d3743cf12178">MappingPolicy::rrcount</a>.</p>

</div>
</div>
<a id="ad4dd7032ab349a74f3ab4498c867a341"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4dd7032ab349a74f3ab4498c867a341">&#9670;&nbsp;</a></span>calc_score_devplacement()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool LocalityLoadBalancingMappingPolicy::calc_score_devplacement </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInnerTask.html">InnerTask</a> *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classDeviceRequirement.html">DeviceRequirement</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>dev_placement_req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classMapper.html">Mapper</a> &amp;&#160;</td>
          <td class="paramname"><em>mapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="policy_8hpp.html#acc133555210d07ca50d128e110e9e7a9">Score_t</a> *&#160;</td>
          <td class="paramname"><em>score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::pair&lt; <a class="el" href="classparray_1_1InnerPArray.html">parray::InnerPArray</a> *, <a class="el" href="runtime_8hpp.html#ab22d35ed086a478dd91e93ac78037f40">AccessMode</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>parray_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate a score of the device placement requirement. </p>
<p>This function calculates a score of a device based on the current states of the device (e.g., available memory and the number of vcus). It returns a device giving the best score and its score. Note that it does not choose a device for a task, but the caller, so the task mapper, will choose one of the placement options.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Target task for task mapping. </td></tr>
    <tr><td class="paramname">dev_placement_req</td><td>Resource requirement of the device. </td></tr>
    <tr><td class="paramname">mapper</td><td><a class="el" href="classMapper.html" title="Mapper phase of the scheduler.">Mapper</a> instance to get mapping information. </td></tr>
    <tr><td class="paramname">score</td><td>A pointer of a score of the device. </td></tr>
    <tr><td class="paramname">parray_list</td><td>A list of PArray instances used by the target task </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if a device is available </dd></dl>

<p>Implements <a class="el" href="classMappingPolicy.html#a1ee22460c08db5ba7a07ab3ec673bc7b">MappingPolicy</a>.</p>

<p class="definition">Definition at line <a class="el" href="policy_8cpp_source.html#l00004">4</a> of file <a class="el" href="policy_8cpp_source.html">policy.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;                            {</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  <span class="keyword">const</span> <a class="code" href="classDevice.html">Device</a> &amp;device = *(dev_placement_req-&gt;device());</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  <a class="code" href="device_8hpp.html#a1a60ef2726088f66773542604d44bdd7">DevID_t</a> global_dev_id = device.<a class="code" href="classDevice.html#a7a4beec758f8c827ffce31562ee9ebdb">get_global_id</a>();</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  <span class="comment">//std::cout &lt;&lt; &quot;[Locality-aware- and Load-balancing mapping policy]\n&quot;;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  <span class="comment">// Check device resource availability.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  <span class="keywordflow">if</span> (!device.<a class="code" href="classDevice.html#aca1649a233aee0f1251e1a16faf45ab3">check_resource_availability</a>(dev_placement_req.get())) {</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <span class="comment">//std::cout &lt;&lt; &quot;Device resource failure!&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  }</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  <span class="comment">// PArray locality.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  <a class="code" href="policy_8hpp.html#acc133555210d07ca50d128e110e9e7a9">Score_t</a> local_data{0}, nonlocal_data{0};</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespaceparla_1_1cython_1_1tasks.html#a17820f0441e4e8e4a8af4a5c50bae09d">i</a> = 0; <a class="code" href="namespaceparla_1_1cython_1_1tasks.html#a17820f0441e4e8e4a8af4a5c50bae09d">i</a> &lt; parray_list.size(); ++<a class="code" href="namespaceparla_1_1cython_1_1tasks.html#a17820f0441e4e8e4a8af4a5c50bae09d">i</a>) {</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <a class="code" href="classparray_1_1InnerPArray.html">InnerPArray</a> *<a class="code" href="namespaceparray.html">parray</a> = parray_list[<a class="code" href="namespaceparla_1_1cython_1_1tasks.html#a17820f0441e4e8e4a8af4a5c50bae09d">i</a>].first;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMappingPolicy.html#a70abf983ec3855f3a8f15db9930c5c82">parray_tracker_</a>-&gt;<a class="code" href="classPArrayTracker.html#af30dd11bb2cd542a82916aab560e1840">get_parray_state</a>(global_dev_id, <a class="code" href="namespaceparray.html">parray</a>-&gt;parent_id)) {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;      local_data += <a class="code" href="namespaceparray.html">parray</a>-&gt;get_size();</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;      nonlocal_data += <a class="code" href="namespaceparray.html">parray</a>-&gt;get_size();</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    }</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  }</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="resources_8hpp.html#af7b216c3232c4a212aba859a02f42004">Resource_t</a> device_memory_size = device.<a class="code" href="classDevice.html#a4b26ae0012a7b853adb6e98de08d88b1">query_resource</a>(<a class="code" href="resources_8hpp.html#acf246a87e41f47012fc7628989d3fe95a4789f23283b3a61f858b641a1bef19a3">Resource::Memory</a>);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  local_data /= device_memory_size;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  nonlocal_data /= device_memory_size;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">// TODO(hc): This metric is duplicated with data locality.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="comment">// Check how many dependencies are mapped to the device candidate</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">// being checked.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="comment">// Note that this only considers dependencies specified in a task</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="comment">// @spawn decorator. So to speak, it considers immediate dependencies</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="comment">// and does not consider the whole dependency subtree.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="classProtectedVector.html">TaskList</a> &amp;<a class="code" href="namespaceparla_1_1cython_1_1core.html#a73544bbbe214712d0f0b214c64ebae9f">dependencies</a> = <a class="code" href="namespaceparla_1_1cython_1_1core.html#a80c42ae6cf7c7174352631aa0d84cbe0">task</a>-&gt;dependencies;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordtype">size_t</span> num_dependencies_on_device{0};</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespaceparla_1_1cython_1_1tasks.html#a17820f0441e4e8e4a8af4a5c50bae09d">i</a> = 0; <a class="code" href="namespaceparla_1_1cython_1_1tasks.html#a17820f0441e4e8e4a8af4a5c50bae09d">i</a> &lt; <a class="code" href="namespaceparla_1_1cython_1_1core.html#a73544bbbe214712d0f0b214c64ebae9f">dependencies</a>.size_unsafe(); ++<a class="code" href="namespaceparla_1_1cython_1_1tasks.html#a17820f0441e4e8e4a8af4a5c50bae09d">i</a>) {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="classInnerTask.html">InnerTask</a> *<a class="code" href="namespaceparla_1_1cython_1_1core.html#a82cc47fc5c9d4bba41ac5f3031d1e8fc">dependency</a> = <a class="code" href="namespaceparla_1_1cython_1_1core.html#a73544bbbe214712d0f0b214c64ebae9f">dependencies</a>.at_unsafe(<a class="code" href="namespaceparla_1_1cython_1_1tasks.html#a17820f0441e4e8e4a8af4a5c50bae09d">i</a>);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classDevice.html">Device</a> *dependency_devices : <a class="code" href="namespaceparla_1_1cython_1_1core.html#a82cc47fc5c9d4bba41ac5f3031d1e8fc">dependency</a>-&gt;assigned_devices) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      <span class="keywordflow">if</span> (dependency_devices-&gt;<a class="code" href="classDevice.html#a7a4beec758f8c827ffce31562ee9ebdb">get_global_id</a>() == device.<a class="code" href="classDevice.html#a7a4beec758f8c827ffce31562ee9ebdb">get_global_id</a>()) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        ++num_dependencies_on_device;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  }</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// std::cout &lt;&lt; num_dependencies_on_device &lt;&lt; &quot; of the &quot; &lt;&lt; task-&gt;get_name()</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="comment">//           &lt;&lt; &quot;s dependencies have been mapped to device &quot; &lt;&lt;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">//           device.get_name()</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="comment">//           &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="comment">// TODO(hc): memory load; but let me postpone this implementation because</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">//           it may require nested for loops.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// Calculate device load balancing.</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordtype">size_t</span> total_num_mapped_tasks = mapper.<a class="code" href="classMapper.html#a3e63ef68173ab3c9ce42e0e077e681cf">atomic_load_total_num_mapped_tasks</a>();</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordtype">size_t</span> num_tasks_to_device =</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      mapper.<a class="code" href="classMapper.html#a4fda5c4fbe57ee41131f07d039d45d37">atomic_load_dev_num_mapped_tasks_device</a>(device.<a class="code" href="classDevice.html#a7a4beec758f8c827ffce31562ee9ebdb">get_global_id</a>());</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordtype">double</span> normalizd_device_load{0};</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">if</span> (total_num_mapped_tasks != 0) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    normalizd_device_load =</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        num_tasks_to_device / double(total_num_mapped_tasks);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">// Avoid negative score and make this focus on load balancing if data</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// is not used.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  *score = 50;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  *score += (30.0 * local_data - 30.0 * nonlocal_data - 10 * normalizd_device_load);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// std::cout &lt;&lt; &quot;Device &quot; &lt;&lt; device.get_name() &lt;&lt; &quot;&#39;s score: &quot; &lt;&lt; *score &lt;&lt;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">//   &quot; for task &quot;&lt;&lt; task-&gt;get_name() &lt;&lt; &quot; local data: &quot; &lt;&lt; local_data &lt;&lt;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">//   &quot; non local data:&quot; &lt;&lt; nonlocal_data &lt;&lt; &quot; normalized device load:&quot; &lt;&lt;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="comment">//   normalizd_device_load &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="comment">// std::cout &lt;&lt; &quot;\t[Device Requirement in device Requirement]\n&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">//           &lt;&lt; &quot;\t\t&quot; &lt;&lt; dev_placement_req-&gt;device()-&gt;get_name() &lt;&lt; &quot; -&gt; &quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">//           &lt;&lt; dev_placement_req-&gt;res_req().get(Resource::Memory) &lt;&lt; &quot;B, VCU&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="comment">//           &lt;&lt; dev_placement_req-&gt;res_req().get(Resource::VCU) &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="ttc" id="aclassDevice_html"><div class="ttname"><a href="classDevice.html">Device</a></div><div class="ttdoc">Devices can be distinguished from other devices by a class type and its index.</div><div class="ttdef"><b>Definition:</b> <a href="device_8hpp_source.html#l00037">device.hpp:37</a></div></div>
<div class="ttc" id="aclassDevice_html_a4b26ae0012a7b853adb6e98de08d88b1"><div class="ttname"><a href="classDevice.html#a4b26ae0012a7b853adb6e98de08d88b1">Device::query_resource</a></div><div class="ttdeci">const Resource_t query_resource(Resource type) const</div><div class="ttdef"><b>Definition:</b> <a href="device_8hpp_source.html#l00067">device.hpp:67</a></div></div>
<div class="ttc" id="aclassDevice_html_a7a4beec758f8c827ffce31562ee9ebdb"><div class="ttname"><a href="classDevice.html#a7a4beec758f8c827ffce31562ee9ebdb">Device::get_global_id</a></div><div class="ttdeci">const DevID_t get_global_id() const</div><div class="ttdef"><b>Definition:</b> <a href="device_8hpp_source.html#l00111">device.hpp:111</a></div></div>
<div class="ttc" id="aclassDevice_html_aca1649a233aee0f1251e1a16faf45ab3"><div class="ttname"><a href="classDevice.html#aca1649a233aee0f1251e1a16faf45ab3">Device::check_resource_availability</a></div><div class="ttdeci">const bool check_resource_availability(DeviceRequirement *dev_req) const</div><div class="ttdef"><b>Definition:</b> <a href="device_8cpp_source.html#l00005">device.cpp:5</a></div></div>
<div class="ttc" id="aclassInnerTask_html"><div class="ttname"><a href="classInnerTask.html">InnerTask</a></div><div class="ttdoc">The C++ &quot;Mirror&quot; of Parla's Python Tasks This class is used to create a C++ representation of a Parla...</div><div class="ttdef"><b>Definition:</b> <a href="runtime_8hpp_source.html#l00192">runtime.hpp:192</a></div></div>
<div class="ttc" id="aclassMapper_html_a3e63ef68173ab3c9ce42e0e077e681cf"><div class="ttname"><a href="classMapper.html#a3e63ef68173ab3c9ce42e0e077e681cf">Mapper::atomic_load_total_num_mapped_tasks</a></div><div class="ttdeci">const size_t atomic_load_total_num_mapped_tasks() const</div><div class="ttdoc">Return the number of total mapped tasks to the whole devices.</div><div class="ttdef"><b>Definition:</b> <a href="phases_8hpp_source.html#l00190">phases.hpp:190</a></div></div>
<div class="ttc" id="aclassMapper_html_a4fda5c4fbe57ee41131f07d039d45d37"><div class="ttname"><a href="classMapper.html#a4fda5c4fbe57ee41131f07d039d45d37">Mapper::atomic_load_dev_num_mapped_tasks_device</a></div><div class="ttdeci">const size_t atomic_load_dev_num_mapped_tasks_device(DevID_t dev_id) const</div><div class="ttdoc">Return the number of mapped tasks to a single device.</div><div class="ttdef"><b>Definition:</b> <a href="phases_8hpp_source.html#l00198">phases.hpp:198</a></div></div>
<div class="ttc" id="aclassMappingPolicy_html_a70abf983ec3855f3a8f15db9930c5c82"><div class="ttname"><a href="classMappingPolicy.html#a70abf983ec3855f3a8f15db9930c5c82">MappingPolicy::parray_tracker_</a></div><div class="ttdeci">PArrayTracker * parray_tracker_</div><div class="ttdef"><b>Definition:</b> <a href="policy_8hpp_source.html#l00103">policy.hpp:103</a></div></div>
<div class="ttc" id="aclassPArrayTracker_html_af30dd11bb2cd542a82916aab560e1840"><div class="ttname"><a href="classPArrayTracker.html#af30dd11bb2cd542a82916aab560e1840">PArrayTracker::get_parray_state</a></div><div class="ttdeci">bool get_parray_state(DevID_t global_dev_idx, uint64_t parray_parent_id)</div><div class="ttdef"><b>Definition:</b> <a href="parray__tracker_8hpp_source.html#l00048">parray_tracker.hpp:48</a></div></div>
<div class="ttc" id="aclassProtectedVector_html"><div class="ttname"><a href="classProtectedVector.html">ProtectedVector&lt; InnerTask * &gt;</a></div></div>
<div class="ttc" id="aclassparray_1_1InnerPArray_html"><div class="ttname"><a href="classparray_1_1InnerPArray.html">parray::InnerPArray</a></div><div class="ttdef"><b>Definition:</b> <a href="parray_8hpp_source.html#l00025">parray.hpp:25</a></div></div>
<div class="ttc" id="anamespaceparla_1_1cython_1_1core_html_a73544bbbe214712d0f0b214c64ebae9f"><div class="ttname"><a href="namespaceparla_1_1cython_1_1core.html#a73544bbbe214712d0f0b214c64ebae9f">parla.cython.core.dependencies</a></div><div class="ttdeci">list dependencies</div><div class="ttdef"><b>Definition:</b> <a href="core_8pyx_source.html#l00243">core.pyx:243</a></div></div>
<div class="ttc" id="anamespaceparla_1_1cython_1_1core_html_a80c42ae6cf7c7174352631aa0d84cbe0"><div class="ttname"><a href="namespaceparla_1_1cython_1_1core.html#a80c42ae6cf7c7174352631aa0d84cbe0">parla.cython.core.task</a></div><div class="ttdeci">task</div><div class="ttdef"><b>Definition:</b> <a href="core_8pyx_source.html#l00138">core.pyx:138</a></div></div>
<div class="ttc" id="anamespaceparla_1_1cython_1_1core_html_a82cc47fc5c9d4bba41ac5f3031d1e8fc"><div class="ttname"><a href="namespaceparla_1_1cython_1_1core.html#a82cc47fc5c9d4bba41ac5f3031d1e8fc">parla.cython.core.dependency</a></div><div class="ttdeci">dependency</div><div class="ttdef"><b>Definition:</b> <a href="core_8pyx_source.html#l00214">core.pyx:214</a></div></div>
<div class="ttc" id="anamespaceparray_html"><div class="ttname"><a href="namespaceparray.html">parray</a></div><div class="ttdef"><b>Definition:</b> <a href="parray_8cpp_source.html#l00005">parray.cpp:5</a></div></div>
<div class="ttc" id="aresources_8hpp_html_acf246a87e41f47012fc7628989d3fe95a4789f23283b3a61f858b641a1bef19a3"><div class="ttname"><a href="resources_8hpp.html#acf246a87e41f47012fc7628989d3fe95a4789f23283b3a61f858b641a1bef19a3">Resource::Memory</a></div><div class="ttdeci">@ Memory</div></div>
<div class="ttc" id="aresources_8hpp_html_af7b216c3232c4a212aba859a02f42004"><div class="ttname"><a href="resources_8hpp.html#af7b216c3232c4a212aba859a02f42004">Resource_t</a></div><div class="ttdeci">int64_t Resource_t</div><div class="ttdef"><b>Definition:</b> <a href="resources_8hpp_source.html#l00019">resources.hpp:19</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classMapper.html#a3e63ef68173ab3c9ce42e0e077e681cf">Mapper::atomic_load_total_num_mapped_tasks()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classLocalityLoadBalancingMappingPolicy_ad4dd7032ab349a74f3ab4498c867a341_cgraph.png" border="0" usemap="#aclassLocalityLoadBalancingMappingPolicy_ad4dd7032ab349a74f3ab4498c867a341_cgraph" alt=""/></div>
<map name="aclassLocalityLoadBalancingMappingPolicy_ad4dd7032ab349a74f3ab4498c867a341_cgraph" id="aclassLocalityLoadBalancingMappingPolicy_ad4dd7032ab349a74f3ab4498c867a341_cgraph">
<area shape="rect" title="Calculate a score of the device placement requirement." alt="" coords="5,5,241,47"/>
<area shape="rect" href="classMapper.html#a3e63ef68173ab3c9ce42e0e077e681cf" title="Return the number of total mapped tasks to the whole devices." alt="" coords="289,5,487,47"/>
</map>
</div>

</div>
</div>
<a id="a1f33fe9c821604def797319186daedb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f33fe9c821604def797319186daedb1">&#9670;&nbsp;</a></span>calc_score_mdevplacement()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool LocalityLoadBalancingMappingPolicy::calc_score_mdevplacement </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInnerTask.html">InnerTask</a> *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMultiDeviceRequirements.html">MultiDeviceRequirements</a> *&#160;</td>
          <td class="paramname"><em>mdev_placement_req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classMapper.html">Mapper</a> &amp;&#160;</td>
          <td class="paramname"><em>mapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::shared_ptr&lt; <a class="el" href="classDeviceRequirement.html">DeviceRequirement</a> &gt;&gt; *&#160;</td>
          <td class="paramname"><em>member_device_reqs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="policy_8hpp.html#acc133555210d07ca50d128e110e9e7a9">Score_t</a> *&#160;</td>
          <td class="paramname"><em>average_score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; std::pair&lt; <a class="el" href="classparray_1_1InnerPArray.html">parray::InnerPArray</a> *, <a class="el" href="runtime_8hpp.html#ab22d35ed086a478dd91e93ac78037f40">AccessMode</a> &gt;&gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>parray_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate a score of the multi-device placement that users passed. </p>
<p>The placement requirement could contain multiple device or/and architecture requirements. This function calculates a score for each placement requirement by recursively calling a device or an architecture score calculation function and averages those scores. This average is used as a score of the multi-device placement and the caller, so the task mapper, will choose one of the placement options that give the best score.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Target task for task mapping. </td></tr>
    <tr><td class="paramname">mdev_placement_req</td><td>Resource requirement of the multiple devices. </td></tr>
    <tr><td class="paramname">mapper</td><td><a class="el" href="classMapper.html" title="Mapper phase of the scheduler.">Mapper</a> instance to get mapping information. </td></tr>
    <tr><td class="paramname">member_device_reqs</td><td>A vector of the resource requirement of the member device. </td></tr>
    <tr><td class="paramname">chosen_dev_score</td><td>A pointer of a score of the multiple devices. </td></tr>
    <tr><td class="paramname">parray_list</td><td>A list of PArray instances used by the target task </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if all devices in the multi-device placement are available. </dd></dl>

<p>Implements <a class="el" href="classMappingPolicy.html#a5cd045c4167ac1c7e542fec83eaae55d">MappingPolicy</a>.</p>

<p class="definition">Definition at line <a class="el" href="policy_8cpp_source.html#l00137">137</a> of file <a class="el" href="policy_8cpp_source.html">policy.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                        {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  *average_score = 0;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keyword">const</span> std::vector&lt;std::shared_ptr&lt;SinglePlacementRequirementBase&gt;&gt;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      &amp;placement_reqs_vec = mdev_placement_req-&gt;<a class="code" href="classMultiDeviceRequirements.html#ac5e4ee0e9a54f8e45318f9059aea9540">get_placement_reqs_ref</a>();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  member_device_reqs-&gt;resize(placement_reqs_vec.size());</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">// Task mapper does not allow to map a multi-device task to the same device</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// multiple times. This vector marks an assigned device and filter it</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// out at the next device decision.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  std::vector&lt;bool&gt; is_dev_assigned(</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      this-&gt;<a class="code" href="classMappingPolicy.html#a3943af0460a1a7053151449167da0d26">device_manager_</a>-&gt;<a class="code" href="classDeviceManager.html#ad3dba27b05b965eba693d8fecd89f9c7">get_num_devices</a>&lt;<a class="code" href="device_8hpp.html#ad258d4c51629346fceac4679b3209ad9ab1c94ca2fbc3e78fc30069c8d0f01680">DeviceType::All</a>&gt;(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// Iterate requirements of the devices specified in multi-device placement.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// All of the member devices should be available.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="device_8hpp.html#a1a60ef2726088f66773542604d44bdd7">DevID_t</a> did = 0; did &lt; placement_reqs_vec.size(); ++did) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    std::shared_ptr&lt;SinglePlacementRequirementBase&gt; placement_req =</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        placement_reqs_vec[did];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    std::shared_ptr&lt;DeviceRequirement&gt; dev_req{<span class="keyword">nullptr</span>};</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="policy_8hpp.html#acc133555210d07ca50d128e110e9e7a9">Score_t</a> score{0};</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordtype">bool</span> is_member_device_available{<span class="keyword">false</span>};</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (placement_req-&gt;is_dev_req()) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      dev_req = std::dynamic_pointer_cast&lt;DeviceRequirement&gt;(placement_req);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <a class="code" href="device_8hpp.html#a1a60ef2726088f66773542604d44bdd7">DevID_t</a> dev_global_id = dev_req-&gt;device()-&gt;get_global_id();</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">if</span> (!is_dev_assigned[dev_global_id]) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        is_member_device_available =</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            this-&gt;<a class="code" href="classLocalityLoadBalancingMappingPolicy.html#ad4dd7032ab349a74f3ab4498c867a341">calc_score_devplacement</a>(task, dev_req, mapper, &amp;score,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                parray_list[did]);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">if</span> (is_member_device_available) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;          is_dev_assigned[dev_global_id] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (placement_req-&gt;is_arch_req()) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <a class="code" href="classArchitectureRequirement.html">ArchitectureRequirement</a> *arch_req =</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classArchitectureRequirement.html">ArchitectureRequirement</a> *<span class="keyword">&gt;</span>(placement_req.get());</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      is_member_device_available = this-&gt;<a class="code" href="classLocalityLoadBalancingMappingPolicy.html#aeffec6001c338c09f6b971d65804965e">calc_score_archplacement</a>(</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;          task, arch_req, mapper, dev_req, &amp;score, parray_list[did],</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;          &amp;is_dev_assigned);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordflow">if</span> (is_member_device_available) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <a class="code" href="device_8hpp.html#a1a60ef2726088f66773542604d44bdd7">DevID_t</a> dev_global_id = dev_req-&gt;device()-&gt;get_global_id();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        is_dev_assigned[dev_global_id] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    assert(dev_req != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    (*member_device_reqs)[did] = dev_req;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    *average_score += score;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> (!is_member_device_available) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="comment">// If any of the device candidates is not available,</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="comment">// return false and exclude this option from task mapping.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  *average_score /= placement_reqs_vec.size();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div>
<div class="ttc" id="aclassArchitectureRequirement_html"><div class="ttname"><a href="classArchitectureRequirement.html">ArchitectureRequirement</a></div><div class="ttdef"><b>Definition:</b> <a href="resource__requirements_8hpp_source.html#l00070">resource_requirements.hpp:70</a></div></div>
<div class="ttc" id="aclassDeviceManager_html_ad3dba27b05b965eba693d8fecd89f9c7"><div class="ttname"><a href="classDeviceManager.html#ad3dba27b05b965eba693d8fecd89f9c7">DeviceManager::get_num_devices</a></div><div class="ttdeci">int get_num_devices()</div><div class="ttdef"><b>Definition:</b> <a href="device__manager_8hpp_source.html#l00046">device_manager.hpp:46</a></div></div>
<div class="ttc" id="aclassLocalityLoadBalancingMappingPolicy_html_aeffec6001c338c09f6b971d65804965e"><div class="ttname"><a href="classLocalityLoadBalancingMappingPolicy.html#aeffec6001c338c09f6b971d65804965e">LocalityLoadBalancingMappingPolicy::calc_score_archplacement</a></div><div class="ttdeci">bool calc_score_archplacement(InnerTask *task, ArchitectureRequirement *arch_placement_req, const Mapper &amp;mapper, std::shared_ptr&lt; DeviceRequirement &gt; &amp;chosen_dev_req, Score_t *chosen_dev_score, const std::vector&lt; std::pair&lt; parray::InnerPArray *, AccessMode &gt;&gt; &amp;parray_list, std::vector&lt; bool &gt; *is_dev_assigned=nullptr) override</div><div class="ttdoc">Calculate a score of the architecture placement requirement.</div><div class="ttdef"><b>Definition:</b> <a href="policy_8cpp_source.html#l00087">policy.cpp:87</a></div></div>
<div class="ttc" id="aclassMappingPolicy_html_a3943af0460a1a7053151449167da0d26"><div class="ttname"><a href="classMappingPolicy.html#a3943af0460a1a7053151449167da0d26">MappingPolicy::device_manager_</a></div><div class="ttdeci">DeviceManager * device_manager_</div><div class="ttdef"><b>Definition:</b> <a href="policy_8hpp_source.html#l00102">policy.hpp:102</a></div></div>
<div class="ttc" id="aclassMultiDeviceRequirements_html_ac5e4ee0e9a54f8e45318f9059aea9540"><div class="ttname"><a href="classMultiDeviceRequirements.html#ac5e4ee0e9a54f8e45318f9059aea9540">MultiDeviceRequirements::get_placement_reqs_ref</a></div><div class="ttdeci">const std::vector&lt; std::shared_ptr&lt; SinglePlacementRequirementBase &gt; &gt; &amp; get_placement_reqs_ref()</div><div class="ttdef"><b>Definition:</b> <a href="resource__requirements_8cpp_source.html#l00020">resource_requirements.cpp:20</a></div></div>
<div class="ttc" id="adevice_8hpp_html_ad258d4c51629346fceac4679b3209ad9ab1c94ca2fbc3e78fc30069c8d0f01680"><div class="ttname"><a href="device_8hpp.html#ad258d4c51629346fceac4679b3209ad9ab1c94ca2fbc3e78fc30069c8d0f01680">DeviceType::All</a></div><div class="ttdeci">@ All</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1c2860ab6caf48e27a869c05d6c29c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c2860ab6caf48e27a869c05d6c29c44">&#9670;&nbsp;</a></span>MappingPolicy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MappingPolicy::MappingPolicy</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="policy_8hpp_source.html#l00020">20</a> of file <a class="el" href="policy_8hpp_source.html">policy.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;      : <a class="code" href="classMappingPolicy.html#a3943af0460a1a7053151449167da0d26">device_manager_</a>(device_manager), <a class="code" href="classMappingPolicy.html#a70abf983ec3855f3a8f15db9930c5c82">parray_tracker_</a>(parray_tracker) {}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/c/backend/include/<a class="el" href="policy_8hpp_source.html">policy.hpp</a></li>
<li>src/c/backend/<a class="el" href="policy_8cpp_source.html">policy.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
