\hypertarget{classMappingPolicy}{}\doxysection{Mapping\+Policy Class Reference}
\label{classMappingPolicy}\index{MappingPolicy@{MappingPolicy}}


{\ttfamily \#include $<$policy.\+hpp$>$}



Inheritance diagram for Mapping\+Policy\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=248pt]{classMappingPolicy__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Mapping\+Policy\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=302pt]{classMappingPolicy__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classMappingPolicy_a1c2860ab6caf48e27a869c05d6c29c44}{Mapping\+Policy}} (\mbox{\hyperlink{classDeviceManager}{Device\+Manager}} $\ast$device\+\_\+manager, \mbox{\hyperlink{classPArrayTracker}{PArray\+Tracker}} $\ast$parray\+\_\+tracker)
\item 
virtual bool \mbox{\hyperlink{classMappingPolicy_a1ee22460c08db5ba7a07ab3ec673bc7b}{calc\+\_\+score\+\_\+devplacement}} (\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$task, const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classDeviceRequirement}{Device\+Requirement}} $>$ \&dev\+\_\+placement\+\_\+req, const \mbox{\hyperlink{classMapper}{Mapper}} \&mapper, \mbox{\hyperlink{policy_8hpp_acc133555210d07ca50d128e110e9e7a9}{Score\+\_\+t}} $\ast$score, const std\+::vector$<$ std\+::pair$<$ \mbox{\hyperlink{classparray_1_1InnerPArray}{parray\+::\+Inner\+PArray}} $\ast$, \mbox{\hyperlink{runtime_8hpp_ab22d35ed086a478dd91e93ac78037f40}{Access\+Mode}} $>$$>$ \&parray\+\_\+list)=0
\begin{DoxyCompactList}\small\item\em Calculate a score of the device placement requirement. \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classMappingPolicy_a86509271105b3cf0c7478c63e3e0469d}{calc\+\_\+score\+\_\+archplacement}} (\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$task, \mbox{\hyperlink{classArchitectureRequirement}{Architecture\+Requirement}} $\ast$arch\+\_\+placement\+\_\+req, const \mbox{\hyperlink{classMapper}{Mapper}} \&mapper, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classDeviceRequirement}{Device\+Requirement}} $>$ \&chosen\+\_\+dev\+\_\+req, \mbox{\hyperlink{policy_8hpp_acc133555210d07ca50d128e110e9e7a9}{Score\+\_\+t}} $\ast$chosen\+\_\+dev\+\_\+score, const std\+::vector$<$ std\+::pair$<$ \mbox{\hyperlink{classparray_1_1InnerPArray}{parray\+::\+Inner\+PArray}} $\ast$, \mbox{\hyperlink{runtime_8hpp_ab22d35ed086a478dd91e93ac78037f40}{Access\+Mode}} $>$$>$ \&parray\+\_\+list, std\+::vector$<$ bool $>$ $\ast$is\+\_\+dev\+\_\+assigned=nullptr)=0
\begin{DoxyCompactList}\small\item\em Calculate a score of the architecture placement requirement. \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classMappingPolicy_a5cd045c4167ac1c7e542fec83eaae55d}{calc\+\_\+score\+\_\+mdevplacement}} (\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$task, \mbox{\hyperlink{classMultiDeviceRequirements}{Multi\+Device\+Requirements}} $\ast$mdev\+\_\+placement\+\_\+req, const \mbox{\hyperlink{classMapper}{Mapper}} \&mapper, std\+::vector$<$ std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classDeviceRequirement}{Device\+Requirement}} $>$$>$ $\ast$member\+\_\+device\+\_\+reqs, \mbox{\hyperlink{policy_8hpp_acc133555210d07ca50d128e110e9e7a9}{Score\+\_\+t}} $\ast$average\+\_\+score, const std\+::vector$<$ std\+::vector$<$ std\+::pair$<$ \mbox{\hyperlink{classparray_1_1InnerPArray}{parray\+::\+Inner\+PArray}} $\ast$, \mbox{\hyperlink{runtime_8hpp_ab22d35ed086a478dd91e93ac78037f40}{Access\+Mode}} $>$$>$$>$ \&parray\+\_\+list)=0
\begin{DoxyCompactList}\small\item\em Calculate a score of the multi-\/device placement that users passed. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classDeviceManager}{Device\+Manager}} $\ast$ \mbox{\hyperlink{classMappingPolicy_a3943af0460a1a7053151449167da0d26}{device\+\_\+manager\+\_\+}}
\item 
\mbox{\hyperlink{classPArrayTracker}{PArray\+Tracker}} $\ast$ \mbox{\hyperlink{classMappingPolicy_a70abf983ec3855f3a8f15db9930c5c82}{parray\+\_\+tracker\+\_\+}}
\item 
int \mbox{\hyperlink{classMappingPolicy_a3ae7076b9ebc8601ea06d3743cf12178}{rrcount}} = 0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 18 of file policy.\+hpp.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classMappingPolicy_a1c2860ab6caf48e27a869c05d6c29c44}\label{classMappingPolicy_a1c2860ab6caf48e27a869c05d6c29c44}} 
\index{MappingPolicy@{MappingPolicy}!MappingPolicy@{MappingPolicy}}
\index{MappingPolicy@{MappingPolicy}!MappingPolicy@{MappingPolicy}}
\doxysubsubsection{\texorpdfstring{MappingPolicy()}{MappingPolicy()}}
{\footnotesize\ttfamily Mapping\+Policy\+::\+Mapping\+Policy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classDeviceManager}{Device\+Manager}} $\ast$}]{device\+\_\+manager,  }\item[{\mbox{\hyperlink{classPArrayTracker}{PArray\+Tracker}} $\ast$}]{parray\+\_\+tracker }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 20 of file policy.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{21       : \mbox{\hyperlink{classMappingPolicy_a3943af0460a1a7053151449167da0d26}{device\_manager\_}}(device\_manager), \mbox{\hyperlink{classMappingPolicy_a70abf983ec3855f3a8f15db9930c5c82}{parray\_tracker\_}}(parray\_tracker) \{\}}

\end{DoxyCode}


References device\+\_\+manager\+\_\+, and parray\+\_\+tracker\+\_\+.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classMappingPolicy_a86509271105b3cf0c7478c63e3e0469d}\label{classMappingPolicy_a86509271105b3cf0c7478c63e3e0469d}} 
\index{MappingPolicy@{MappingPolicy}!calc\_score\_archplacement@{calc\_score\_archplacement}}
\index{calc\_score\_archplacement@{calc\_score\_archplacement}!MappingPolicy@{MappingPolicy}}
\doxysubsubsection{\texorpdfstring{calc\_score\_archplacement()}{calc\_score\_archplacement()}}
{\footnotesize\ttfamily virtual bool Mapping\+Policy\+::calc\+\_\+score\+\_\+archplacement (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$}]{task,  }\item[{\mbox{\hyperlink{classArchitectureRequirement}{Architecture\+Requirement}} $\ast$}]{arch\+\_\+placement\+\_\+req,  }\item[{const \mbox{\hyperlink{classMapper}{Mapper}} \&}]{mapper,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classDeviceRequirement}{Device\+Requirement}} $>$ \&}]{chosen\+\_\+dev\+\_\+req,  }\item[{\mbox{\hyperlink{policy_8hpp_acc133555210d07ca50d128e110e9e7a9}{Score\+\_\+t}} $\ast$}]{chosen\+\_\+dev\+\_\+score,  }\item[{const std\+::vector$<$ std\+::pair$<$ \mbox{\hyperlink{classparray_1_1InnerPArray}{parray\+::\+Inner\+PArray}} $\ast$, \mbox{\hyperlink{runtime_8hpp_ab22d35ed086a478dd91e93ac78037f40}{Access\+Mode}} $>$$>$ \&}]{parray\+\_\+list,  }\item[{std\+::vector$<$ bool $>$ $\ast$}]{is\+\_\+dev\+\_\+assigned = {\ttfamily nullptr} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Calculate a score of the architecture placement requirement. 

This function first iterates devices of the architecture, and calculates a score for each device based on the current states of the device (e.\+g., available memory and the number of vcus). It returns a device giving the best score and its score. Note that it does not choose a device for a task, but the caller, so the task mapper, will choose one of the placement options.


\begin{DoxyParams}{Parameters}
{\em task} & Target task for task mapping. \\
\hline
{\em arch\+\_\+placement\+\_\+req} & Resource requirement of the architecture. \\
\hline
{\em mapper} & \mbox{\hyperlink{classMapper}{Mapper}} instance to get mapping information. \\
\hline
{\em chosen\+\_\+dev\+\_\+req} & A pointer of a chosen device and its resource requirement. This is a reference type since this function chooses a device and updates its pointer to the device requirement. \\
\hline
{\em chosen\+\_\+dev\+\_\+score} & A pointer of a score of the chosen device. \\
\hline
{\em parray\+\_\+list} & A list of PArray instances used by the target task \\
\hline
{\em is\+\_\+dev\+\_\+assigned} & Multi-\/device task is not allowed to be assigned to duplicated devices. This vector marks assigned devices and avoid that case. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if any device in the architecture is available 
\end{DoxyReturn}


Implemented in \mbox{\hyperlink{classLocalityLoadBalancingMappingPolicy_aeffec6001c338c09f6b971d65804965e}{Locality\+Load\+Balancing\+Mapping\+Policy}}.

\mbox{\Hypertarget{classMappingPolicy_a1ee22460c08db5ba7a07ab3ec673bc7b}\label{classMappingPolicy_a1ee22460c08db5ba7a07ab3ec673bc7b}} 
\index{MappingPolicy@{MappingPolicy}!calc\_score\_devplacement@{calc\_score\_devplacement}}
\index{calc\_score\_devplacement@{calc\_score\_devplacement}!MappingPolicy@{MappingPolicy}}
\doxysubsubsection{\texorpdfstring{calc\_score\_devplacement()}{calc\_score\_devplacement()}}
{\footnotesize\ttfamily virtual bool Mapping\+Policy\+::calc\+\_\+score\+\_\+devplacement (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$}]{task,  }\item[{const std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classDeviceRequirement}{Device\+Requirement}} $>$ \&}]{dev\+\_\+placement\+\_\+req,  }\item[{const \mbox{\hyperlink{classMapper}{Mapper}} \&}]{mapper,  }\item[{\mbox{\hyperlink{policy_8hpp_acc133555210d07ca50d128e110e9e7a9}{Score\+\_\+t}} $\ast$}]{score,  }\item[{const std\+::vector$<$ std\+::pair$<$ \mbox{\hyperlink{classparray_1_1InnerPArray}{parray\+::\+Inner\+PArray}} $\ast$, \mbox{\hyperlink{runtime_8hpp_ab22d35ed086a478dd91e93ac78037f40}{Access\+Mode}} $>$$>$ \&}]{parray\+\_\+list }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Calculate a score of the device placement requirement. 

This function calculates a score of a device based on the current states of the device (e.\+g., available memory and the number of vcus). It returns a device giving the best score and its score. Note that it does not choose a device for a task, but the caller, so the task mapper, will choose one of the placement options.


\begin{DoxyParams}{Parameters}
{\em task} & Target task for task mapping. \\
\hline
{\em dev\+\_\+placement\+\_\+req} & Resource requirement of the device. \\
\hline
{\em mapper} & \mbox{\hyperlink{classMapper}{Mapper}} instance to get mapping information. \\
\hline
{\em score} & A pointer of a score of the device. \\
\hline
{\em parray\+\_\+list} & A list of PArray instances used by the target task \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if a device is available 
\end{DoxyReturn}


Implemented in \mbox{\hyperlink{classLocalityLoadBalancingMappingPolicy_ad4dd7032ab349a74f3ab4498c867a341}{Locality\+Load\+Balancing\+Mapping\+Policy}}.

\mbox{\Hypertarget{classMappingPolicy_a5cd045c4167ac1c7e542fec83eaae55d}\label{classMappingPolicy_a5cd045c4167ac1c7e542fec83eaae55d}} 
\index{MappingPolicy@{MappingPolicy}!calc\_score\_mdevplacement@{calc\_score\_mdevplacement}}
\index{calc\_score\_mdevplacement@{calc\_score\_mdevplacement}!MappingPolicy@{MappingPolicy}}
\doxysubsubsection{\texorpdfstring{calc\_score\_mdevplacement()}{calc\_score\_mdevplacement()}}
{\footnotesize\ttfamily virtual bool Mapping\+Policy\+::calc\+\_\+score\+\_\+mdevplacement (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classInnerTask}{Inner\+Task}} $\ast$}]{task,  }\item[{\mbox{\hyperlink{classMultiDeviceRequirements}{Multi\+Device\+Requirements}} $\ast$}]{mdev\+\_\+placement\+\_\+req,  }\item[{const \mbox{\hyperlink{classMapper}{Mapper}} \&}]{mapper,  }\item[{std\+::vector$<$ std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classDeviceRequirement}{Device\+Requirement}} $>$$>$ $\ast$}]{member\+\_\+device\+\_\+reqs,  }\item[{\mbox{\hyperlink{policy_8hpp_acc133555210d07ca50d128e110e9e7a9}{Score\+\_\+t}} $\ast$}]{average\+\_\+score,  }\item[{const std\+::vector$<$ std\+::vector$<$ std\+::pair$<$ \mbox{\hyperlink{classparray_1_1InnerPArray}{parray\+::\+Inner\+PArray}} $\ast$, \mbox{\hyperlink{runtime_8hpp_ab22d35ed086a478dd91e93ac78037f40}{Access\+Mode}} $>$$>$$>$ \&}]{parray\+\_\+list }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Calculate a score of the multi-\/device placement that users passed. 

The placement requirement could contain multiple device or/and architecture requirements. This function calculates a score for each placement requirement by recursively calling a device or an architecture score calculation function and averages those scores. This average is used as a score of the multi-\/device placement and the caller, so the task mapper, will choose one of the placement options that give the best score.


\begin{DoxyParams}{Parameters}
{\em task} & Target task for task mapping. \\
\hline
{\em mdev\+\_\+placement\+\_\+req} & Resource requirement of the multiple devices. \\
\hline
{\em mapper} & \mbox{\hyperlink{classMapper}{Mapper}} instance to get mapping information. \\
\hline
{\em member\+\_\+device\+\_\+reqs} & A vector of the resource requirement of the member device. \\
\hline
{\em chosen\+\_\+dev\+\_\+score} & A pointer of a score of the multiple devices. \\
\hline
{\em parray\+\_\+list} & A list of PArray instances used by the target task \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if all devices in the multi-\/device placement are available. 
\end{DoxyReturn}


Implemented in \mbox{\hyperlink{classLocalityLoadBalancingMappingPolicy_a1f33fe9c821604def797319186daedb1}{Locality\+Load\+Balancing\+Mapping\+Policy}}.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classMappingPolicy_a3943af0460a1a7053151449167da0d26}\label{classMappingPolicy_a3943af0460a1a7053151449167da0d26}} 
\index{MappingPolicy@{MappingPolicy}!device\_manager\_@{device\_manager\_}}
\index{device\_manager\_@{device\_manager\_}!MappingPolicy@{MappingPolicy}}
\doxysubsubsection{\texorpdfstring{device\_manager\_}{device\_manager\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classDeviceManager}{Device\+Manager}}$\ast$ Mapping\+Policy\+::device\+\_\+manager\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 102 of file policy.\+hpp.



Referenced by Mapping\+Policy().

\mbox{\Hypertarget{classMappingPolicy_a70abf983ec3855f3a8f15db9930c5c82}\label{classMappingPolicy_a70abf983ec3855f3a8f15db9930c5c82}} 
\index{MappingPolicy@{MappingPolicy}!parray\_tracker\_@{parray\_tracker\_}}
\index{parray\_tracker\_@{parray\_tracker\_}!MappingPolicy@{MappingPolicy}}
\doxysubsubsection{\texorpdfstring{parray\_tracker\_}{parray\_tracker\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{classPArrayTracker}{PArray\+Tracker}}$\ast$ Mapping\+Policy\+::parray\+\_\+tracker\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 103 of file policy.\+hpp.



Referenced by Mapping\+Policy().

\mbox{\Hypertarget{classMappingPolicy_a3ae7076b9ebc8601ea06d3743cf12178}\label{classMappingPolicy_a3ae7076b9ebc8601ea06d3743cf12178}} 
\index{MappingPolicy@{MappingPolicy}!rrcount@{rrcount}}
\index{rrcount@{rrcount}!MappingPolicy@{MappingPolicy}}
\doxysubsubsection{\texorpdfstring{rrcount}{rrcount}}
{\footnotesize\ttfamily int Mapping\+Policy\+::rrcount = 0\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line 104 of file policy.\+hpp.



Referenced by Locality\+Load\+Balancing\+Mapping\+Policy\+::calc\+\_\+score\+\_\+archplacement().



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/c/backend/include/\mbox{\hyperlink{policy_8hpp}{policy.\+hpp}}\end{DoxyCompactItemize}
